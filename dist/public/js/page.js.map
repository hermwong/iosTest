{"version":3,"sources":["node_modules/browser-pack/_prelude.js","public/js/page/index.js","isojs/flags.js","isojs/wiki-display-date.js","node_modules/browser-cookies/src/browser-cookies.js","node_modules/debounce/index.js","node_modules/events/events.js","node_modules/handlebars/dist/cjs/handlebars.runtime.js","node_modules/handlebars/dist/cjs/handlebars/base.js","node_modules/handlebars/dist/cjs/handlebars/exception.js","node_modules/handlebars/dist/cjs/handlebars/no-conflict.js","node_modules/handlebars/dist/cjs/handlebars/runtime.js","node_modules/handlebars/dist/cjs/handlebars/safe-string.js","node_modules/handlebars/dist/cjs/handlebars/utils.js","node_modules/handlebars/runtime.js","node_modules/hbsfy/runtime.js","node_modules/process/browser.js","node_modules/querystring-es3/decode.js","node_modules/querystring-es3/encode.js","node_modules/querystring-es3/index.js","node_modules/regenerator-runtime/runtime.js","node_modules/regenerator/runtime.js","node_modules/srcset/srcset.js","public/js/page/article-controller.js","public/js/page/flags-controller.js","public/js/page/flags.js","public/js/page/global-controller.js","public/js/page/home-controller.js","public/js/page/load-scripts.js","public/js/page/utils.js","public/js/page/views/article.js","public/js/page/views/cached-articles.js","public/js/page/views/search-results.js","public/js/page/views/spinner.js","public/js/page/views/templates/article-content.hbs","public/js/page/views/templates/background-load.hbs","public/js/page/views/templates/cached-articles.hbs","public/js/page/views/templates/search-results.hbs","public/js/page/views/toasts.js","public/js/page/views/toolbar.js","public/js/shared/indexeddouchbag.js","public/js/shared/storage.js","public/js/shared/wikipedia.js","shared-templates/article-header.hbs"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjHA;AACA;AACA;AACA;;ACHA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChqBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACndA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"page.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar loadScripts = require(\"./load-scripts\");\nvar polyfillsNeeded = [];\n\nif (!window.Promise) {\n  // IE :(\n  polyfillsNeeded.push('/js/promise-polyfill.js');\n}\n\nif (!window.fetch) {\n  polyfillsNeeded.push('/js/fetch.js');\n}\n\n// I'm sure user-agent sniffing will be fiiiiine\nif (/(iPhone|iPad);/.test(navigator.userAgent)) {\n  polyfillsNeeded.push('/js/fastclick.js');\n}\n\nloadScripts(polyfillsNeeded, function (_) {\n  // Usually defer, but the blocking flag means\n  // this happens early\n  require('./utils').domReady.then(function (_) {\n    var c = new (require('./global-controller'))();\n  });\n}, function (_) {\n  console.error(\"Failed to load polyfills\");\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVDLElBQUksZUFBZSxHQUFHLEVBQUUsQ0FBQzs7QUFFekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUU7O0FBQ25CLGlCQUFlLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUM7Q0FDakQ7O0FBRUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7QUFDakIsaUJBQWUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7Q0FDdEM7OztBQUdELElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRTtBQUM5QyxpQkFBZSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0NBQzFDOztBQUVELFdBQVcsQ0FBQyxlQUFlLEVBQUUsVUFBQSxDQUFDLEVBQUk7OztBQUdoQyxTQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFBLENBQUMsRUFBSTtBQUNwQyxRQUFJLENBQUMsR0FBRyxLQUFLLE9BQU8sQ0FBQyxxQkFBcUIsRUFBQyxFQUFDLENBQUM7R0FDOUMsQ0FBQyxDQUFDO0NBQ0osRUFBRSxVQUFBLENBQUMsRUFBSTtBQUNOLFNBQU8sQ0FBQyxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztDQUMzQyxDQUFDLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGxvYWRTY3JpcHRzID0gcmVxdWlyZShcIi4vbG9hZC1zY3JpcHRzXCIpO1xudmFyIHBvbHlmaWxsc05lZWRlZCA9IFtdO1xuXG5pZiAoIXdpbmRvdy5Qcm9taXNlKSB7IC8vIElFIDooXG4gIHBvbHlmaWxsc05lZWRlZC5wdXNoKCcvanMvcHJvbWlzZS1wb2x5ZmlsbC5qcycpO1xufVxuXG5pZiAoIXdpbmRvdy5mZXRjaCkge1xuICBwb2x5ZmlsbHNOZWVkZWQucHVzaCgnL2pzL2ZldGNoLmpzJyk7XG59XG5cbi8vIEknbSBzdXJlIHVzZXItYWdlbnQgc25pZmZpbmcgd2lsbCBiZSBmaWlpaWluZVxuaWYgKC8oaVBob25lfGlQYWQpOy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICBwb2x5ZmlsbHNOZWVkZWQucHVzaCgnL2pzL2Zhc3RjbGljay5qcycpO1xufVxuXG5sb2FkU2NyaXB0cyhwb2x5ZmlsbHNOZWVkZWQsIF8gPT4ge1xuICAvLyBVc3VhbGx5IGRlZmVyLCBidXQgdGhlIGJsb2NraW5nIGZsYWcgbWVhbnNcbiAgLy8gdGhpcyBoYXBwZW5zIGVhcmx5XG4gIHJlcXVpcmUoJy4vdXRpbHMnKS5kb21SZWFkeS50aGVuKF8gPT4ge1xuICAgIHZhciBjID0gbmV3IChyZXF1aXJlKCcuL2dsb2JhbC1jb250cm9sbGVyJykpO1xuICB9KTtcbn0sIF8gPT4ge1xuICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcG9seWZpbGxzXCIpO1xufSk7XG4iXX0=","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar querystring = require('querystring');\n\nvar Flags = (function () {\n  function Flags() {\n    var cookieVal = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n    var urlVal = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n    _classCallCheck(this, Flags);\n\n    this._vals = querystring.parse(urlVal);\n\n    if (!this.has('use-url-flags')) {\n      this._vals = querystring.parse(cookieVal);\n    }\n  }\n\n  _createClass(Flags, [{\n    key: 'get',\n    value: function get(key) {\n      return this._vals[key];\n    }\n  }, {\n    key: 'getAll',\n    value: function getAll() {\n      return this._vals;\n    }\n  }, {\n    key: 'has',\n    value: function has(key) {\n      return key in this._vals;\n    }\n  }]);\n\n  return Flags;\n})();\n\nmodule.exports = Flags;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9pc29qcy9mbGFncy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7O0lBRW5DLEtBQUs7QUFDRSxXQURQLEtBQUssR0FDZ0M7UUFBN0IsU0FBUyx5REFBRyxFQUFFO1FBQUUsTUFBTSx5REFBRyxFQUFFOzswQkFEbkMsS0FBSzs7QUFFUCxRQUFJLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXZDLFFBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQzlCLFVBQUksQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztLQUMzQztHQUNGOztlQVBHLEtBQUs7O1dBU04sYUFBQyxHQUFHLEVBQUU7QUFDUCxhQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDeEI7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0tBQ25COzs7V0FFRSxhQUFDLEdBQUcsRUFBRTtBQUNQLGFBQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDMUI7OztTQW5CRyxLQUFLOzs7QUFzQlgsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL2lzb2pzL2ZsYWdzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcblxuY2xhc3MgRmxhZ3Mge1xuICBjb25zdHJ1Y3Rvcihjb29raWVWYWwgPSAnJywgdXJsVmFsID0gJycpIHtcbiAgICB0aGlzLl92YWxzID0gcXVlcnlzdHJpbmcucGFyc2UodXJsVmFsKTtcblxuICAgIGlmICghdGhpcy5oYXMoJ3VzZS11cmwtZmxhZ3MnKSkge1xuICAgICAgdGhpcy5fdmFscyA9IHF1ZXJ5c3RyaW5nLnBhcnNlKGNvb2tpZVZhbCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0KGtleSkge1xuICAgIHJldHVybiB0aGlzLl92YWxzW2tleV07XG4gIH1cblxuICBnZXRBbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHM7XG4gIH1cblxuICBoYXMoa2V5KSB7XG4gICAgcmV0dXJuIGtleSBpbiB0aGlzLl92YWxzO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmxhZ3M7Il19","'use strict';\n\nmodule.exports = function (date) {\n  var month = date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\n  var day = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\n  var hours = date.getHours() < 10 ? '0' + date.getHours() : date.getHours();\n  var minutes = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();\n  return date.getFullYear() + '/' + month + '/' + day + ' ' + hours + ':' + minutes;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9pc29qcy93aWtpLWRpc3BsYXktZGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDOUIsTUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBQyxDQUFDLENBQUEsQUFBQyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBQyxDQUFDLENBQUM7QUFDbkYsTUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUN0RSxNQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQzNFLE1BQUksT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDbkYsU0FBVSxJQUFJLENBQUMsV0FBVyxFQUFFLFNBQUksS0FBSyxTQUFJLEdBQUcsU0FBSSxLQUFLLFNBQUksT0FBTyxDQUFHO0NBQ3BFLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL2lzb2pzL3dpa2ktZGlzcGxheS1kYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRlKSB7XG4gIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSsxIDwgMTAgPyAnMCcgKyAoZGF0ZS5nZXRNb250aCgpKzEpIDogZGF0ZS5nZXRNb250aCgpKzE7XG4gIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXREYXRlKCkgOiBkYXRlLmdldERhdGUoKTtcbiAgdmFyIGhvdXJzID0gZGF0ZS5nZXRIb3VycygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldEhvdXJzKCkgOiBkYXRlLmdldEhvdXJzKCk7XG4gIHZhciBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XG4gIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LyR7bW9udGh9LyR7ZGF5fSAke2hvdXJzfToke21pbnV0ZXN9YDtcbn07Il19","exports.defaults = {};\r\n\r\nexports.set = function(name, value, options) {\r\n  // Retrieve options and defaults\r\n  var opts = options || {};\r\n  var defaults = exports.defaults;\r\n\r\n  // Apply default value for unspecified options\r\n  var expires  = opts.expires  || defaults.expires;\r\n  var domain   = opts.domain   || defaults.domain;\r\n  var path     = opts.path     !== undefined ? opts.path     : (defaults.path !== undefined ? defaults.path : '/');\r\n  var secure   = opts.secure   !== undefined ? opts.secure   : defaults.secure;\r\n  var httponly = opts.httponly !== undefined ? opts.httponly : defaults.httponly;\r\n\r\n  // Determine cookie expiration date\r\n  // If succesful the result will be a valid Date, otherwise it will be an invalid Date or false(ish)\r\n  var expDate = expires ? new Date(\r\n      // in case expires is an integer, it should specify the number of days till the cookie expires\r\n      typeof expires === 'number' ? new Date().getTime() + (expires * 864e5) :\r\n      // else expires should be either a Date object or in a format recognized by Date.parse()\r\n      expires\r\n  ) : '';\r\n\r\n  // Set cookie\r\n  document.cookie = name.replace(/[^+#$&^`|]/g, encodeURIComponent)                // Encode cookie name\r\n  .replace('(', '%28')\r\n  .replace(')', '%29') +\r\n  '=' + value.replace(/[^+#$&/:<-\\[\\]-}]/g, encodeURIComponent) +                  // Encode cookie value (RFC6265)\r\n  (expDate && expDate.getTime() >= 0 ? ';expires=' + expDate.toUTCString() : '') + // Add expiration date\r\n  (domain   ? ';domain=' + domain : '') +                                          // Add domain\r\n  (path     ? ';path='   + path   : '') +                                          // Add path\r\n  (secure   ? ';secure'           : '') +                                          // Add secure option\r\n  (httponly ? ';httponly'         : '');                                           // Add httponly option\r\n};\r\n\r\nexports.get = function(name) {\r\n  var cookies = document.cookie.split(';');\r\n\r\n  // Iterate all cookies\r\n  for(var i = 0; i < cookies.length; i++) {\r\n    var cookie = cookies[i];\r\n    var cookieLength = cookie.length;\r\n\r\n    // Determine separator index (\"name=value\")\r\n    var separatorIndex = cookie.indexOf('=');\r\n\r\n    // IE<11 emits the equal sign when the cookie value is empty\r\n    separatorIndex = separatorIndex < 0 ? cookieLength : separatorIndex;\r\n\r\n    var cookie_name = decodeURIComponent(cookie.substring(0, separatorIndex).replace(/^\\s+/, ''));\r\n\r\n    // Return cookie value if the name matches\r\n    if (cookie_name === name) {\r\n      return decodeURIComponent(cookie.substring(separatorIndex + 1, cookieLength));\r\n    }\r\n  }\r\n\r\n  // Return `null` as the cookie was not found\r\n  return null;\r\n};\r\n\r\nexports.erase = function(name, options) {\r\n  exports.set(name, '', {\r\n    expires:  -1,\r\n    domain:   options && options.domain,\r\n    path:     options && options.path,\r\n    secure:   0,\r\n    httponly: 0}\r\n  );\r\n};\r\n\r\nexports.all = function() {\r\n  var all = {};\r\n  var cookies = document.cookie.split(';');\r\n\r\n  // Iterate all cookies\r\n  for(var i = 0; i < cookies.length; i++) {\r\n\t  var cookie = cookies[i];\r\n    var cookieLength = cookie.length;\r\n\r\n\t  // Determine separator index (\"name=value\")\r\n\t  var separatorIndex = cookie.indexOf('=');\r\n\r\n\t  // IE<11 emits the equal sign when the cookie value is empty\r\n\t  separatorIndex = separatorIndex < 0 ? cookieLength : separatorIndex;\r\n\r\n    // add the cookie name and value to the `all` object\r\n\t  var cookie_name = decodeURIComponent(cookie.substring(0, separatorIndex).replace(/^\\s+/, ''));\r\n\t  all[cookie_name] = decodeURIComponent(cookie.substring(separatorIndex + 1, cookieLength));\r\n\t}\r\n\r\n  return all;\r\n};\r\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","'use strict';\n\nvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { 'default': obj }; };\n\nexports.__esModule = true;\n\nvar _import = require('./handlebars/base');\n\nvar base = _interopRequireWildcard(_import);\n\n// Each of these augment the Handlebars object. No need to setup here.\n// (This is done to easily share code between commonjs and browse envs)\n\nvar _SafeString = require('./handlebars/safe-string');\n\nvar _SafeString2 = _interopRequireWildcard(_SafeString);\n\nvar _Exception = require('./handlebars/exception');\n\nvar _Exception2 = _interopRequireWildcard(_Exception);\n\nvar _import2 = require('./handlebars/utils');\n\nvar Utils = _interopRequireWildcard(_import2);\n\nvar _import3 = require('./handlebars/runtime');\n\nvar runtime = _interopRequireWildcard(_import3);\n\nvar _noConflict = require('./handlebars/no-conflict');\n\nvar _noConflict2 = _interopRequireWildcard(_noConflict);\n\n// For compatibility and usage outside of module systems, make the Handlebars object a namespace\nfunction create() {\n  var hb = new base.HandlebarsEnvironment();\n\n  Utils.extend(hb, base);\n  hb.SafeString = _SafeString2['default'];\n  hb.Exception = _Exception2['default'];\n  hb.Utils = Utils;\n  hb.escapeExpression = Utils.escapeExpression;\n\n  hb.VM = runtime;\n  hb.template = function (spec) {\n    return runtime.template(spec, hb);\n  };\n\n  return hb;\n}\n\nvar inst = create();\ninst.create = create;\n\n_noConflict2['default'](inst);\n\ninst['default'] = inst;\n\nexports['default'] = inst;\nmodule.exports = exports['default'];","'use strict';\n\nvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { 'default': obj }; };\n\nexports.__esModule = true;\nexports.HandlebarsEnvironment = HandlebarsEnvironment;\nexports.createFrame = createFrame;\n\nvar _import = require('./utils');\n\nvar Utils = _interopRequireWildcard(_import);\n\nvar _Exception = require('./exception');\n\nvar _Exception2 = _interopRequireWildcard(_Exception);\n\nvar VERSION = '3.0.1';\nexports.VERSION = VERSION;\nvar COMPILER_REVISION = 6;\n\nexports.COMPILER_REVISION = COMPILER_REVISION;\nvar REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '== 1.x.x',\n  5: '== 2.0.0-alpha.x',\n  6: '>= 2.0.0-beta.1'\n};\n\nexports.REVISION_CHANGES = REVISION_CHANGES;\nvar isArray = Utils.isArray,\n    isFunction = Utils.isFunction,\n    toString = Utils.toString,\n    objectType = '[object Object]';\n\nfunction HandlebarsEnvironment(helpers, partials) {\n  this.helpers = helpers || {};\n  this.partials = partials || {};\n\n  registerDefaultHelpers(this);\n}\n\nHandlebarsEnvironment.prototype = {\n  constructor: HandlebarsEnvironment,\n\n  logger: logger,\n  log: log,\n\n  registerHelper: function registerHelper(name, fn) {\n    if (toString.call(name) === objectType) {\n      if (fn) {\n        throw new _Exception2['default']('Arg not supported with multiple helpers');\n      }\n      Utils.extend(this.helpers, name);\n    } else {\n      this.helpers[name] = fn;\n    }\n  },\n  unregisterHelper: function unregisterHelper(name) {\n    delete this.helpers[name];\n  },\n\n  registerPartial: function registerPartial(name, partial) {\n    if (toString.call(name) === objectType) {\n      Utils.extend(this.partials, name);\n    } else {\n      if (typeof partial === 'undefined') {\n        throw new _Exception2['default']('Attempting to register a partial as undefined');\n      }\n      this.partials[name] = partial;\n    }\n  },\n  unregisterPartial: function unregisterPartial(name) {\n    delete this.partials[name];\n  }\n};\n\nfunction registerDefaultHelpers(instance) {\n  instance.registerHelper('helperMissing', function () {\n    if (arguments.length === 1) {\n      // A missing field in a {{foo}} constuct.\n      return undefined;\n    } else {\n      // Someone is actually trying to call something, blow up.\n      throw new _Exception2['default']('Missing helper: \"' + arguments[arguments.length - 1].name + '\"');\n    }\n  });\n\n  instance.registerHelper('blockHelperMissing', function (context, options) {\n    var inverse = options.inverse,\n        fn = options.fn;\n\n    if (context === true) {\n      return fn(this);\n    } else if (context === false || context == null) {\n      return inverse(this);\n    } else if (isArray(context)) {\n      if (context.length > 0) {\n        if (options.ids) {\n          options.ids = [options.name];\n        }\n\n        return instance.helpers.each(context, options);\n      } else {\n        return inverse(this);\n      }\n    } else {\n      if (options.data && options.ids) {\n        var data = createFrame(options.data);\n        data.contextPath = Utils.appendContextPath(options.data.contextPath, options.name);\n        options = { data: data };\n      }\n\n      return fn(context, options);\n    }\n  });\n\n  instance.registerHelper('each', function (context, options) {\n    if (!options) {\n      throw new _Exception2['default']('Must pass iterator to #each');\n    }\n\n    var fn = options.fn,\n        inverse = options.inverse,\n        i = 0,\n        ret = '',\n        data = undefined,\n        contextPath = undefined;\n\n    if (options.data && options.ids) {\n      contextPath = Utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (isFunction(context)) {\n      context = context.call(this);\n    }\n\n    if (options.data) {\n      data = createFrame(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret = ret + fn(context[field], {\n        data: data,\n        blockParams: Utils.blockParams([context[field], field], [contextPath + field, null])\n      });\n    }\n\n    if (context && typeof context === 'object') {\n      if (isArray(context)) {\n        for (var j = context.length; i < j; i++) {\n          execIteration(i, i, i === context.length - 1);\n        }\n      } else {\n        var priorKey = undefined;\n\n        for (var key in context) {\n          if (context.hasOwnProperty(key)) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array.\n            if (priorKey) {\n              execIteration(priorKey, i - 1);\n            }\n            priorKey = key;\n            i++;\n          }\n        }\n        if (priorKey) {\n          execIteration(priorKey, i - 1, true);\n        }\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n\n  instance.registerHelper('if', function (conditional, options) {\n    if (isFunction(conditional)) {\n      conditional = conditional.call(this);\n    }\n\n    // Default behavior is to render the positive path if the value is truthy and not empty.\n    // The `includeZero` option may be set to treat the condtional as purely not empty based on the\n    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\n    if (!options.hash.includeZero && !conditional || Utils.isEmpty(conditional)) {\n      return options.inverse(this);\n    } else {\n      return options.fn(this);\n    }\n  });\n\n  instance.registerHelper('unless', function (conditional, options) {\n    return instance.helpers['if'].call(this, conditional, { fn: options.inverse, inverse: options.fn, hash: options.hash });\n  });\n\n  instance.registerHelper('with', function (context, options) {\n    if (isFunction(context)) {\n      context = context.call(this);\n    }\n\n    var fn = options.fn;\n\n    if (!Utils.isEmpty(context)) {\n      if (options.data && options.ids) {\n        var data = createFrame(options.data);\n        data.contextPath = Utils.appendContextPath(options.data.contextPath, options.ids[0]);\n        options = { data: data };\n      }\n\n      return fn(context, options);\n    } else {\n      return options.inverse(this);\n    }\n  });\n\n  instance.registerHelper('log', function (message, options) {\n    var level = options.data && options.data.level != null ? parseInt(options.data.level, 10) : 1;\n    instance.log(level, message);\n  });\n\n  instance.registerHelper('lookup', function (obj, field) {\n    return obj && obj[field];\n  });\n}\n\nvar logger = {\n  methodMap: { 0: 'debug', 1: 'info', 2: 'warn', 3: 'error' },\n\n  // State enum\n  DEBUG: 0,\n  INFO: 1,\n  WARN: 2,\n  ERROR: 3,\n  level: 1,\n\n  // Can be overridden in the host environment\n  log: function log(level, message) {\n    if (typeof console !== 'undefined' && logger.level <= level) {\n      var method = logger.methodMap[level];\n      (console[method] || console.log).call(console, message); // eslint-disable-line no-console\n    }\n  }\n};\n\nexports.logger = logger;\nvar log = logger.log;\n\nexports.log = log;\n\nfunction createFrame(object) {\n  var frame = Utils.extend({}, object);\n  frame._parent = object;\n  return frame;\n}\n\n/* [args, ]options */","'use strict';\n\nexports.__esModule = true;\n\nvar errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];\n\nfunction Exception(message, node) {\n  var loc = node && node.loc,\n      line = undefined,\n      column = undefined;\n  if (loc) {\n    line = loc.start.line;\n    column = loc.start.column;\n\n    message += ' - ' + line + ':' + column;\n  }\n\n  var tmp = Error.prototype.constructor.call(this, message);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (var idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, Exception);\n  }\n\n  if (loc) {\n    this.lineNumber = line;\n    this.column = column;\n  }\n}\n\nException.prototype = new Error();\n\nexports['default'] = Exception;\nmodule.exports = exports['default'];","(function (global){\n'use strict';\n\nexports.__esModule = true;\n/*global window */\n\nexports['default'] = function (Handlebars) {\n  /* istanbul ignore next */\n  var root = typeof global !== 'undefined' ? global : window,\n      $Handlebars = root.Handlebars;\n  /* istanbul ignore next */\n  Handlebars.noConflict = function () {\n    if (root.Handlebars === Handlebars) {\n      root.Handlebars = $Handlebars;\n    }\n  };\n};\n\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvbm8tY29uZmxpY3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuLypnbG9iYWwgd2luZG93ICovXG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGZ1bmN0aW9uIChIYW5kbGViYXJzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHZhciByb290ID0gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3csXG4gICAgICAkSGFuZGxlYmFycyA9IHJvb3QuSGFuZGxlYmFycztcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgSGFuZGxlYmFycy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChyb290LkhhbmRsZWJhcnMgPT09IEhhbmRsZWJhcnMpIHtcbiAgICAgIHJvb3QuSGFuZGxlYmFycyA9ICRIYW5kbGViYXJzO1xuICAgIH1cbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyJdfQ==","'use strict';\n\nvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { 'default': obj }; };\n\nexports.__esModule = true;\nexports.checkRevision = checkRevision;\n\n// TODO: Remove this line and break up compilePartial\n\nexports.template = template;\nexports.wrapProgram = wrapProgram;\nexports.resolvePartial = resolvePartial;\nexports.invokePartial = invokePartial;\nexports.noop = noop;\n\nvar _import = require('./utils');\n\nvar Utils = _interopRequireWildcard(_import);\n\nvar _Exception = require('./exception');\n\nvar _Exception2 = _interopRequireWildcard(_Exception);\n\nvar _COMPILER_REVISION$REVISION_CHANGES$createFrame = require('./base');\n\nfunction checkRevision(compilerInfo) {\n  var compilerRevision = compilerInfo && compilerInfo[0] || 1,\n      currentRevision = _COMPILER_REVISION$REVISION_CHANGES$createFrame.COMPILER_REVISION;\n\n  if (compilerRevision !== currentRevision) {\n    if (compilerRevision < currentRevision) {\n      var runtimeVersions = _COMPILER_REVISION$REVISION_CHANGES$createFrame.REVISION_CHANGES[currentRevision],\n          compilerVersions = _COMPILER_REVISION$REVISION_CHANGES$createFrame.REVISION_CHANGES[compilerRevision];\n      throw new _Exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');\n    } else {\n      // Use the embedded version info since the runtime doesn't know about this revision yet\n      throw new _Exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');\n    }\n  }\n}\n\nfunction template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new _Exception2['default']('No environment passed to template');\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new _Exception2['default']('Unknown template object: ' + typeof templateSpec);\n  }\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as psuedo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n    }\n\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n    var result = env.VM.invokePartial.call(this, partial, context, options);\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);\n      result = options.partials[options.name](context, options);\n    }\n    if (result != null) {\n      if (options.indent) {\n        var lines = result.split('\\n');\n        for (var i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new _Exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');\n    }\n  }\n\n  // Just add water\n  var container = {\n    strict: function strict(obj, name) {\n      if (!(name in obj)) {\n        throw new _Exception2['default']('\"' + name + '\" not defined in ' + obj);\n      }\n      return obj[name];\n    },\n    lookup: function lookup(depths, name) {\n      var len = depths.length;\n      for (var i = 0; i < len; i++) {\n        if (depths[i] && depths[i][name] != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function lambda(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function fn(i) {\n      return templateSpec[i];\n    },\n\n    programs: [],\n    program: function program(i, data, declaredBlockParams, blockParams, depths) {\n      var programWrapper = this.programs[i],\n          fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function data(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n      return value;\n    },\n    merge: function merge(param, common) {\n      var obj = param || common;\n\n      if (param && common && param !== common) {\n        obj = Utils.extend({}, common, param);\n      }\n\n      return obj;\n    },\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context) {\n    var options = arguments[1] === undefined ? {} : arguments[1];\n\n    var data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    var depths = undefined,\n        blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      depths = options.depths ? [context].concat(options.depths) : [context];\n    }\n\n    return templateSpec.main.call(container, context, container.helpers, container.partials, data, blockParams, depths);\n  }\n  ret.isTop = true;\n\n  ret._setup = function (options) {\n    if (!options.partial) {\n      container.helpers = container.merge(options.helpers, env.helpers);\n\n      if (templateSpec.usePartial) {\n        container.partials = container.merge(options.partials, env.partials);\n      }\n    } else {\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n    }\n  };\n\n  ret._child = function (i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new _Exception2['default']('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new _Exception2['default']('must pass parent depths');\n    }\n\n    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);\n  };\n  return ret;\n}\n\nfunction wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {\n  function prog(context) {\n    var options = arguments[1] === undefined ? {} : arguments[1];\n\n    return fn.call(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), depths && [context].concat(depths));\n  }\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\nfunction resolvePartial(partial, context, options) {\n  if (!partial) {\n    partial = options.partials[options.name];\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nfunction invokePartial(partial, context, options) {\n  options.partial = true;\n\n  if (partial === undefined) {\n    throw new _Exception2['default']('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nfunction noop() {\n  return '';\n}\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? _COMPILER_REVISION$REVISION_CHANGES$createFrame.createFrame(data) : {};\n    data.root = context;\n  }\n  return data;\n}","'use strict';\n\nexports.__esModule = true;\n// Build out our basic SafeString type\nfunction SafeString(string) {\n  this.string = string;\n}\n\nSafeString.prototype.toString = SafeString.prototype.toHTML = function () {\n  return '' + this.string;\n};\n\nexports['default'] = SafeString;\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports.extend = extend;\n\n// Older IE versions do not directly support indexOf so we must implement our own, sadly.\nexports.indexOf = indexOf;\nexports.escapeExpression = escapeExpression;\nexports.isEmpty = isEmpty;\nexports.blockParams = blockParams;\nexports.appendContextPath = appendContextPath;\nvar escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#x27;',\n  '`': '&#x60;'\n};\n\nvar badChars = /[&<>\"'`]/g,\n    possible = /[&<>\"'`]/;\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nfunction extend(obj /* , ...source */) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var key in arguments[i]) {\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {\n        obj[key] = arguments[i][key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nvar toString = Object.prototype.toString;\n\nexports.toString = toString;\n// Sourced from lodash\n// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\n/*eslint-disable func-style, no-var */\nvar isFunction = function isFunction(value) {\n  return typeof value === 'function';\n};\n// fallback for older versions of Chrome and Safari\n/* istanbul ignore next */\nif (isFunction(/x/)) {\n  exports.isFunction = isFunction = function (value) {\n    return typeof value === 'function' && toString.call(value) === '[object Function]';\n  };\n}\nvar isFunction;\nexports.isFunction = isFunction;\n/*eslint-enable func-style, no-var */\n\n/* istanbul ignore next */\nvar isArray = Array.isArray || function (value) {\n  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;\n};exports.isArray = isArray;\n\nfunction indexOf(array, value) {\n  for (var i = 0, len = array.length; i < len; i++) {\n    if (array[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction escapeExpression(string) {\n  if (typeof string !== 'string') {\n    // don't escape SafeStrings, since they're already safe\n    if (string && string.toHTML) {\n      return string.toHTML();\n    } else if (string == null) {\n      return '';\n    } else if (!string) {\n      return string + '';\n    }\n\n    // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n    string = '' + string;\n  }\n\n  if (!possible.test(string)) {\n    return string;\n  }\n  return string.replace(badChars, escapeChar);\n}\n\nfunction isEmpty(value) {\n  if (!value && value !== 0) {\n    return true;\n  } else if (isArray(value) && value.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction blockParams(params, ids) {\n  params.path = ids;\n  return params;\n}\n\nfunction appendContextPath(contextPath, id) {\n  return (contextPath ? contextPath + '.' : '') + id;\n}","// Create a simple path alias to allow browserify to resolve\n// the runtime on a supported path.\nmodule.exports = require('./dist/cjs/handlebars.runtime')['default'];\n","module.exports = require(\"handlebars/runtime\")[\"default\"];\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","(function (process,global){\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype;\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `value instanceof AwaitArgument` to determine if the yielded value is\n  // meant to be awaited. Some may consider the name of this method too\n  // cutesy, but they are curmudgeons.\n  runtime.awrap = function(arg) {\n    return new AwaitArgument(arg);\n  };\n\n  function AwaitArgument(arg) {\n    this.arg = arg;\n  }\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value instanceof AwaitArgument) {\n          return Promise.resolve(value.arg).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" ||\n              (method === \"throw\" && delegate.iterator[method] === undefined)) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(\n            delegate.iterator[method],\n            delegate.iterator,\n            arg\n          );\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = arg;\n\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBodHRwczovL3Jhdy5naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL21hc3Rlci9MSUNFTlNFIGZpbGUuIEFuXG4gKiBhZGRpdGlvbmFsIGdyYW50IG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW5cbiAqIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG4hKGZ1bmN0aW9uKGdsb2JhbCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgdmFyIGluTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIjtcbiAgdmFyIHJ1bnRpbWUgPSBnbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lO1xuICBpZiAocnVudGltZSkge1xuICAgIGlmIChpbk1vZHVsZSkge1xuICAgICAgLy8gSWYgcmVnZW5lcmF0b3JSdW50aW1lIGlzIGRlZmluZWQgZ2xvYmFsbHkgYW5kIHdlJ3JlIGluIGEgbW9kdWxlLFxuICAgICAgLy8gbWFrZSB0aGUgZXhwb3J0cyBvYmplY3QgaWRlbnRpY2FsIHRvIHJlZ2VuZXJhdG9yUnVudGltZS5cbiAgICAgIG1vZHVsZS5leHBvcnRzID0gcnVudGltZTtcbiAgICB9XG4gICAgLy8gRG9uJ3QgYm90aGVyIGV2YWx1YXRpbmcgdGhlIHJlc3Qgb2YgdGhpcyBmaWxlIGlmIHRoZSBydW50aW1lIHdhc1xuICAgIC8vIGFscmVhZHkgZGVmaW5lZCBnbG9iYWxseS5cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBEZWZpbmUgdGhlIHJ1bnRpbWUgZ2xvYmFsbHkgKGFzIGV4cGVjdGVkIGJ5IGdlbmVyYXRlZCBjb2RlKSBhcyBlaXRoZXJcbiAgLy8gbW9kdWxlLmV4cG9ydHMgKGlmIHdlJ3JlIGluIGEgbW9kdWxlKSBvciBhIG5ldywgZW1wdHkgb2JqZWN0LlxuICBydW50aW1lID0gZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZSA9IGluTW9kdWxlID8gbW9kdWxlLmV4cG9ydHMgOiB7fTtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBydW50aW1lLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBwcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBydW50aW1lLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBydW50aW1lLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGlmICghKHRvU3RyaW5nVGFnU3ltYm9sIGluIGdlbkZ1bikpIHtcbiAgICAgICAgZ2VuRnVuW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGB2YWx1ZSBpbnN0YW5jZW9mIEF3YWl0QXJndW1lbnRgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLiBTb21lIG1heSBjb25zaWRlciB0aGUgbmFtZSBvZiB0aGlzIG1ldGhvZCB0b29cbiAgLy8gY3V0ZXN5LCBidXQgdGhleSBhcmUgY3VybXVkZ2VvbnMuXG4gIHJ1bnRpbWUuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gbmV3IEF3YWl0QXJndW1lbnQoYXJnKTtcbiAgfTtcblxuICBmdW5jdGlvbiBBd2FpdEFyZ3VtZW50KGFyZykge1xuICAgIHRoaXMuYXJnID0gYXJnO1xuICB9XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBd2FpdEFyZ3VtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZS5hcmcpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBob3dldmVyLCB0aGVcbiAgICAgICAgICAvLyByZXN1bHQgZm9yIHRoaXMgaXRlcmF0aW9uIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgc2FtZVxuICAgICAgICAgIC8vIHJlYXNvbi4gTm90ZSB0aGF0IHJlamVjdGlvbnMgb2YgeWllbGRlZCBQcm9taXNlcyBhcmUgbm90XG4gICAgICAgICAgLy8gdGhyb3duIGJhY2sgaW50byB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBhcyBpcyB0aGUgY2FzZVxuICAgICAgICAgIC8vIHdoZW4gYW4gYXdhaXRlZCBQcm9taXNlIGlzIHJlamVjdGVkLiBUaGlzIGRpZmZlcmVuY2UgaW5cbiAgICAgICAgICAvLyBiZWhhdmlvciBiZXR3ZWVuIHlpZWxkIGFuZCBhd2FpdCBpcyBpbXBvcnRhbnQsIGJlY2F1c2UgaXRcbiAgICAgICAgICAvLyBhbGxvd3MgdGhlIGNvbnN1bWVyIHRvIGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggdGhlIHlpZWxkZWRcbiAgICAgICAgICAvLyByZWplY3Rpb24gKHN3YWxsb3cgaXQgYW5kIGNvbnRpbnVlLCBtYW51YWxseSAudGhyb3cgaXQgYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGdlbmVyYXRvciwgYWJhbmRvbiBpdGVyYXRpb24sIHdoYXRldmVyKS4gV2l0aFxuICAgICAgICAgIC8vIGF3YWl0LCBieSBjb250cmFzdCwgdGhlcmUgaXMgbm8gb3Bwb3J0dW5pdHkgdG8gZXhhbWluZSB0aGVcbiAgICAgICAgICAvLyByZWplY3Rpb24gcmVhc29uIG91dHNpZGUgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgc28gdGhlXG4gICAgICAgICAgLy8gb25seSBvcHRpb24gaXMgdG8gdGhyb3cgaXQgZnJvbSB0aGUgYXdhaXQgZXhwcmVzc2lvbiwgYW5kXG4gICAgICAgICAgLy8gbGV0IHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gaGFuZGxlIHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgcHJvY2Vzcy5kb21haW4pIHtcbiAgICAgIGludm9rZSA9IHByb2Nlc3MuZG9tYWluLmJpbmQoaW52b2tlKTtcbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIHJ1bnRpbWUuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KVxuICAgICk7XG5cbiAgICByZXR1cm4gcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJyZXR1cm5cIiB8fFxuICAgICAgICAgICAgICAobWV0aG9kID09PSBcInRocm93XCIgJiYgZGVsZWdhdGUuaXRlcmF0b3JbbWV0aG9kXSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgLy8gQSByZXR1cm4gb3IgdGhyb3cgKHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyB0aHJvd1xuICAgICAgICAgICAgLy8gbWV0aG9kKSBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgICAgdmFyIHJldHVybk1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdO1xuICAgICAgICAgICAgaWYgKHJldHVybk1ldGhvZCkge1xuICAgICAgICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gocmV0dXJuTWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgYXJnKTtcbiAgICAgICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmV0dXJuIG1ldGhvZCB0aHJldyBhbiBleGNlcHRpb24sIGxldCB0aGF0XG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIHByZXZhaWwgb3ZlciB0aGUgb3JpZ2luYWwgcmV0dXJuIG9yIHRocm93LlxuICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICAgICAgICBhcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICAgICAgLy8gQ29udGludWUgd2l0aCB0aGUgb3V0ZXIgcmV0dXJuLCBub3cgdGhhdCB0aGUgZGVsZWdhdGVcbiAgICAgICAgICAgICAgLy8gaXRlcmF0b3IgaGFzIGJlZW4gdGVybWluYXRlZC5cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKFxuICAgICAgICAgICAgZGVsZWdhdGUuaXRlcmF0b3JbbWV0aG9kXSxcbiAgICAgICAgICAgIGRlbGVnYXRlLml0ZXJhdG9yLFxuICAgICAgICAgICAgYXJnXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gTGlrZSByZXR1cm5pbmcgZ2VuZXJhdG9yLnRocm93KHVuY2F1Z2h0KSwgYnV0IHdpdGhvdXQgdGhlXG4gICAgICAgICAgICAvLyBvdmVyaGVhZCBvZiBhbiBleHRyYSBmdW5jdGlvbiBjYWxsLlxuICAgICAgICAgICAgbWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgICAgYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIERlbGVnYXRlIGdlbmVyYXRvciByYW4gYW5kIGhhbmRsZWQgaXRzIG93biBleGNlcHRpb25zIHNvXG4gICAgICAgICAgLy8gcmVnYXJkbGVzcyBvZiB3aGF0IHRoZSBtZXRob2Qgd2FzLCB3ZSBjb250aW51ZSBhcyBpZiBpdCBpc1xuICAgICAgICAgIC8vIFwibmV4dFwiIHdpdGggYW4gdW5kZWZpbmVkIGFyZy5cbiAgICAgICAgICBtZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBhcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG4gICAgICAgICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oYXJnKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgICBtZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICAgIGFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChtZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBhcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIHZhciBpbmZvID0ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0LmRlbGVnYXRlICYmIG1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICAgICAgICBhcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBtZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3BbdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JcIjtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgcnVudGltZS5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIHJ1bnRpbWUudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG4gICAgICAgIHJldHVybiAhIWNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG59KShcbiAgLy8gQW1vbmcgdGhlIHZhcmlvdXMgdHJpY2tzIGZvciBvYnRhaW5pbmcgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbFxuICAvLyBvYmplY3QsIHRoaXMgc2VlbXMgdG8gYmUgdGhlIG1vc3QgcmVsaWFibGUgdGVjaG5pcXVlIHRoYXQgZG9lcyBub3RcbiAgLy8gdXNlIGluZGlyZWN0IGV2YWwgKHdoaWNoIHZpb2xhdGVzIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5KS5cbiAgdHlwZW9mIGdsb2JhbCA9PT0gXCJvYmplY3RcIiA/IGdsb2JhbCA6XG4gIHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgPyB3aW5kb3cgOlxuICB0eXBlb2Ygc2VsZiA9PT0gXCJvYmplY3RcIiA/IHNlbGYgOiB0aGlzXG4pO1xuIl19","console.warn(\n  \"The regenerator/runtime module is deprecated; \" +\n    \"please import regenerator-runtime/runtime instead.\"\n);\n\nmodule.exports = require(\"regenerator-runtime/runtime\");\n","/*global window */\n(function () {\n\t'use strict';\n\tvar srcset = {};\n\tvar reInt = /^\\d+$/;\n\n\tfunction deepUnique(arr) {\n\t\treturn arr.sort().filter(function (el, i) {\n\t\t\treturn JSON.stringify(el) !== JSON.stringify(arr[i - 1]);\n\t\t});\n\t}\n\n\tfunction unique(arr) {\n\t\treturn arr.filter(function (el, i) {\n\t\t\treturn arr.indexOf(el) === i;\n\t\t});\n\t}\n\n\tsrcset.parse = function (str) {\n\t\treturn deepUnique(str.split(',').map(function (el) {\n\t\t\tvar ret = {};\n\n\t\t\tel.trim().split(/\\s+/).forEach(function (el, i) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\treturn ret.url = el;\n\t\t\t\t}\n\n\t\t\t\tvar value = el.substring(0, el.length - 1);\n\t\t\t\tvar postfix = el[el.length - 1];\n\t\t\t\tvar intVal = parseInt(value, 10);\n\t\t\t\tvar floatVal = parseFloat(value);\n\n\t\t\t\tif (postfix === 'w' && reInt.test(value)) {\n\t\t\t\t\tret.width = intVal;\n\t\t\t\t} else if (postfix === 'h' && reInt.test(value)) {\n\t\t\t\t\tret.height = intVal;\n\t\t\t\t} else if (postfix === 'x' && !isNaN(floatVal)) {\n\t\t\t\t\tret.density = floatVal;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Invalid srcset descriptor: ' + el + '.');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn ret;\n\t\t}));\n\t}\n\n\tsrcset.stringify = function (arr) {\n\t\treturn unique(arr.map(function (el) {\n\t\t\tif (!el.url) {\n\t\t\t\tthrow new Error('URL is required.');\n\t\t\t}\n\n\t\t\tvar ret = [el.url];\n\n\t\t\tif (el.width) {\n\t\t\t\tret.push(el.width + 'w');\n\t\t\t}\n\n\t\t\tif (el.height) {\n\t\t\t\tret.push(el.height + 'h');\n\t\t\t}\n\n\t\t\tif (el.density) {\n\t\t\t\tret.push(el.density + 'x');\n\t\t\t}\n\n\t\t\treturn ret.join(' ');\n\t\t})).join(', ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = srcset;\n\t} else {\n\t\twindow.srcset = srcset;\n\t}\n})();\n","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar debounce = require('debounce');\nvar wikipedia = require('../shared/wikipedia');\nvar storage = require('../shared/storage');\nvar wikiDisplayDate = require('../../../isojs/wiki-display-date');\nvar flags = require('./flags').parse();\n\nvar cacheCapable = 'caches' in window && navigator.serviceWorker.controller;\nvar backgroundSyncCapable = 'serviceWorker' in navigator && navigator.serviceWorker.controller && 'sync' in ServiceWorkerRegistration.prototype && 'getTags' in SyncManager.prototype && self.Set && Array.from;\n\nvar WIKI_RE = /^\\/wiki\\/(.+)/;\n\nvar ArticleController = (function () {\n  function ArticleController() {\n    var _this = this;\n\n    _classCallCheck(this, ArticleController);\n\n    // ui\n    this._articleView = new (require('./views/article'))();\n    this._toastsView = require('./views/toasts');\n\n    // view events\n    this._articleView.on('cacheChange', function (e) {\n      return _this._onCacheChange(e);\n    });\n    this._articleView.on('backgroundLoadRequest', function (_) {\n      return _this._onBackgroundLoadRequest();\n    });\n\n    // state\n    this._article = null;\n    this._urlArticleName = WIKI_RE.exec(location.pathname)[1];\n\n    // setup\n    if (this._articleView.serverRendered) {\n      this._articleView.updateCachingAbility(cacheCapable);\n    } else {\n      this._loadArticle(this._urlArticleName);\n    }\n\n    if (flags.get('auto-cache-article') && cacheCapable) {\n      // bit hacky, shouldn't be calling an event handler like this\n      this._onCacheChange({ value: true });\n    }\n\n    if (flags.get('push-state-updates')) {\n      document.addEventListener('click', function (event) {\n        var link = event.target.closest('a');\n        if (!link) return;\n\n        var url = new URL(link.href);\n        if (url.origin == location.origin && url.pathname.includes('/wiki/')) {\n          event.preventDefault();\n          _this._pushStateUpdate(url.pathname);\n        }\n      });\n    }\n\n    if (flags.get('sw-stream-url')) {\n      document.addEventListener('click', function (event) {\n        var link = event.target.closest('a');\n        if (!link) return;\n\n        var url = new URL(link.href);\n        if (url.origin == location.origin && url.pathname.includes('/wiki/')) {\n          event.preventDefault();\n          url.searchParams.set('sw-stream', '');\n          location.href = url;\n        }\n      });\n    }\n  }\n\n  _createClass(ArticleController, [{\n    key: '_pushStateUpdate',\n    value: function _pushStateUpdate(pathname) {\n      this._articleView.updateContent('');\n      this._articleView.updateMeta();\n      this._urlArticleName = WIKI_RE.exec(pathname)[1];\n      history.pushState({}, '', pathname);\n      this._loadArticle(this._urlArticleName);\n    }\n  }, {\n    key: '_onBackgroundLoadRequest',\n    value: function _onBackgroundLoadRequest() {\n      var articleQueue, reg;\n      return regeneratorRuntime.async(function _onBackgroundLoadRequest$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.next = 2;\n            return regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n              Notification.requestPermission(function (permission) {\n                if (permission == 'granted') {\n                  resolve();\n                } else {\n                  reject(Error(\"Notification permission denied\"));\n                }\n              });\n            }));\n\n          case 2:\n            context$2$0.t0 = Set;\n            context$2$0.next = 5;\n            return regeneratorRuntime.awrap(storage.get('to-bg-cache'));\n\n          case 5:\n            context$2$0.t1 = context$2$0.sent;\n\n            if (context$2$0.t1) {\n              context$2$0.next = 8;\n              break;\n            }\n\n            context$2$0.t1 = [];\n\n          case 8:\n            context$2$0.t2 = context$2$0.t1;\n            articleQueue = new context$2$0.t0(context$2$0.t2);\n\n            articleQueue.add(this._urlArticleName);\n\n            context$2$0.next = 13;\n            return regeneratorRuntime.awrap(Promise.all([storage.set('to-bg-cache', Array.from(articleQueue)), storage.set('devicePixelRatio', self.devicePixelRatio)]));\n\n          case 13:\n            context$2$0.next = 15;\n            return regeneratorRuntime.awrap(navigator.serviceWorker.ready);\n\n          case 15:\n            reg = context$2$0.sent;\n            context$2$0.next = 18;\n            return regeneratorRuntime.awrap(reg.sync.register('bg-cache'));\n\n          case 18:\n\n            this._articleView.confirmBackgroundLoad();\n\n          case 19:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: '_onCacheChange',\n    value: function _onCacheChange(_ref) {\n      var value = _ref.value;\n      return regeneratorRuntime.async(function _onCacheChange$(context$2$0) {\n        var _this2 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            if (this._article) {\n              context$2$0.next = 4;\n              break;\n            }\n\n            context$2$0.next = 3;\n            return regeneratorRuntime.awrap(wikipedia.article(this._urlArticleName));\n\n          case 3:\n            this._article = context$2$0.sent;\n\n          case 4:\n            if (!value) {\n              context$2$0.next = 6;\n              break;\n            }\n\n            return context$2$0.abrupt('return', this._article.cache()['catch'](function (err) {\n              return _this2._showError(Error(\"Caching failed\"));\n            }));\n\n          case 6:\n            this._article.uncache();\n\n          case 7:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: '_showError',\n    value: function _showError(err) {\n      this._toastsView.show(err.message, {\n        duration: 3000\n      });\n    }\n  }, {\n    key: '_displayArticle',\n    value: function _displayArticle(article) {\n      var url, data;\n      return regeneratorRuntime.async(function _displayArticle$(context$2$0) {\n        var _this3 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            url = new URL(location);\n\n            this._article = article;\n\n            if (flags.get('prevent-streaming')) {\n              article.getHtml().then(function (html) {\n                return _this3._articleView.updateContent(html);\n              });\n            } else {\n              this._articleView.streamContent(article);\n            }\n            context$2$0.next = 5;\n            return regeneratorRuntime.awrap(article.meta.then(function (data) {\n              return processData(article, data);\n            }));\n\n          case 5:\n            data = context$2$0.sent;\n\n            document.title = data.title + ' - Offline Wikipedia';\n            url.pathname = url.pathname.replace(/\\/wiki\\/.+$/, '/wiki/' + data.urlId);\n            history.replaceState({}, document.title, url);\n            context$2$0.t0 = this._articleView;\n            context$2$0.next = 12;\n            return regeneratorRuntime.awrap(data);\n\n          case 12:\n            context$2$0.t1 = context$2$0.sent;\n            context$2$0.t0.updateMeta.call(context$2$0.t0, context$2$0.t1);\n\n          case 14:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: '_offerBackgroundLoad',\n    value: function _offerBackgroundLoad() {\n      var _ref2 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var _ref2$loadFailed = _ref2.loadFailed;\n      var loadFailed = _ref2$loadFailed === undefined ? false : _ref2$loadFailed;\n\n      if (!this._articleView.startedContentRender) {\n        this._articleView.offerBackgroundLoad({ loadFailed: loadFailed });\n      }\n    }\n  }, {\n    key: '_loadArticle',\n    value: function _loadArticle(name) {\n      var articleCachedPromise, articleLivePromise, offerBackgroundLoadTimeout, showedCachedContent, cachedArticle, liveArticle;\n      return regeneratorRuntime.async(function _loadArticle$(context$2$0) {\n        var _this4 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            this._articleView.startLoading();\n            articleCachedPromise = wikipedia.article(name, { fromCache: true });\n            articleLivePromise = wikipedia.article(name);\n            offerBackgroundLoadTimeout = setTimeout(function (_) {\n              if (backgroundSyncCapable) {\n                _this4._offerBackgroundLoad();\n              }\n            }, 3000);\n            showedCachedContent = false;\n            context$2$0.prev = 5;\n            context$2$0.next = 8;\n            return regeneratorRuntime.awrap(articleCachedPromise);\n\n          case 8:\n            cachedArticle = context$2$0.sent;\n            context$2$0.next = 11;\n            return regeneratorRuntime.awrap(this._displayArticle(cachedArticle));\n\n          case 11:\n            showedCachedContent = true;\n            console.log('displayed from cache');\n            clearTimeout(offerBackgroundLoadTimeout);\n            context$2$0.next = 18;\n            break;\n\n          case 16:\n            context$2$0.prev = 16;\n            context$2$0.t0 = context$2$0['catch'](5);\n\n          case 18:\n            context$2$0.prev = 18;\n            context$2$0.next = 21;\n            return regeneratorRuntime.awrap(articleLivePromise);\n\n          case 21:\n            liveArticle = context$2$0.sent;\n\n            if (!showedCachedContent) {\n              context$2$0.next = 35;\n              break;\n            }\n\n            context$2$0.next = 25;\n            return regeneratorRuntime.awrap(cachedArticle.meta);\n\n          case 25:\n            context$2$0.t1 = context$2$0.sent.updated.valueOf();\n            context$2$0.next = 28;\n            return regeneratorRuntime.awrap(liveArticle.meta);\n\n          case 28:\n            context$2$0.t2 = context$2$0.sent.updated.valueOf();\n\n            if (!(context$2$0.t1 == context$2$0.t2)) {\n              context$2$0.next = 32;\n              break;\n            }\n\n            console.log('cached version is up to date');\n            return context$2$0.abrupt('return');\n\n          case 32:\n            console.log('found update, caching');\n            context$2$0.next = 35;\n            return regeneratorRuntime.awrap(liveArticle.cache());\n\n          case 35:\n            context$2$0.t3 = regeneratorRuntime;\n            context$2$0.t4 = this;\n            context$2$0.next = 39;\n            return regeneratorRuntime.awrap(articleLivePromise);\n\n          case 39:\n            context$2$0.t5 = context$2$0.sent;\n            context$2$0.t6 = context$2$0.t4._displayArticle.call(context$2$0.t4, context$2$0.t5);\n            context$2$0.next = 43;\n            return context$2$0.t3.awrap.call(context$2$0.t3, context$2$0.t6);\n\n          case 43:\n            clearTimeout(offerBackgroundLoadTimeout);\n            console.log('displayed from live');\n            context$2$0.next = 50;\n            break;\n\n          case 47:\n            context$2$0.prev = 47;\n            context$2$0.t7 = context$2$0['catch'](18);\n\n            if (!showedCachedContent) {\n              this._showError(Error(\"Failed to load article\"));\n              this._articleView.stopLoading();\n              clearTimeout(offerBackgroundLoadTimeout);\n              if (backgroundSyncCapable) {\n                this._offerBackgroundLoad({ loadFailed: true });\n              }\n            }\n\n          case 50:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this, [[5, 16], [18, 47]]);\n    }\n  }]);\n\n  return ArticleController;\n})();\n\nfunction processData(article, articleData) {\n  var data;\n  return regeneratorRuntime.async(function processData$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        data = Object.create(articleData);\n\n        if (!cacheCapable) {\n          context$1$0.next = 6;\n          break;\n        }\n\n        data.cacheCapable = true;\n        context$1$0.next = 5;\n        return regeneratorRuntime.awrap(article.isCached());\n\n      case 5:\n        data.cached = context$1$0.sent;\n\n      case 6:\n\n        data.updated = wikiDisplayDate(data.updated);\n        return context$1$0.abrupt('return', data);\n\n      case 8:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nmodule.exports = ArticleController;\n\n// TODO: handle denied permission requests\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9hcnRpY2xlLWNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQy9DLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQzNDLElBQUksZUFBZSxHQUFHLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO0FBQ2xFLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQzs7QUFFdkMsSUFBSSxZQUFZLEdBQUksUUFBUSxJQUFJLE1BQU0sSUFBSSxTQUFTLENBQUMsYUFBYSxDQUFDLFVBQVUsQUFBQyxDQUFDO0FBQzlFLElBQUkscUJBQXFCLEdBQ3ZCLGVBQWUsSUFBSSxTQUFTLElBQzVCLFNBQVMsQ0FBQyxhQUFhLENBQUMsVUFBVSxJQUNsQyxNQUFNLElBQUkseUJBQXlCLENBQUMsU0FBUyxJQUM3QyxTQUFTLElBQUksV0FBVyxDQUFDLFNBQVMsSUFDbEMsSUFBSSxDQUFDLEdBQUcsSUFDUixLQUFLLENBQUMsSUFBSSxBQUNYLENBQUM7O0FBRUYsSUFBTSxPQUFPLEdBQUcsZUFBZSxDQUFDOztJQUUxQixpQkFBaUI7QUFDVixXQURQLGlCQUFpQixHQUNQOzs7MEJBRFYsaUJBQWlCOzs7QUFHbkIsUUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLE9BQU8sQ0FBQyxpQkFBaUIsRUFBQyxFQUFDLENBQUM7QUFDckQsUUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7O0FBRzdDLFFBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLGFBQWEs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Q0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDOzt3Q0FDTCxPQUFPLENBQUMsUUFBUSxFQUFFOzs7QUFBdEMsWUFBSSxDQUFDLE1BQU07Ozs7QUFHYixZQUFJLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7NENBQ3RDLElBQUk7Ozs7Ozs7Q0FDWjs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGlCQUFpQixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9hcnRpY2xlLWNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVib3VuY2UgPSByZXF1aXJlKCdkZWJvdW5jZScpO1xudmFyIHdpa2lwZWRpYSA9IHJlcXVpcmUoJy4uL3NoYXJlZC93aWtpcGVkaWEnKTtcbnZhciBzdG9yYWdlID0gcmVxdWlyZSgnLi4vc2hhcmVkL3N0b3JhZ2UnKTtcbnZhciB3aWtpRGlzcGxheURhdGUgPSByZXF1aXJlKCcuLi8uLi8uLi9pc29qcy93aWtpLWRpc3BsYXktZGF0ZScpO1xudmFyIGZsYWdzID0gcmVxdWlyZSgnLi9mbGFncycpLnBhcnNlKCk7XG5cbnZhciBjYWNoZUNhcGFibGUgPSAoJ2NhY2hlcycgaW4gd2luZG93ICYmIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpO1xudmFyIGJhY2tncm91bmRTeW5jQ2FwYWJsZSA9IChcbiAgJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxuICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyICYmXG4gICdzeW5jJyBpbiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnByb3RvdHlwZSAmJlxuICAnZ2V0VGFncycgaW4gU3luY01hbmFnZXIucHJvdG90eXBlICYmXG4gIHNlbGYuU2V0ICYmXG4gIEFycmF5LmZyb21cbik7XG5cbmNvbnN0IFdJS0lfUkUgPSAvXlxcL3dpa2lcXC8oLispLztcblxuY2xhc3MgQXJ0aWNsZUNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyB1aVxuICAgIHRoaXMuX2FydGljbGVWaWV3ID0gbmV3IChyZXF1aXJlKCcuL3ZpZXdzL2FydGljbGUnKSk7XG4gICAgdGhpcy5fdG9hc3RzVmlldyA9IHJlcXVpcmUoJy4vdmlld3MvdG9hc3RzJyk7XG5cbiAgICAvLyB2aWV3IGV2ZW50c1xuICAgIHRoaXMuX2FydGljbGVWaWV3Lm9uKCdjYWNoZUNoYW5nZScsIGUgPT4gdGhpcy5fb25DYWNoZUNoYW5nZShlKSk7XG4gICAgdGhpcy5fYXJ0aWNsZVZpZXcub24oJ2JhY2tncm91bmRMb2FkUmVxdWVzdCcsIF8gPT4gdGhpcy5fb25CYWNrZ3JvdW5kTG9hZFJlcXVlc3QoKSk7XG5cbiAgICAvLyBzdGF0ZVxuICAgIHRoaXMuX2FydGljbGUgPSBudWxsO1xuICAgIHRoaXMuX3VybEFydGljbGVOYW1lID0gV0lLSV9SRS5leGVjKGxvY2F0aW9uLnBhdGhuYW1lKVsxXTtcblxuICAgIC8vIHNldHVwXG4gICAgaWYgKHRoaXMuX2FydGljbGVWaWV3LnNlcnZlclJlbmRlcmVkKSB7XG4gICAgICB0aGlzLl9hcnRpY2xlVmlldy51cGRhdGVDYWNoaW5nQWJpbGl0eShjYWNoZUNhcGFibGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX2xvYWRBcnRpY2xlKHRoaXMuX3VybEFydGljbGVOYW1lKTtcbiAgICB9XG5cbiAgICBpZiAoZmxhZ3MuZ2V0KCdhdXRvLWNhY2hlLWFydGljbGUnKSAmJiBjYWNoZUNhcGFibGUpIHtcbiAgICAgIC8vIGJpdCBoYWNreSwgc2hvdWxkbid0IGJlIGNhbGxpbmcgYW4gZXZlbnQgaGFuZGxlciBsaWtlIHRoaXNcbiAgICAgIHRoaXMuX29uQ2FjaGVDaGFuZ2Uoe3ZhbHVlOiB0cnVlfSk7XG4gICAgfVxuXG4gICAgaWYgKGZsYWdzLmdldCgncHVzaC1zdGF0ZS11cGRhdGVzJykpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBsaW5rID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2EnKTtcbiAgICAgICAgaWYgKCFsaW5rKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChsaW5rLmhyZWYpO1xuICAgICAgICBpZiAodXJsLm9yaWdpbiA9PSBsb2NhdGlvbi5vcmlnaW4gJiYgdXJsLnBhdGhuYW1lLmluY2x1ZGVzKCcvd2lraS8nKSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5fcHVzaFN0YXRlVXBkYXRlKHVybC5wYXRobmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGZsYWdzLmdldCgnc3ctc3RyZWFtLXVybCcpKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgbGluayA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdhJyk7XG4gICAgICAgIGlmICghbGluaykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwobGluay5ocmVmKTtcbiAgICAgICAgaWYgKHVybC5vcmlnaW4gPT0gbG9jYXRpb24ub3JpZ2luICYmIHVybC5wYXRobmFtZS5pbmNsdWRlcygnL3dpa2kvJykpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdy1zdHJlYW0nLCAnJyk7XG4gICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBfcHVzaFN0YXRlVXBkYXRlKHBhdGhuYW1lKSB7XG4gICAgdGhpcy5fYXJ0aWNsZVZpZXcudXBkYXRlQ29udGVudCgnJyk7XG4gICAgdGhpcy5fYXJ0aWNsZVZpZXcudXBkYXRlTWV0YSgpO1xuICAgIHRoaXMuX3VybEFydGljbGVOYW1lID0gV0lLSV9SRS5leGVjKHBhdGhuYW1lKVsxXTtcbiAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIHBhdGhuYW1lKTtcbiAgICB0aGlzLl9sb2FkQXJ0aWNsZSh0aGlzLl91cmxBcnRpY2xlTmFtZSk7XG4gIH1cblxuICBhc3luYyBfb25CYWNrZ3JvdW5kTG9hZFJlcXVlc3QoKSB7XG4gICAgLy8gVE9ETzogaGFuZGxlIGRlbmllZCBwZXJtaXNzaW9uIHJlcXVlc3RzXG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24ocGVybWlzc2lvbiA9PiB7XG4gICAgICAgIGlmIChwZXJtaXNzaW9uID09ICdncmFudGVkJykge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZWplY3QoRXJyb3IoXCJOb3RpZmljYXRpb24gcGVybWlzc2lvbiBkZW5pZWRcIikpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBhcnRpY2xlUXVldWUgPSBuZXcgU2V0KChhd2FpdCBzdG9yYWdlLmdldCgndG8tYmctY2FjaGUnKSkgfHwgW10pO1xuICAgIGFydGljbGVRdWV1ZS5hZGQodGhpcy5fdXJsQXJ0aWNsZU5hbWUpO1xuICAgIFxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHN0b3JhZ2Uuc2V0KCd0by1iZy1jYWNoZScsIEFycmF5LmZyb20oYXJ0aWNsZVF1ZXVlKSksXG4gICAgICBzdG9yYWdlLnNldCgnZGV2aWNlUGl4ZWxSYXRpbycsIHNlbGYuZGV2aWNlUGl4ZWxSYXRpbylcbiAgICBdKTtcblxuICAgIHZhciByZWcgPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcblxuICAgIGF3YWl0IHJlZy5zeW5jLnJlZ2lzdGVyKCdiZy1jYWNoZScpO1xuXG4gICAgdGhpcy5fYXJ0aWNsZVZpZXcuY29uZmlybUJhY2tncm91bmRMb2FkKCk7XG4gIH1cblxuICBhc3luYyBfb25DYWNoZUNoYW5nZSh7dmFsdWV9KSB7XG4gICAgaWYgKCF0aGlzLl9hcnRpY2xlKSB7XG4gICAgICB0aGlzLl9hcnRpY2xlID0gYXdhaXQgd2lraXBlZGlhLmFydGljbGUodGhpcy5fdXJsQXJ0aWNsZU5hbWUpO1xuICAgIH1cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLl9hcnRpY2xlLmNhY2hlKCkuY2F0Y2goZXJyID0+IHRoaXMuX3Nob3dFcnJvcihFcnJvcihcIkNhY2hpbmcgZmFpbGVkXCIpKSk7XG4gICAgfVxuICAgIHRoaXMuX2FydGljbGUudW5jYWNoZSgpO1xuICB9XG5cbiAgX3Nob3dFcnJvcihlcnIpIHtcbiAgICB0aGlzLl90b2FzdHNWaWV3LnNob3coZXJyLm1lc3NhZ2UsIHtcbiAgICAgIGR1cmF0aW9uOiAzMDAwXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBfZGlzcGxheUFydGljbGUoYXJ0aWNsZSkge1xuICAgIHZhciB1cmwgPSBuZXcgVVJMKGxvY2F0aW9uKTtcbiAgICB0aGlzLl9hcnRpY2xlID0gYXJ0aWNsZTtcblxuICAgIGlmIChmbGFncy5nZXQoJ3ByZXZlbnQtc3RyZWFtaW5nJykpIHtcbiAgICAgIGFydGljbGUuZ2V0SHRtbCgpLnRoZW4oaHRtbCA9PiB0aGlzLl9hcnRpY2xlVmlldy51cGRhdGVDb250ZW50KGh0bWwpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9hcnRpY2xlVmlldy5zdHJlYW1Db250ZW50KGFydGljbGUpO1xuICAgIH1cbiAgICB2YXIgZGF0YSA9IGF3YWl0IGFydGljbGUubWV0YS50aGVuKGRhdGEgPT4gcHJvY2Vzc0RhdGEoYXJ0aWNsZSwgZGF0YSkpO1xuICAgIGRvY3VtZW50LnRpdGxlID0gZGF0YS50aXRsZSArICcgLSBPZmZsaW5lIFdpa2lwZWRpYSc7XG4gICAgdXJsLnBhdGhuYW1lID0gdXJsLnBhdGhuYW1lLnJlcGxhY2UoL1xcL3dpa2lcXC8uKyQvLCAnL3dpa2kvJyArIGRhdGEudXJsSWQpO1xuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgdXJsKTtcbiAgICB0aGlzLl9hcnRpY2xlVmlldy51cGRhdGVNZXRhKGF3YWl0IGRhdGEpO1xuICB9XG5cbiAgX29mZmVyQmFja2dyb3VuZExvYWQoe1xuICAgIGxvYWRGYWlsZWQgPSBmYWxzZVxuICB9PXt9KSB7XG4gICAgaWYgKCF0aGlzLl9hcnRpY2xlVmlldy5zdGFydGVkQ29udGVudFJlbmRlcikge1xuICAgICAgdGhpcy5fYXJ0aWNsZVZpZXcub2ZmZXJCYWNrZ3JvdW5kTG9hZCh7bG9hZEZhaWxlZH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9sb2FkQXJ0aWNsZShuYW1lKSB7XG4gICAgdGhpcy5fYXJ0aWNsZVZpZXcuc3RhcnRMb2FkaW5nKCk7XG4gICAgdmFyIGFydGljbGVDYWNoZWRQcm9taXNlID0gd2lraXBlZGlhLmFydGljbGUobmFtZSwge2Zyb21DYWNoZTogdHJ1ZX0pO1xuICAgIHZhciBhcnRpY2xlTGl2ZVByb21pc2UgICA9IHdpa2lwZWRpYS5hcnRpY2xlKG5hbWUpO1xuXG4gICAgdmFyIG9mZmVyQmFja2dyb3VuZExvYWRUaW1lb3V0ID0gc2V0VGltZW91dChfID0+IHtcbiAgICAgIGlmIChiYWNrZ3JvdW5kU3luY0NhcGFibGUpIHtcbiAgICAgICAgdGhpcy5fb2ZmZXJCYWNrZ3JvdW5kTG9hZCgpO1xuICAgICAgfVxuICAgIH0sIDMwMDApO1xuXG4gICAgdmFyIHNob3dlZENhY2hlZENvbnRlbnQgPSBmYWxzZTtcbiAgICB2YXIgY2FjaGVkQXJ0aWNsZSwgbGl2ZUFydGljbGU7XG5cbiAgICB0cnkge1xuICAgICAgY2FjaGVkQXJ0aWNsZSA9IGF3YWl0IGFydGljbGVDYWNoZWRQcm9taXNlO1xuICAgICAgYXdhaXQgdGhpcy5fZGlzcGxheUFydGljbGUoY2FjaGVkQXJ0aWNsZSk7XG4gICAgICBzaG93ZWRDYWNoZWRDb250ZW50ID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUubG9nKCdkaXNwbGF5ZWQgZnJvbSBjYWNoZScpO1xuICAgICAgY2xlYXJUaW1lb3V0KG9mZmVyQmFja2dyb3VuZExvYWRUaW1lb3V0KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge31cblxuICAgIHRyeSB7XG4gICAgICBsaXZlQXJ0aWNsZSA9IGF3YWl0IGFydGljbGVMaXZlUHJvbWlzZTtcblxuICAgICAgaWYgKHNob3dlZENhY2hlZENvbnRlbnQpIHtcbiAgICAgICAgaWYgKChhd2FpdCBjYWNoZWRBcnRpY2xlLm1ldGEpLnVwZGF0ZWQudmFsdWVPZigpID09IChhd2FpdCBsaXZlQXJ0aWNsZS5tZXRhKS51cGRhdGVkLnZhbHVlT2YoKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjYWNoZWQgdmVyc2lvbiBpcyB1cCB0byBkYXRlJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdmb3VuZCB1cGRhdGUsIGNhY2hpbmcnKTtcbiAgICAgICAgYXdhaXQgbGl2ZUFydGljbGUuY2FjaGUoKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuX2Rpc3BsYXlBcnRpY2xlKGF3YWl0IGFydGljbGVMaXZlUHJvbWlzZSk7XG4gICAgICBjbGVhclRpbWVvdXQob2ZmZXJCYWNrZ3JvdW5kTG9hZFRpbWVvdXQpO1xuICAgICAgY29uc29sZS5sb2coJ2Rpc3BsYXllZCBmcm9tIGxpdmUnKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgaWYgKCFzaG93ZWRDYWNoZWRDb250ZW50KSB7XG4gICAgICAgIHRoaXMuX3Nob3dFcnJvcihFcnJvcihcIkZhaWxlZCB0byBsb2FkIGFydGljbGVcIikpO1xuICAgICAgICB0aGlzLl9hcnRpY2xlVmlldy5zdG9wTG9hZGluZygpO1xuICAgICAgICBjbGVhclRpbWVvdXQob2ZmZXJCYWNrZ3JvdW5kTG9hZFRpbWVvdXQpO1xuICAgICAgICBpZiAoYmFja2dyb3VuZFN5bmNDYXBhYmxlKSB7XG4gICAgICAgICAgdGhpcy5fb2ZmZXJCYWNrZ3JvdW5kTG9hZCh7bG9hZEZhaWxlZDogdHJ1ZX0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGFydGljbGUsIGFydGljbGVEYXRhKSB7XG4gIHZhciBkYXRhID0gT2JqZWN0LmNyZWF0ZShhcnRpY2xlRGF0YSk7XG5cbiAgaWYgKGNhY2hlQ2FwYWJsZSkge1xuICAgIGRhdGEuY2FjaGVDYXBhYmxlID0gdHJ1ZTtcbiAgICBkYXRhLmNhY2hlZCA9IGF3YWl0IGFydGljbGUuaXNDYWNoZWQoKTtcbiAgfVxuXG4gIGRhdGEudXBkYXRlZCA9IHdpa2lEaXNwbGF5RGF0ZShkYXRhLnVwZGF0ZWQpO1xuICByZXR1cm4gZGF0YTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcnRpY2xlQ29udHJvbGxlcjsiXX0=","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar Flags = require('./flags');\nvar utils = require('./utils');\n\nvar FlagsController = (function () {\n  function FlagsController() {\n    var _this = this;\n\n    _classCallCheck(this, FlagsController);\n\n    // ui\n    this._toastsView = require('./views/toasts');\n    this._flagsForm = document.querySelector('.flags-form');\n    this._flagsQuery = document.querySelector('.flags-query');\n    this._flagsScript = document.querySelector('.flags-webpagetest-script');\n\n    // view events\n    this._flagsForm.addEventListener('submit', function (e) {\n      return _this._onFlagsSubmit(e);\n    });\n    this._flagsForm.addEventListener('change', function (e) {\n      return _this._updateFlagsOutput();\n    });\n\n    this._updateFlagsOutput();\n  }\n\n  _createClass(FlagsController, [{\n    key: '_getFlags',\n    value: function _getFlags() {\n      var checkboxes = utils.toArray(this._flagsForm.querySelectorAll('input[type=checkbox]'));\n      var flags = new Flags();\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = checkboxes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var checkbox = _step.value;\n\n          flags.set(checkbox.name, checkbox.checked ? 1 : 0);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return flags;\n    }\n  }, {\n    key: '_updateFlagsOutput',\n    value: function _updateFlagsOutput(event) {\n      var flags = this._getFlags();\n      this._flagsQuery.textContent = flags.getQuerystring();\n      this._flagsScript.textContent = flags.getWebPageTestScript();\n    }\n  }, {\n    key: '_onFlagsSubmit',\n    value: function _onFlagsSubmit(event) {\n      event.preventDefault();\n      this._getFlags().setCookie();\n      this._toastsView.show(\"Flags updated\", { duration: 2000 });\n    }\n  }]);\n\n  return FlagsController;\n})();\n\nmodule.exports = FlagsController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9mbGFncy1jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMvQixJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7O0lBRXpCLGVBQWU7QUFDUixXQURQLGVBQWUsR0FDTDs7OzBCQURWLGVBQWU7OztBQUdqQixRQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzdDLFFBQUksQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN4RCxRQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDMUQsUUFBSSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLDJCQUEyQixDQUFDLENBQUM7OztBQUd4RSxRQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxVQUFBLENBQUM7YUFBSSxNQUFLLGNBQWMsQ0FBQyxDQUFDLENBQUM7S0FBQSxDQUFDLENBQUM7QUFDeEUsUUFBSSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsVUFBQSxDQUFDO2FBQUksTUFBSyxrQkFBa0IsRUFBRTtLQUFBLENBQUMsQ0FBQzs7QUFFM0UsUUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7R0FDM0I7O2VBYkcsZUFBZTs7V0FlVixxQkFBRztBQUNWLFVBQUksVUFBVSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7QUFDekYsVUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQzs7Ozs7O0FBQ3hCLDZCQUFxQixVQUFVLDhIQUFFO2NBQXhCLFFBQVE7O0FBQ2YsZUFBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3BEOzs7Ozs7Ozs7Ozs7Ozs7O0FBQ0QsYUFBTyxLQUFLLENBQUM7S0FDZDs7O1dBRWlCLDRCQUFDLEtBQUssRUFBRTtBQUN4QixVQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDN0IsVUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3RELFVBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0tBQzlEOzs7V0FFYSx3QkFBQyxLQUFLLEVBQUU7QUFDcEIsV0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3ZCLFVBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUM3QixVQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsRUFBQyxRQUFRLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztLQUMxRDs7O1NBbENHLGVBQWU7OztBQXFDckIsTUFBTSxDQUFDLE9BQU8sR0FBRyxlQUFlLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL2ZsYWdzLWNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRmxhZ3MgPSByZXF1aXJlKCcuL2ZsYWdzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbmNsYXNzIEZsYWdzQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIHVpXG4gICAgdGhpcy5fdG9hc3RzVmlldyA9IHJlcXVpcmUoJy4vdmlld3MvdG9hc3RzJyk7XG4gICAgdGhpcy5fZmxhZ3NGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZsYWdzLWZvcm0nKTtcbiAgICB0aGlzLl9mbGFnc1F1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZsYWdzLXF1ZXJ5Jyk7XG4gICAgdGhpcy5fZmxhZ3NTY3JpcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmxhZ3Mtd2VicGFnZXRlc3Qtc2NyaXB0Jyk7XG5cbiAgICAvLyB2aWV3IGV2ZW50c1xuICAgIHRoaXMuX2ZsYWdzRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlID0+IHRoaXMuX29uRmxhZ3NTdWJtaXQoZSkpO1xuICAgIHRoaXMuX2ZsYWdzRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBlID0+IHRoaXMuX3VwZGF0ZUZsYWdzT3V0cHV0KCkpO1xuXG4gICAgdGhpcy5fdXBkYXRlRmxhZ3NPdXRwdXQoKTtcbiAgfVxuXG4gIF9nZXRGbGFncygpIHtcbiAgICB2YXIgY2hlY2tib3hlcyA9IHV0aWxzLnRvQXJyYXkodGhpcy5fZmxhZ3NGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykpO1xuICAgIHZhciBmbGFncyA9IG5ldyBGbGFncygpO1xuICAgIGZvciAodmFyIGNoZWNrYm94IG9mIGNoZWNrYm94ZXMpIHtcbiAgICAgIGZsYWdzLnNldChjaGVja2JveC5uYW1lLCBjaGVja2JveC5jaGVja2VkID8gMSA6IDApO1xuICAgIH1cbiAgICByZXR1cm4gZmxhZ3M7XG4gIH1cblxuICBfdXBkYXRlRmxhZ3NPdXRwdXQoZXZlbnQpIHtcbiAgICB2YXIgZmxhZ3MgPSB0aGlzLl9nZXRGbGFncygpO1xuICAgIHRoaXMuX2ZsYWdzUXVlcnkudGV4dENvbnRlbnQgPSBmbGFncy5nZXRRdWVyeXN0cmluZygpO1xuICAgIHRoaXMuX2ZsYWdzU2NyaXB0LnRleHRDb250ZW50ID0gZmxhZ3MuZ2V0V2ViUGFnZVRlc3RTY3JpcHQoKTtcbiAgfVxuXG4gIF9vbkZsYWdzU3VibWl0KGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9nZXRGbGFncygpLnNldENvb2tpZSgpO1xuICAgIHRoaXMuX3RvYXN0c1ZpZXcuc2hvdyhcIkZsYWdzIHVwZGF0ZWRcIiwge2R1cmF0aW9uOiAyMDAwfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGbGFnc0NvbnRyb2xsZXI7Il19","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar querystring = require('querystring');\nvar cookies = require('browser-cookies');\n\nvar Flags = (function (_require) {\n  _inherits(Flags, _require);\n\n  function Flags() {\n    _classCallCheck(this, Flags);\n\n    _get(Object.getPrototypeOf(Flags.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(Flags, [{\n    key: 'set',\n    value: function set(key, val) {\n      this._vals[key] = val;\n    }\n  }, {\n    key: 'stringify',\n    value: function stringify() {\n      var _this = this;\n\n      var obj = {};\n\n      Object.keys(this._vals).forEach(function (key) {\n        if (key == 'use-url-flags') return;\n        if (_this._vals[key]) obj[key] = 1;\n      });\n\n      return querystring.stringify(obj);\n    }\n  }, {\n    key: 'getQuerystring',\n    value: function getQuerystring() {\n      return '?' + 'use-url-flags&' + this.stringify();\n    }\n  }, {\n    key: 'getWebPageTestScript',\n    value: function getWebPageTestScript() {\n      return 'setCookie\\thttps://wiki-offline.jakearchibald.com/\\tflags=' + this.stringify() + '\\nnavigate\\thttps://wiki-offline.jakearchibald.com/wiki/Hulk_Hogan';\n    }\n  }, {\n    key: 'setCookie',\n    value: function setCookie() {\n      cookies.set('flags', this.stringify(), { expires: 365 });\n    }\n  }], [{\n    key: 'parse',\n    value: function parse() {\n      return new Flags(cookies.get('flags') || '', location.search);\n    }\n  }]);\n\n  return Flags;\n})(require('../../../isojs/flags'));\n\nmodule.exports = Flags;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9mbGFncy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBSSxXQUFXLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3pDLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztJQUVuQyxLQUFLO1lBQUwsS0FBSzs7V0FBTCxLQUFLOzBCQUFMLEtBQUs7OytCQUFMLEtBQUs7OztlQUFMLEtBQUs7O1dBUU4sYUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO0FBQ1osVUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDdkI7OztXQUVRLHFCQUFHOzs7QUFDVixVQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7O0FBRWIsWUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsR0FBRyxFQUFJO0FBQ3JDLFlBQUksR0FBRyxJQUFJLGVBQWUsRUFBRSxPQUFPO0FBQ25DLFlBQUksTUFBSyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUNuQyxDQUFDLENBQUM7O0FBRUgsYUFBTyxXQUFXLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ25DOzs7V0FFYSwwQkFBRztBQUNmLGFBQU8sR0FBRyxHQUFHLGdCQUFnQixHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztLQUNsRDs7O1dBRW1CLGdDQUFHO0FBQ3JCLDRFQUFrRSxJQUFJLENBQUMsU0FBUyxFQUFFLHdFQUNyQjtLQUM5RDs7O1dBRVEscUJBQUc7QUFDVixhQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBQyxPQUFPLEVBQUUsR0FBRyxFQUFDLENBQUMsQ0FBQztLQUN4RDs7O1dBakNXLGlCQUFHO0FBQ2IsYUFBTyxJQUFJLEtBQUssQ0FDZCxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFDMUIsUUFBUSxDQUFDLE1BQU0sQ0FDaEIsQ0FBQztLQUNIOzs7U0FORyxLQUFLO0dBQVUsT0FBTyxDQUFDLHNCQUFzQixDQUFDOztBQXFDcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL2ZsYWdzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcbnZhciBjb29raWVzID0gcmVxdWlyZSgnYnJvd3Nlci1jb29raWVzJyk7XG5cbmNsYXNzIEZsYWdzIGV4dGVuZHMgKHJlcXVpcmUoJy4uLy4uLy4uL2lzb2pzL2ZsYWdzJykpIHtcbiAgc3RhdGljIHBhcnNlKCkge1xuICAgIHJldHVybiBuZXcgRmxhZ3MoXG4gICAgICBjb29raWVzLmdldCgnZmxhZ3MnKSB8fCAnJyxcbiAgICAgIGxvY2F0aW9uLnNlYXJjaFxuICAgICk7XG4gIH1cblxuICBzZXQoa2V5LCB2YWwpIHtcbiAgICB0aGlzLl92YWxzW2tleV0gPSB2YWw7XG4gIH1cblxuICBzdHJpbmdpZnkoKSB7XG4gICAgdmFyIG9iaiA9IHt9O1xuICAgIFxuICAgIE9iamVjdC5rZXlzKHRoaXMuX3ZhbHMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChrZXkgPT0gJ3VzZS11cmwtZmxhZ3MnKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5fdmFsc1trZXldKSBvYmpba2V5XSA9IDE7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShvYmopO1xuICB9XG5cbiAgZ2V0UXVlcnlzdHJpbmcoKSB7XG4gICAgcmV0dXJuICc/JyArICd1c2UtdXJsLWZsYWdzJicgKyB0aGlzLnN0cmluZ2lmeSgpO1xuICB9XG5cbiAgZ2V0V2ViUGFnZVRlc3RTY3JpcHQoKSB7XG4gICAgcmV0dXJuIGBzZXRDb29raWVcdGh0dHBzOi8vd2lraS1vZmZsaW5lLmpha2VhcmNoaWJhbGQuY29tL1x0ZmxhZ3M9JHt0aGlzLnN0cmluZ2lmeSgpfVxubmF2aWdhdGVcdGh0dHBzOi8vd2lraS1vZmZsaW5lLmpha2VhcmNoaWJhbGQuY29tL3dpa2kvSHVsa19Ib2dhbmA7XG4gIH1cblxuICBzZXRDb29raWUoKSB7XG4gICAgY29va2llcy5zZXQoJ2ZsYWdzJywgdGhpcy5zdHJpbmdpZnkoKSwge2V4cGlyZXM6IDM2NX0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmxhZ3M7Il19","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nrequire('regenerator/runtime');\n\nvar debounce = require('debounce');\nvar wikipedia = require('../shared/wikipedia');\nvar flags = require('./flags').parse();\n\nvar GlobalController = (function () {\n  function GlobalController() {\n    var _this = this;\n\n    _classCallCheck(this, GlobalController);\n\n    // ui\n    this._toolbarView = new (require('./views/toolbar'))();\n    this._searchResultsView = new (require('./views/search-results'))();\n    this._toastsView = require('./views/toasts');\n\n    // view events\n    this._toolbarView.on('searchInput', function (event) {\n      if (!event.value) {\n        _this._onSearchInput(event);\n        return;\n      }\n      debouncedSearch(event);\n    });\n\n    // state\n    this._setupServiceWorker();\n    this._lastSearchId = 0;\n\n    // setup\n    var debouncedSearch = debounce(function (e) {\n      return _this._onSearchInput(e);\n    }, 150);\n\n    // router\n    if (location.pathname == '/') {\n      new (require('./home-controller'))();\n    } else if (/^\\/wiki\\/[^\\/]+/.test(location.pathname)) {\n      new (require('./article-controller'))();\n    } else if (location.pathname == '/flags') {\n      new (require('./flags-controller'))();\n    }\n  }\n\n  _createClass(GlobalController, [{\n    key: '_setupServiceWorker',\n    value: function _setupServiceWorker() {\n      var reg, refreshing;\n      return regeneratorRuntime.async(function _setupServiceWorker$(context$2$0) {\n        var _this2 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            if ('serviceWorker' in navigator) {\n              context$2$0.next = 2;\n              break;\n            }\n\n            return context$2$0.abrupt('return');\n\n          case 2:\n            if (!flags.get('prevent-sw')) {\n              context$2$0.next = 12;\n              break;\n            }\n\n            context$2$0.next = 5;\n            return regeneratorRuntime.awrap(navigator.serviceWorker.getRegistration());\n\n          case 5:\n            reg = context$2$0.sent;\n\n            if (reg) {\n              context$2$0.next = 9;\n              break;\n            }\n\n            console.log('ServiceWorker prevented due to flags');\n            return context$2$0.abrupt('return');\n\n          case 9:\n            console.log('ServiceWorker found & unregistered - refresh to load without');\n            reg.unregister();\n            return context$2$0.abrupt('return');\n\n          case 12:\n            context$2$0.next = 14;\n            return regeneratorRuntime.awrap(navigator.serviceWorker.register('/sw.js'));\n\n          case 14:\n            reg = context$2$0.sent;\n\n            reg.addEventListener('updatefound', function (_) {\n              return _this2._onSwUpdateFound(reg);\n            });\n\n            navigator.serviceWorker.addEventListener('controllerchange', function (_) {\n              if (refreshing) return;\n              window.location.reload();\n              refreshing = true;\n            });\n            if (reg.waiting) this._onSwUpdateReady();\n\n          case 18:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: '_onSwUpdateReady',\n    value: function _onSwUpdateReady() {\n      var toast, newWorker, answer;\n      return regeneratorRuntime.async(function _onSwUpdateReady$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            toast = this._toastsView.show(\"Update available\", {\n              buttons: ['reload', 'dismiss']\n            });\n            context$2$0.next = 3;\n            return regeneratorRuntime.awrap(navigator.serviceWorker.getRegistration());\n\n          case 3:\n            newWorker = context$2$0.sent.waiting;\n            context$2$0.next = 6;\n            return regeneratorRuntime.awrap(toast.answer);\n\n          case 6:\n            answer = context$2$0.sent;\n\n            if (answer == 'reload') {\n              newWorker.postMessage('skipWaiting');\n            }\n\n          case 8:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: '_onSwUpdateFound',\n    value: function _onSwUpdateFound(registration) {\n      var _this3 = this;\n\n      var newWorker = registration.installing;\n\n      registration.installing.addEventListener('statechange', function callee$2$0(_) {\n        return regeneratorRuntime.async(function callee$2$0$(context$3$0) {\n          while (1) switch (context$3$0.prev = context$3$0.next) {\n            case 0:\n              if (!(newWorker.state == 'activated' && !navigator.serviceWorker.controller)) {\n                context$3$0.next = 3;\n                break;\n              }\n\n              this._toastsView.show(\"Ready to work offline\", {\n                duration: 5000\n              });\n              return context$3$0.abrupt('return');\n\n            case 3:\n\n              if (newWorker.state == 'installed' && navigator.serviceWorker.controller) {\n                this._onSwUpdateReady();\n              }\n\n            case 4:\n            case 'end':\n              return context$3$0.stop();\n          }\n        }, null, _this3);\n      });\n    }\n  }, {\n    key: '_onSearchInput',\n    value: function _onSearchInput(_ref) {\n      var value = _ref.value;\n      var id, results;\n      return regeneratorRuntime.async(function _onSearchInput$(context$2$0) {\n        var _this4 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            id = ++this._lastSearchId;\n\n            if (value) {\n              context$2$0.next = 4;\n              break;\n            }\n\n            this._searchResultsView.hide();\n            return context$2$0.abrupt('return');\n\n          case 4:\n            context$2$0.prev = 4;\n            context$2$0.next = 7;\n            return regeneratorRuntime.awrap(wikipedia.search(value));\n\n          case 7:\n            context$2$0.t0 = context$2$0.sent;\n            results = {\n              results: context$2$0.t0\n            };\n            context$2$0.next = 14;\n            break;\n\n          case 11:\n            context$2$0.prev = 11;\n            context$2$0.t1 = context$2$0['catch'](4);\n\n            results = { err: \"Search failed\" };\n\n          case 14:\n\n            requestAnimationFrame(function (_) {\n              if (id != _this4._lastSearchId) return;\n              _this4._searchResultsView.update(results);\n            });\n\n          case 15:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this, [[4, 11]]);\n    }\n  }]);\n\n  return GlobalController;\n})();\n\nmodule.exports = GlobalController;\n\n// the very first activation!\n// tell the user stuff works offline\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9nbG9iYWwtY29udHJvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7QUFFL0IsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQy9DLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQzs7SUFFakMsZ0JBQWdCO0FBQ1QsV0FEUCxnQkFBZ0IsR0FDTjs7OzBCQURWLGdCQUFnQjs7O0FBR2xCLFFBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxPQUFPLENBQUMsaUJBQWlCLEVBQUMsRUFBQyxDQUFDO0FBQ3JELFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLE9BQU8sQ0FBQyx3QkFBd0IsRUFBQyxFQUFDLENBQUM7QUFDbEUsUUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7O0FBRzdDLFFBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxVQUFBLEtBQUssRUFBSTtBQUMzQyxVQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRTtBQUNoQixjQUFLLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzQixlQUFPO09BQ1I7QUFDRCxxQkFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ3hCLENBQUMsQ0FBQzs7O0FBR0gsUUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7QUFDM0IsUUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7OztBQUd2QixRQUFJLGVBQWUsR0FBRyxRQUFRLENBQUMsVUFBQSxDQUFDO2FBQUksTUFBSyxjQUFjLENBQUMsQ0FB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QUMsQ0FBQztLQUNKOzs7V0FFbUIsd0JBQUMsSUFBTztVQUFOLEtBQUssR0FBTixJQUFPLENBQU4sS0FBSztVQUNyQixFQUFFLEVBT0YsT0FBTzs7Ozs7O0FBUFAsY0FBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLGFBQWE7O2dCQUV4QixLQUFLOzs7OztBQUNSLGdCQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLENBQUM7Ozs7Ozs0Q0FPTCxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQzs7OztBQUFqRCxtQkFBTztBQUFJLHFCQUFPOzs7Ozs7Ozs7QUFHbEIsbUJBQU8sR0FBRyxFQUFDLEdBQUcsRUFBRSxlQUFlLEVBQUMsQ0FBQzs7OztBQUduQyxpQ0FBcUIsQ0FBQyxVQUFBLENBQUMsRUFBSTtBQUN6QixrQkFBSSxFQUFFLElBQUksT0FBSyxhQUFhLEVBQUUsT0FBTztBQUNyQyxxQkFBSyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDekMsQ0FBQyxDQUFDOzs7Ozs7O0tBQ0o7OztTQWpIRyxnQkFBZ0I7OztBQW9IdEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQyIsImZpbGUiOiIvVXNlcnMvaGVybWFudy9Eb2N1bWVudHMvaGVybXdvbmcvb2ZmbGluZS13aWtpcGVkaWEvcHVibGljL2pzL3BhZ2UvZ2xvYmFsLWNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdyZWdlbmVyYXRvci9ydW50aW1lJyk7XG5cbnZhciBkZWJvdW5jZSA9IHJlcXVpcmUoJ2RlYm91bmNlJyk7XG52YXIgd2lraXBlZGlhID0gcmVxdWlyZSgnLi4vc2hhcmVkL3dpa2lwZWRpYScpO1xudmFyIGZsYWdzID0gcmVxdWlyZSgnLi9mbGFncycpLnBhcnNlKCk7XG5cbmNsYXNzIEdsb2JhbENvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyB1aVxuICAgIHRoaXMuX3Rvb2xiYXJWaWV3ID0gbmV3IChyZXF1aXJlKCcuL3ZpZXdzL3Rvb2xiYXInKSk7XG4gICAgdGhpcy5fc2VhcmNoUmVzdWx0c1ZpZXcgPSBuZXcgKHJlcXVpcmUoJy4vdmlld3Mvc2VhcmNoLXJlc3VsdHMnKSk7XG4gICAgdGhpcy5fdG9hc3RzVmlldyA9IHJlcXVpcmUoJy4vdmlld3MvdG9hc3RzJyk7XG5cbiAgICAvLyB2aWV3IGV2ZW50c1xuICAgIHRoaXMuX3Rvb2xiYXJWaWV3Lm9uKCdzZWFyY2hJbnB1dCcsIGV2ZW50ID0+IHtcbiAgICAgIGlmICghZXZlbnQudmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb25TZWFyY2hJbnB1dChldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGRlYm91bmNlZFNlYXJjaChldmVudCk7XG4gICAgfSk7XG5cbiAgICAvLyBzdGF0ZVxuICAgIHRoaXMuX3NldHVwU2VydmljZVdvcmtlcigpO1xuICAgIHRoaXMuX2xhc3RTZWFyY2hJZCA9IDA7XG5cbiAgICAvLyBzZXR1cFxuICAgIHZhciBkZWJvdW5jZWRTZWFyY2ggPSBkZWJvdW5jZShlID0+IHRoaXMuX29uU2VhcmNoSW5wdXQoZSksIDE1MCk7XG4gICAgXG4gICAgLy8gcm91dGVyXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09ICcvJykge1xuICAgICAgbmV3IChyZXF1aXJlKCcuL2hvbWUtY29udHJvbGxlcicpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoL15cXC93aWtpXFwvW15cXC9dKy8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHtcbiAgICAgIG5ldyAocmVxdWlyZSgnLi9hcnRpY2xlLWNvbnRyb2xsZXInKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09ICcvZmxhZ3MnKSB7XG4gICAgICBuZXcgKHJlcXVpcmUoJy4vZmxhZ3MtY29udHJvbGxlcicpKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfc2V0dXBTZXJ2aWNlV29ya2VyKCkge1xuICAgIGlmICghKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpKSByZXR1cm47XG5cbiAgICBpZiAoZmxhZ3MuZ2V0KCdwcmV2ZW50LXN3JykpIHtcbiAgICAgIHZhciByZWcgPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRSZWdpc3RyYXRpb24oKTtcbiAgICAgIGlmICghcmVnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHByZXZlbnRlZCBkdWUgdG8gZmxhZ3MnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgZm91bmQgJiB1bnJlZ2lzdGVyZWQgLSByZWZyZXNoIHRvIGxvYWQgd2l0aG91dCcpO1xuICAgICAgcmVnLnVucmVnaXN0ZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcmVnID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zdy5qcycpXG4gICAgcmVnLmFkZEV2ZW50TGlzdGVuZXIoJ3VwZGF0ZWZvdW5kJywgXyA9PiB0aGlzLl9vblN3VXBkYXRlRm91bmQocmVnKSk7XG4gICAgdmFyIHJlZnJlc2hpbmc7XG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNoYW5nZScsIF8gPT4ge1xuICAgICAgaWYgKHJlZnJlc2hpbmcpIHJldHVybjtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIHJlZnJlc2hpbmcgPSB0cnVlO1xuICAgIH0pO1xuICAgIGlmIChyZWcud2FpdGluZykgdGhpcy5fb25Td1VwZGF0ZVJlYWR5KCk7XG4gIH1cblxuICBhc3luYyBfb25Td1VwZGF0ZVJlYWR5KCkge1xuICAgIHZhciB0b2FzdCA9IHRoaXMuX3RvYXN0c1ZpZXcuc2hvdyhcIlVwZGF0ZSBhdmFpbGFibGVcIiwge1xuICAgICAgYnV0dG9uczogWydyZWxvYWQnLCAnZGlzbWlzcyddXG4gICAgfSk7XG5cbiAgICB2YXIgbmV3V29ya2VyID0gKGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbigpKS53YWl0aW5nO1xuICAgIHZhciBhbnN3ZXIgPSBhd2FpdCB0b2FzdC5hbnN3ZXI7XG5cbiAgICBpZiAoYW5zd2VyID09ICdyZWxvYWQnKSB7XG4gICAgICBuZXdXb3JrZXIucG9zdE1lc3NhZ2UoJ3NraXBXYWl0aW5nJyk7XG4gICAgfVxuICB9XG5cbiAgX29uU3dVcGRhdGVGb3VuZChyZWdpc3RyYXRpb24pIHtcbiAgICB2YXIgbmV3V29ya2VyID0gcmVnaXN0cmF0aW9uLmluc3RhbGxpbmc7XG5cbiAgICByZWdpc3RyYXRpb24uaW5zdGFsbGluZy5hZGRFdmVudExpc3RlbmVyKCdzdGF0ZWNoYW5nZScsIGFzeW5jIF8gPT4ge1xuICAgICAgLy8gdGhlIHZlcnkgZmlyc3QgYWN0aXZhdGlvbiFcbiAgICAgIC8vIHRlbGwgdGhlIHVzZXIgc3R1ZmYgd29ya3Mgb2ZmbGluZVxuICAgICAgaWYgKG5ld1dvcmtlci5zdGF0ZSA9PSAnYWN0aXZhdGVkJyAmJiAhbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xuICAgICAgICB0aGlzLl90b2FzdHNWaWV3LnNob3coXCJSZWFkeSB0byB3b3JrIG9mZmxpbmVcIiwge1xuICAgICAgICAgIGR1cmF0aW9uOiA1MDAwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdXb3JrZXIuc3RhdGUgPT0gJ2luc3RhbGxlZCcgJiYgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xuICAgICAgICB0aGlzLl9vblN3VXBkYXRlUmVhZHkoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIF9vblNlYXJjaElucHV0KHt2YWx1ZX0pIHtcbiAgICB2YXIgaWQgPSArK3RoaXMuX2xhc3RTZWFyY2hJZDtcblxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHRoaXMuX3NlYXJjaFJlc3VsdHNWaWV3LmhpZGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0cztcbiAgICBcbiAgICB0cnkge1xuICAgICAgcmVzdWx0cyA9IHtyZXN1bHRzOiBhd2FpdCB3aWtpcGVkaWEuc2VhcmNoKHZhbHVlKX07XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICByZXN1bHRzID0ge2VycjogXCJTZWFyY2ggZmFpbGVkXCJ9O1xuICAgIH1cblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfID0+IHtcbiAgICAgIGlmIChpZCAhPSB0aGlzLl9sYXN0U2VhcmNoSWQpIHJldHVybjtcbiAgICAgIHRoaXMuX3NlYXJjaFJlc3VsdHNWaWV3LnVwZGF0ZShyZXN1bHRzKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdsb2JhbENvbnRyb2xsZXI7Il19","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar wikipedia = require('../shared/wikipedia');\n\nvar cacheCapable = ('caches' in window);\n\nvar HomeController = (function () {\n  function HomeController() {\n    var _this = this;\n\n    _classCallCheck(this, HomeController);\n\n    // ui\n    this._cachedArticlesView = new (require('./views/cached-articles'))();\n    this._toastsView = require('./views/toasts');\n\n    // view events\n    this._cachedArticlesView.on('delete', function (e) {\n      return _this._onDeleteCachedArticle(e);\n    });\n\n    this._showCachedArticles();\n  }\n\n  _createClass(HomeController, [{\n    key: '_onDeleteCachedArticle',\n    value: function _onDeleteCachedArticle(_ref) {\n      var id = _ref.id;\n      return regeneratorRuntime.async(function _onDeleteCachedArticle$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.next = 2;\n            return regeneratorRuntime.awrap(wikipedia.uncache(id));\n\n          case 2:\n            this._showCachedArticles();\n\n          case 3:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: '_showCachedArticles',\n    value: function _showCachedArticles() {\n      return regeneratorRuntime.async(function _showCachedArticles$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.t0 = this._cachedArticlesView;\n            context$2$0.next = 3;\n            return regeneratorRuntime.awrap(wikipedia.getCachedArticleData());\n\n          case 3:\n            context$2$0.t1 = context$2$0.sent;\n            context$2$0.t2 = cacheCapable;\n            context$2$0.t3 = {\n              items: context$2$0.t1,\n              cacheCapable: context$2$0.t2\n            };\n            context$2$0.t0.update.call(context$2$0.t0, context$2$0.t3);\n\n          case 7:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }]);\n\n  return HomeController;\n})();\n\nmodule.exports = HomeController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9ob21lLWNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7O0FBRS9DLElBQUksWUFBWSxJQUFHLFFBQVEsSUFBSSxNQUFNLENBQUEsQ0FBQzs7SUFFaEMsY0FBYztBQUNQLFdBRFAsY0FBYyxHQUNKOzs7MEJBRFYsY0FBYzs7O0FBR2hCLFFBQUksQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLE9BQU8sQ0FBQyx5QkFBeUIsRUFBQyxFQUFDLENBQUM7QUFDcEUsUUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7O0FBRzdDLFFBQUksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQUEsQ0FBQzthQUFJLE1BQUssc0JBQXNCLENBQUMsQ0FBQyxDQUFDO0tBQUEsQ0FBQyxDQUFDOztBQUUzRSxRQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztHQUM1Qjs7ZUFWRyxjQUFjOztXQVlVLGdDQUFDLElBQUk7VUFBSCxFQUFFLEdBQUgsSUFBSSxDQUFILEVBQUU7Ozs7OzRDQUN4QixTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQzs7O0FBQzNCLGdCQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQzs7Ozs7OztLQUM1Qjs7O1dBRXdCOzs7OzZCQUN2QixJQUFJLENBQUMsbUJBQW1COzs0Q0FDVCxTQUFTLENBQUMsb0JBQW9CLEVBQUU7Ozs7NkJBQy9CLFlBQVk7O0FBRDFCLG1CQUFLO0FBQ0wsMEJBQVk7OzJCQUZXLE1BQU07Ozs7Ozs7S0FJaEM7OztTQXRCRyxjQUFjOzs7QUF5QnBCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9ob21lLWNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgd2lraXBlZGlhID0gcmVxdWlyZSgnLi4vc2hhcmVkL3dpa2lwZWRpYScpO1xuXG52YXIgY2FjaGVDYXBhYmxlID0gJ2NhY2hlcycgaW4gd2luZG93O1xuXG5jbGFzcyBIb21lQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIHVpXG4gICAgdGhpcy5fY2FjaGVkQXJ0aWNsZXNWaWV3ID0gbmV3IChyZXF1aXJlKCcuL3ZpZXdzL2NhY2hlZC1hcnRpY2xlcycpKTtcbiAgICB0aGlzLl90b2FzdHNWaWV3ID0gcmVxdWlyZSgnLi92aWV3cy90b2FzdHMnKTtcblxuICAgIC8vIHZpZXcgZXZlbnRzXG4gICAgdGhpcy5fY2FjaGVkQXJ0aWNsZXNWaWV3Lm9uKCdkZWxldGUnLCBlID0+IHRoaXMuX29uRGVsZXRlQ2FjaGVkQXJ0aWNsZShlKSk7XG5cbiAgICB0aGlzLl9zaG93Q2FjaGVkQXJ0aWNsZXMoKTtcbiAgfVxuXG4gIGFzeW5jIF9vbkRlbGV0ZUNhY2hlZEFydGljbGUoe2lkfSkge1xuICAgIGF3YWl0IHdpa2lwZWRpYS51bmNhY2hlKGlkKTtcbiAgICB0aGlzLl9zaG93Q2FjaGVkQXJ0aWNsZXMoKTtcbiAgfVxuXG4gIGFzeW5jIF9zaG93Q2FjaGVkQXJ0aWNsZXMoKSB7XG4gICAgdGhpcy5fY2FjaGVkQXJ0aWNsZXNWaWV3LnVwZGF0ZSh7XG4gICAgICBpdGVtczogYXdhaXQgd2lraXBlZGlhLmdldENhY2hlZEFydGljbGVEYXRhKCksXG4gICAgICBjYWNoZUNhcGFibGU6IGNhY2hlQ2FwYWJsZVxuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSG9tZUNvbnRyb2xsZXI7Il19","\"use strict\";\n\n// This is in its own file rather than utils.js because it's used for loading polyfills,\n// and promises, is one of the things that gets polyfilled, hence the callbacks\nmodule.exports = function loadScript(urls, yeyCallback, neyCallback) {\n  var count = urls.length;\n  var errored = false;\n\n  if (urls.length == 0) return yeyCallback();\n\n  urls.forEach(function (url) {\n    var script = document.createElement('script');\n    script.onload = function () {\n      if (errored) return;\n      if (! --count) yeyCallback();\n    };\n    script.onerror = function () {\n      if (errored) return;\n      neyCallback();\n      errored = true;\n    };\n    script.src = url;\n    document.head.insertBefore(script, document.head.firstChild);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9sb2FkLXNjcmlwdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O0FBSWIsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLFVBQVUsQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRTtBQUNuRSxNQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQ3hCLE1BQUksT0FBTyxHQUFHLEtBQUssQ0FBQzs7QUFFcEIsTUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxPQUFPLFdBQVcsRUFBRSxDQUFDOztBQUUzQyxNQUFJLENBQUMsT0FBTyxDQUFDLFVBQUEsR0FBRyxFQUFJO0FBQ2xCLFFBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDOUMsVUFBTSxDQUFDLE1BQU0sR0FBRyxZQUFXO0FBQ3pCLFVBQUksT0FBTyxFQUFFLE9BQU87QUFDcEIsVUFBSSxFQUFDLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxDQUFDO0tBQzdCLENBQUM7QUFDRixVQUFNLENBQUMsT0FBTyxHQUFHLFlBQVc7QUFDMUIsVUFBSSxPQUFPLEVBQUUsT0FBTztBQUNwQixpQkFBVyxFQUFFLENBQUM7QUFDZCxhQUFPLEdBQUcsSUFBSSxDQUFDO0tBQ2hCLENBQUM7QUFDRixVQUFNLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUNqQixZQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztHQUM5RCxDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9sb2FkLXNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLy8gVGhpcyBpcyBpbiBpdHMgb3duIGZpbGUgcmF0aGVyIHRoYW4gdXRpbHMuanMgYmVjYXVzZSBpdCdzIHVzZWQgZm9yIGxvYWRpbmcgcG9seWZpbGxzLFxuLy8gYW5kIHByb21pc2VzLCBpcyBvbmUgb2YgdGhlIHRoaW5ncyB0aGF0IGdldHMgcG9seWZpbGxlZCwgaGVuY2UgdGhlIGNhbGxiYWNrc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsb2FkU2NyaXB0KHVybHMsIHlleUNhbGxiYWNrLCBuZXlDYWxsYmFjaykge1xuICB2YXIgY291bnQgPSB1cmxzLmxlbmd0aDtcbiAgdmFyIGVycm9yZWQgPSBmYWxzZTtcblxuICBpZiAodXJscy5sZW5ndGggPT0gMCkgcmV0dXJuIHlleUNhbGxiYWNrKCk7XG5cbiAgdXJscy5mb3JFYWNoKHVybCA9PiB7XG4gICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChlcnJvcmVkKSByZXR1cm47XG4gICAgICBpZiAoIS0tY291bnQpIHlleUNhbGxiYWNrKCk7XG4gICAgfTtcbiAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGVycm9yZWQpIHJldHVybjtcbiAgICAgIG5leUNhbGxiYWNrKCk7XG4gICAgICBlcnJvcmVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIHNjcmlwdC5zcmMgPSB1cmw7XG4gICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUoc2NyaXB0LCBkb2N1bWVudC5oZWFkLmZpcnN0Q2hpbGQpO1xuICB9KTtcbn07Il19","\"use strict\";\n\nexports.toArray = function toArray(obj) {\n  return Array.prototype.slice.apply(obj);\n};\n\nexports.domReady = new Promise(function (resolve) {\n  function checkState() {\n    if (document.readyState != 'loading') {\n      resolve();\n    }\n  }\n  document.addEventListener('readystatechange', checkState);\n  checkState();\n});\n\nexports.strToEl = (function () {\n  var tmpEl = document.createElement('div');\n  return function (str) {\n    var r;\n    tmpEl.innerHTML = str;\n    r = tmpEl.children[0];\n    while (tmpEl.firstChild) {\n      tmpEl.removeChild(tmpEl.firstChild);\n    }\n    return r;\n  };\n})();\n\nfunction transitionClassFunc() {\n  var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  var _ref$removeClass = _ref.removeClass;\n  var removeClass = _ref$removeClass === undefined ? false : _ref$removeClass;\n\n  return function (el) {\n    var className = arguments.length <= 1 || arguments[1] === undefined ? 'active' : arguments[1];\n    var transitionClass = arguments.length <= 2 || arguments[2] === undefined ? 'transition' : arguments[2];\n\n    if (removeClass) {\n      if (!el.classList.contains(className)) return Promise.resolve();\n    } else {\n      if (el.classList.contains(className)) return Promise.resolve();\n    }\n\n    return new Promise(function (resolve) {\n      var listener = function listener(event) {\n        if (event.target != el) return;\n        el.removeEventListener('webkitTransitionEnd', listener);\n        el.removeEventListener('transitionend', listener);\n        el.classList.remove(transitionClass);\n        resolve();\n      };\n\n      el.classList.add(transitionClass);\n\n      requestAnimationFrame(function (_) {\n        el.addEventListener('webkitTransitionEnd', listener);\n        el.addEventListener('transitionend', listener);\n        el.classList[removeClass ? 'remove' : 'add'](className);\n      });\n    });\n  };\n}\n\nexports.transitionToClass = transitionClassFunc();\nexports.transitionFromClass = transitionClassFunc({ removeClass: true });\n\nexports.closest = function (el, selector) {\n  if (el.closest) {\n    return el.closest(selector);\n  }\n\n  var matches = el.matches || el.msMatchesSelector;\n\n  do {\n    if (el.nodeType != 1) continue;\n    if (matches.call(el, selector)) return el;\n  } while (el = el.parentNode);\n\n  return undefined;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBRWIsT0FBTyxDQUFDLE9BQU8sR0FBRyxTQUFTLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDdEMsU0FBTyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDekMsQ0FBQzs7QUFFRixPQUFPLENBQUMsUUFBUSxHQUFHLElBQUksT0FBTyxDQUFDLFVBQVMsT0FBTyxFQUFFO0FBQy9DLFdBQVMsVUFBVSxHQUFHO0FBQ3BCLFFBQUksUUFBUSxDQUFDLFVBQVUsSUFBSSxTQUFTLEVBQUU7QUFDcEMsYUFBTyxFQUFFLENBQUM7S0FDWDtHQUNGO0FBQ0QsVUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzFELFlBQVUsRUFBRSxDQUFDO0NBQ2QsQ0FBQyxDQUFDOztBQUVILE9BQU8sQ0FBQyxPQUFPLEdBQUksQ0FBQSxZQUFZO0FBQzdCLE1BQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDMUMsU0FBTyxVQUFVLEdBQUcsRUFBRTtBQUNwQixRQUFJLENBQUMsQ0FBQztBQUNOLFNBQUssQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0FBQ3RCLEtBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RCLFdBQU8sS0FBSyxDQUFDLFVBQVUsRUFBRTtBQUN2QixXQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUNyQztBQUNELFdBQU8sQ0FBQyxDQUFDO0dBQ1YsQ0FBQztDQUNILENBQUEsRUFBRSxBQUFDLENBQUM7O0FBRUwsU0FBUyxtQkFBbUIsR0FBMkI7bUVBQUosRUFBRTs7OEJBQXZCLFdBQVc7TUFBWCxXQUFXLG9DQUFHLEtBQUs7O0FBQy9DLFNBQU8sVUFBUyxFQUFFLEVBQXdEO1FBQXRELFNBQVMseURBQUcsUUFBUTtRQUFFLGVBQWUseURBQUcsWUFBWTs7QUFDdEUsUUFBSSxXQUFXLEVBQUU7QUFDZixVQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUUsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDakUsTUFDSTtBQUNILFVBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUUsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDaEU7O0FBRUQsV0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFBLE9BQU8sRUFBSTtBQUM1QixVQUFJLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBRyxLQUFLLEVBQUk7QUFDdEIsWUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLEVBQUUsRUFBRSxPQUFPO0FBQy9CLFVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUN4RCxVQUFFLENBQUMsbUJBQW1CLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ2xELFVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3JDLGVBQU8sRUFBRSxDQUFDO09BQ1gsQ0FBQzs7QUFFRixRQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFbEMsMkJBQXFCLENBQUMsVUFBQSxDQUFDLEVBQUk7QUFDekIsVUFBRSxDQUFDLGdCQUFnQixDQUFDLHFCQUFxQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ3JELFVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxlQUFlLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDL0MsVUFBRSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO09BQ3pELENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztHQUNKLENBQUE7Q0FDRjs7QUFFRCxPQUFPLENBQUMsaUJBQWlCLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQztBQUNsRCxPQUFPLENBQUMsbUJBQW1CLEdBQUcsbUJBQW1CLENBQUMsRUFBQyxXQUFXLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQzs7QUFFdkUsT0FBTyxDQUFDLE9BQU8sR0FBRyxVQUFTLEVBQUUsRUFBRSxRQUFRLEVBQUU7QUFDdkMsTUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFO0FBQ2QsV0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0dBQzdCOztBQUVELE1BQUksT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDLGlCQUFpQixDQUFDOztBQUVqRCxLQUFHO0FBQ0QsUUFBSSxFQUFFLENBQUMsUUFBUSxJQUFJLENBQUMsRUFBRSxTQUFTO0FBQy9CLFFBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUM7R0FDM0MsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLFVBQVUsRUFBRTs7QUFFN0IsU0FBTyxTQUFTLENBQUM7Q0FDbEIsQ0FBQyIsImZpbGUiOiIvVXNlcnMvaGVybWFudy9Eb2N1bWVudHMvaGVybXdvbmcvb2ZmbGluZS13aWtpcGVkaWEvcHVibGljL2pzL3BhZ2UvdXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy50b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheShvYmopIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShvYmopO1xufTtcblxuZXhwb3J0cy5kb21SZWFkeSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgZnVuY3Rpb24gY2hlY2tTdGF0ZSgpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSAnbG9hZGluZycpIHtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9XG4gIH1cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIGNoZWNrU3RhdGUpO1xuICBjaGVja1N0YXRlKCk7XG59KTtcblxuZXhwb3J0cy5zdHJUb0VsID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRtcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgdmFyIHI7XG4gICAgdG1wRWwuaW5uZXJIVE1MID0gc3RyO1xuICAgIHIgPSB0bXBFbC5jaGlsZHJlblswXTtcbiAgICB3aGlsZSAodG1wRWwuZmlyc3RDaGlsZCkge1xuICAgICAgdG1wRWwucmVtb3ZlQ2hpbGQodG1wRWwuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9O1xufSgpKTtcblxuZnVuY3Rpb24gdHJhbnNpdGlvbkNsYXNzRnVuYyh7cmVtb3ZlQ2xhc3MgPSBmYWxzZX09e30pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUgPSAnYWN0aXZlJywgdHJhbnNpdGlvbkNsYXNzID0gJ3RyYW5zaXRpb24nKSB7XG4gICAgaWYgKHJlbW92ZUNsYXNzKSB7XG4gICAgICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdmFyIGxpc3RlbmVyID0gZXZlbnQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9IGVsKSByZXR1cm47XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCBsaXN0ZW5lcik7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBsaXN0ZW5lcik7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUodHJhbnNpdGlvbkNsYXNzKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcblxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCh0cmFuc2l0aW9uQ2xhc3MpO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXyA9PiB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCBsaXN0ZW5lcik7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBsaXN0ZW5lcik7XG4gICAgICAgIGVsLmNsYXNzTGlzdFtyZW1vdmVDbGFzcyA/ICdyZW1vdmUnIDogJ2FkZCddKGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnRzLnRyYW5zaXRpb25Ub0NsYXNzID0gdHJhbnNpdGlvbkNsYXNzRnVuYygpO1xuZXhwb3J0cy50cmFuc2l0aW9uRnJvbUNsYXNzID0gdHJhbnNpdGlvbkNsYXNzRnVuYyh7cmVtb3ZlQ2xhc3M6IHRydWV9KTtcblxuZXhwb3J0cy5jbG9zZXN0ID0gZnVuY3Rpb24oZWwsIHNlbGVjdG9yKSB7XG4gIGlmIChlbC5jbG9zZXN0KSB7XG4gICAgcmV0dXJuIGVsLmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICB9XG5cbiAgdmFyIG1hdGNoZXMgPSBlbC5tYXRjaGVzIHx8IGVsLm1zTWF0Y2hlc1NlbGVjdG9yO1xuXG4gIGRvIHtcbiAgICBpZiAoZWwubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG4gICAgaWYgKG1hdGNoZXMuY2FsbChlbCwgc2VsZWN0b3IpKSByZXR1cm4gZWw7XG4gIH0gd2hpbGUgKGVsID0gZWwucGFyZW50Tm9kZSk7XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07Il19","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar contentTemplate = require('./templates/article-content.hbs');\nvar backgroundLoadTemplate = require('./templates/background-load.hbs');\nvar headerTemplate = require('../../../../shared-templates/article-header.hbs');\nvar Spinner = require('./spinner');\nvar utils = require('../utils');\n\nvar Article = (function (_require$EventEmitter) {\n  _inherits(Article, _require$EventEmitter);\n\n  function Article() {\n    var _this = this;\n\n    _classCallCheck(this, Article);\n\n    _get(Object.getPrototypeOf(Article.prototype), 'constructor', this).call(this);\n    this.container = document.querySelector('.article-container');\n    this._content = this.container.querySelector('.article-content');\n    this._backgroundLoadOffer = this.container.querySelector('.background-load-offer');\n    this._header = this.container.querySelector('.article-header');\n    this._spinner = new Spinner();\n    this.startedContentRender = false;\n    this.container.appendChild(this._spinner.container);\n    this.serverRendered = !!document.querySelector('.content.server-rendered');\n\n    this._header.addEventListener('change', function (event) {\n      if (event.target.name == 'cache') _this.emit('cacheChange', { value: event.target.checked });\n    });\n\n    this._backgroundLoadOffer.addEventListener('click', function (event) {\n      // we're assuming there's only one button in here right now.\n      // yes I know that's bad\n      if (utils.closest(event.target, 'button')) {\n        _this.emit('backgroundLoadRequest');\n      }\n    });\n\n    this._content.addEventListener('click', function (event) {\n      var heading = utils.closest(event.target, 'h2');\n      if (heading) _this._onHeadingClick(heading);\n    });\n  }\n\n  _createClass(Article, [{\n    key: '_onHeadingClick',\n    value: function _onHeadingClick(heading) {\n      var newDisplayVal = '';\n\n      if (heading.classList.contains('active')) {\n        heading.classList.remove('active');\n      } else {\n        heading.classList.add('active');\n        newDisplayVal = 'block';\n      }\n\n      var element = heading;\n      while ((element = element.nextElementSibling) && !element.matches('h2')) {\n        element.style.display = newDisplayVal;\n      }\n    }\n  }, {\n    key: 'updateContent',\n    value: function updateContent(articleHtml) {\n      this.stopLoading();\n      this.startedContentRender = true;\n      this._hideBackgroundLoadUI();\n      this._content.innerHTML = contentTemplate({\n        content: articleHtml\n      });\n    }\n\n    // this is a super hacky experiment\n  }, {\n    key: 'streamContent',\n    value: function streamContent(article) {\n      var response, fullContent, buffer, reader, decoder, result, awaitingInitialFlush;\n      return regeneratorRuntime.async(function streamContent$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.next = 2;\n            return regeneratorRuntime.awrap(article.getHtmlResponse());\n\n          case 2:\n            response = context$2$0.sent;\n\n            if (response.body) {\n              context$2$0.next = 10;\n              break;\n            }\n\n            context$2$0.t0 = this;\n            context$2$0.next = 7;\n            return regeneratorRuntime.awrap(article.getHtml());\n\n          case 7:\n            context$2$0.t1 = context$2$0.sent;\n            context$2$0.t0.updateContent.call(context$2$0.t0, context$2$0.t1);\n            return context$2$0.abrupt('return');\n\n          case 10:\n            fullContent = '';\n            buffer = '';\n            reader = response.body.getReader();\n            decoder = new TextDecoder();\n            awaitingInitialFlush = true;\n\n          case 15:\n            if (!true) {\n              context$2$0.next = 25;\n              break;\n            }\n\n            context$2$0.next = 18;\n            return regeneratorRuntime.awrap(reader.read());\n\n          case 18:\n            result = context$2$0.sent;\n\n            buffer += decoder.decode(result.value || new Uint8Array(), {\n              stream: !result.done\n            });\n\n            // so inefficient, but we don't have a better way to stream html\n            if (result.done || awaitingInitialFlush && buffer.length > 9000) {\n              this.stopLoading();\n              this.startedContentRender = true;\n              this._hideBackgroundLoadUI();\n              fullContent += buffer;\n              this._content.innerHTML = '<div id=\"content_wrapper\" class=\"content card-content\">' + fullContent + '</div>';\n              awaitingInitialFlush = false;\n              buffer = '';\n            }\n\n            if (!result.done) {\n              context$2$0.next = 23;\n              break;\n            }\n\n            return context$2$0.abrupt('break', 25);\n\n          case 23:\n            context$2$0.next = 15;\n            break;\n\n          case 25:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'offerBackgroundLoad',\n    value: function offerBackgroundLoad() {\n      var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var _ref$loadFailed = _ref.loadFailed;\n      var loadFailed = _ref$loadFailed === undefined ? false : _ref$loadFailed;\n\n      this._backgroundLoadOffer.innerHTML = backgroundLoadTemplate({ loadFailed: loadFailed });\n      this._backgroundLoadOffer.style.display = 'block';\n    }\n  }, {\n    key: 'confirmBackgroundLoad',\n    value: function confirmBackgroundLoad() {\n      this._backgroundLoadOffer.innerHTML = backgroundLoadTemplate({ confirmed: true });\n    }\n  }, {\n    key: '_hideBackgroundLoadUI',\n    value: function _hideBackgroundLoadUI() {\n      this._backgroundLoadOffer.style.display = '';\n    }\n  }, {\n    key: 'updateMeta',\n    value: function updateMeta(data) {\n      if (!data) {\n        this._header.innerHTML = '';\n        return;\n      }\n      this._header.innerHTML = headerTemplate(data);\n    }\n  }, {\n    key: 'updateCachingAbility',\n    value: function updateCachingAbility(cacheCapable) {\n      this.container.querySelector('.cache-toggle').style.visibility = cacheCapable ? '' : 'hidden';\n    }\n  }, {\n    key: 'startLoading',\n    value: function startLoading() {\n      this._spinner.show(800);\n    }\n  }, {\n    key: 'stopLoading',\n    value: function stopLoading() {\n      this._spinner.hide();\n    }\n  }]);\n\n  return Article;\n})(require('events').EventEmitter);\n\nmodule.exports = Article;\n\n// not supported\n\n// Here comes the haaaaack!\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS92aWV3cy9hcnRpY2xlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFJLGVBQWUsR0FBRyxPQUFPLENBQUMsaUNBQWlDLENBQUMsQ0FBQztBQUNqRSxJQUFJLHNCQUFzQixHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0FBQ3hFLElBQUksY0FBYyxHQUFHLE9BQU8sQ0FBQyxpREFBaUQsQ0FBQyxDQUFDO0FBQ2hGLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNuQyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7O0lBRTFCLE9BQU87WUFBUCxPQUFPOztBQUNBLFdBRFAsT0FBTyxHQUNHOzs7MEJBRFYsT0FBTzs7QUFFVCwrQkFGRSxPQUFPLDZDQUVEO0FBQ1IsUUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDOUQsUUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ2pFLFFBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ25GLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUMvRCxRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7QUFDOUIsUUFBSSxDQUFDLG9CQUFvQixHQUFHLEtBQUssQ0FBQztBQUNsQyxRQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FB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O0FBQ2YsVUFBSSxDQUFDLElBQUksRUFBRTtBQUNULFlBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUM1QixlQUFPO09BQ1I7QUFDRCxVQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDL0M7OztXQUVtQiw4QkFBQyxZQUFZLEVBQUU7QUFDakMsVUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxZQUFZLEdBQUcsRUFBRSxHQUFHLFFBQVEsQ0FBQztLQUMvRjs7O1dBRVcsd0JBQUc7QUFDYixVQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUN6Qjs7O1dBRVUsdUJBQUc7QUFDWixVQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0tBQ3RCOzs7U0EvSEcsT0FBTztHQUFVLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZOztBQWtJckQsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL3ZpZXdzL2FydGljbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY29udGVudFRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvYXJ0aWNsZS1jb250ZW50LmhicycpO1xudmFyIGJhY2tncm91bmRMb2FkVGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9iYWNrZ3JvdW5kLWxvYWQuaGJzJyk7XG52YXIgaGVhZGVyVGVtcGxhdGUgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9zaGFyZWQtdGVtcGxhdGVzL2FydGljbGUtaGVhZGVyLmhicycpO1xudmFyIFNwaW5uZXIgPSByZXF1aXJlKCcuL3NwaW5uZXInKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIEFydGljbGUgZXh0ZW5kcyAocmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyKSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZS1jb250YWluZXInKTtcbiAgICB0aGlzLl9jb250ZW50ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmFydGljbGUtY29udGVudCcpO1xuICAgIHRoaXMuX2JhY2tncm91bmRMb2FkT2ZmZXIgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZC1sb2FkLW9mZmVyJyk7XG4gICAgdGhpcy5faGVhZGVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmFydGljbGUtaGVhZGVyJyk7XG4gICAgdGhpcy5fc3Bpbm5lciA9IG5ldyBTcGlubmVyKCk7XG4gICAgdGhpcy5zdGFydGVkQ29udGVudFJlbmRlciA9IGZhbHNlO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3NwaW5uZXIuY29udGFpbmVyKTtcbiAgICB0aGlzLnNlcnZlclJlbmRlcmVkID0gISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC5zZXJ2ZXItcmVuZGVyZWQnKTtcblxuICAgIHRoaXMuX2hlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5hbWUgPT0gJ2NhY2hlJykgdGhpcy5lbWl0KCdjYWNoZUNoYW5nZScsIHt2YWx1ZTogZXZlbnQudGFyZ2V0LmNoZWNrZWR9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2JhY2tncm91bmRMb2FkT2ZmZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgICAvLyB3ZSdyZSBhc3N1bWluZyB0aGVyZSdzIG9ubHkgb25lIGJ1dHRvbiBpbiBoZXJlIHJpZ2h0IG5vdy5cbiAgICAgIC8vIHllcyBJIGtub3cgdGhhdCdzIGJhZFxuICAgICAgaWYgKHV0aWxzLmNsb3Nlc3QoZXZlbnQudGFyZ2V0LCAnYnV0dG9uJykpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdiYWNrZ3JvdW5kTG9hZFJlcXVlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX2NvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgICB2YXIgaGVhZGluZyA9IHV0aWxzLmNsb3Nlc3QoZXZlbnQudGFyZ2V0LCAnaDInKTtcbiAgICAgIGlmIChoZWFkaW5nKSB0aGlzLl9vbkhlYWRpbmdDbGljayhoZWFkaW5nKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9vbkhlYWRpbmdDbGljayhoZWFkaW5nKSB7XG4gICAgdmFyIG5ld0Rpc3BsYXlWYWwgPSAnJztcblxuICAgIGlmIChoZWFkaW5nLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIGhlYWRpbmcuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaGVhZGluZy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIG5ld0Rpc3BsYXlWYWwgPSAnYmxvY2snO1xuICAgIH1cblxuICAgIHZhciBlbGVtZW50ID0gaGVhZGluZztcbiAgICB3aGlsZSAoKGVsZW1lbnQgPSBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZykgJiYgIWVsZW1lbnQubWF0Y2hlcygnaDInKSkge1xuICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gbmV3RGlzcGxheVZhbDtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVDb250ZW50KGFydGljbGVIdG1sKSB7XG4gICAgdGhpcy5zdG9wTG9hZGluZygpO1xuICAgIHRoaXMuc3RhcnRlZENvbnRlbnRSZW5kZXIgPSB0cnVlO1xuICAgIHRoaXMuX2hpZGVCYWNrZ3JvdW5kTG9hZFVJKCk7XG4gICAgdGhpcy5fY29udGVudC5pbm5lckhUTUwgPSBjb250ZW50VGVtcGxhdGUoe1xuICAgICAgY29udGVudDogYXJ0aWNsZUh0bWxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHRoaXMgaXMgYSBzdXBlciBoYWNreSBleHBlcmltZW50XG4gIGFzeW5jIHN0cmVhbUNvbnRlbnQoYXJ0aWNsZSkge1xuICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGFydGljbGUuZ2V0SHRtbFJlc3BvbnNlKCk7XG4gICAgaWYgKCFyZXNwb25zZS5ib2R5KSB7XG4gICAgICAvLyBub3Qgc3VwcG9ydGVkXG4gICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoYXdhaXQgYXJ0aWNsZS5nZXRIdG1sKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhlcmUgY29tZXMgdGhlIGhhYWFhYWNrIVxuICAgIHZhciBmdWxsQ29udGVudCA9ICcnO1xuICAgIHZhciBidWZmZXIgPSAnJztcbiAgICB2YXIgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcbiAgICB2YXIgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgIHZhciByZXN1bHQ7XG4gICAgdmFyIGF3YWl0aW5nSW5pdGlhbEZsdXNoID0gdHJ1ZTtcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZShyZXN1bHQudmFsdWUgfHwgbmV3IFVpbnQ4QXJyYXksIHtcbiAgICAgICAgc3RyZWFtOiAhcmVzdWx0LmRvbmVcbiAgICAgIH0pO1xuXG4gICAgICAvLyBzbyBpbmVmZmljaWVudCwgYnV0IHdlIGRvbid0IGhhdmUgYSBiZXR0ZXIgd2F5IHRvIHN0cmVhbSBodG1sXG4gICAgICBpZiAocmVzdWx0LmRvbmUgfHwgKGF3YWl0aW5nSW5pdGlhbEZsdXNoICYmIGJ1ZmZlci5sZW5ndGggPiA5MDAwKSkge1xuICAgICAgICB0aGlzLnN0b3BMb2FkaW5nKCk7XG4gICAgICAgIHRoaXMuc3RhcnRlZENvbnRlbnRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLl9oaWRlQmFja2dyb3VuZExvYWRVSSgpO1xuICAgICAgICBmdWxsQ29udGVudCArPSBidWZmZXI7XG4gICAgICAgIHRoaXMuX2NvbnRlbnQuaW5uZXJIVE1MID0gJzxkaXYgaWQ9XCJjb250ZW50X3dyYXBwZXJcIiBjbGFzcz1cImNvbnRlbnQgY2FyZC1jb250ZW50XCI+JyArIGZ1bGxDb250ZW50ICsgJzwvZGl2Pic7XG4gICAgICAgIGF3YWl0aW5nSW5pdGlhbEZsdXNoID0gZmFsc2U7XG4gICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzdWx0LmRvbmUpIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIG9mZmVyQmFja2dyb3VuZExvYWQoe1xuICAgIGxvYWRGYWlsZWQgPSBmYWxzZVxuICB9PXt9KSB7XG4gICAgdGhpcy5fYmFja2dyb3VuZExvYWRPZmZlci5pbm5lckhUTUwgPSBiYWNrZ3JvdW5kTG9hZFRlbXBsYXRlKHtsb2FkRmFpbGVkfSk7XG4gICAgdGhpcy5fYmFja2dyb3VuZExvYWRPZmZlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfVxuXG4gIGNvbmZpcm1CYWNrZ3JvdW5kTG9hZCgpIHtcbiAgICB0aGlzLl9iYWNrZ3JvdW5kTG9hZE9mZmVyLmlubmVySFRNTCA9IGJhY2tncm91bmRMb2FkVGVtcGxhdGUoe2NvbmZpcm1lZDogdHJ1ZX0pO1xuICB9XG5cbiAgX2hpZGVCYWNrZ3JvdW5kTG9hZFVJKCkge1xuICAgIHRoaXMuX2JhY2tncm91bmRMb2FkT2ZmZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xuICB9XG5cbiAgdXBkYXRlTWV0YShkYXRhKSB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICB0aGlzLl9oZWFkZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2hlYWRlci5pbm5lckhUTUwgPSBoZWFkZXJUZW1wbGF0ZShkYXRhKTtcbiAgfVxuXG4gIHVwZGF0ZUNhY2hpbmdBYmlsaXR5KGNhY2hlQ2FwYWJsZSkge1xuICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYWNoZS10b2dnbGUnKS5zdHlsZS52aXNpYmlsaXR5ID0gY2FjaGVDYXBhYmxlID8gJycgOiAnaGlkZGVuJztcbiAgfVxuXG4gIHN0YXJ0TG9hZGluZygpIHtcbiAgICB0aGlzLl9zcGlubmVyLnNob3coODAwKTtcbiAgfVxuXG4gIHN0b3BMb2FkaW5nKCkge1xuICAgIHRoaXMuX3NwaW5uZXIuaGlkZSgpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQXJ0aWNsZTsiXX0=","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar template = require('./templates/cached-articles.hbs');\n\nvar CachedArticles = (function (_require$EventEmitter) {\n  _inherits(CachedArticles, _require$EventEmitter);\n\n  function CachedArticles() {\n    var _this = this;\n\n    _classCallCheck(this, CachedArticles);\n\n    _get(Object.getPrototypeOf(CachedArticles.prototype), 'constructor', this).call(this);\n    this.container = document.querySelector('.cached-articles-container');\n    this.container.addEventListener('click', function (event) {\n      return _this._onClick(event);\n    });\n  }\n\n  _createClass(CachedArticles, [{\n    key: '_onClick',\n    value: function _onClick(event) {\n      // Thankfully we can use this, because Canary!\n      if (!event.target.closest) return;\n      var button = event.target.closest('button');\n\n      if (!button) return;\n\n      this.emit('delete', { id: button.value });\n    }\n  }, {\n    key: 'update',\n    value: function update(data) {\n      this.container.innerHTML = template(data);\n    }\n  }]);\n\n  return CachedArticles;\n})(require('events').EventEmitter);\n\nmodule.exports = CachedArticles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS92aWV3cy9jYWNoZWQtYXJ0aWNsZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDOztJQUVwRCxjQUFjO1lBQWQsY0FBYzs7QUFDUCxXQURQLGNBQWMsR0FDSjs7OzBCQURWLGNBQWM7O0FBRWhCLCtCQUZFLGNBQWMsNkNBRVI7QUFDUixRQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsNEJBQTRCLENBQUMsQ0FBQztBQUN0RSxRQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFBLEtBQUs7YUFBSSxNQUFLLFFBQVEsQ0FBQyxLQUFLLENBQUM7S0FBQSxDQUFDLENBQUM7R0FDekU7O2VBTEcsY0FBYzs7V0FPVixrQkFBQyxLQUFLLEVBQUU7O0FBRWQsVUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE9BQU87QUFDbEMsVUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTVDLFVBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTzs7QUFFcEIsVUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7S0FDekM7OztXQUVLLGdCQUFDLElBQUksRUFBRTtBQUNYLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUMzQzs7O1NBbkJHLGNBQWM7R0FBVSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWTs7QUFzQjVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS92aWV3cy9jYWNoZWQtYXJ0aWNsZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9jYWNoZWQtYXJ0aWNsZXMuaGJzJyk7XG5cbmNsYXNzIENhY2hlZEFydGljbGVzIGV4dGVuZHMgKHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcikge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhY2hlZC1hcnRpY2xlcy1jb250YWluZXInKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHRoaXMuX29uQ2xpY2soZXZlbnQpKTtcbiAgfVxuXG4gIF9vbkNsaWNrKGV2ZW50KSB7XG4gICAgLy8gVGhhbmtmdWxseSB3ZSBjYW4gdXNlIHRoaXMsIGJlY2F1c2UgQ2FuYXJ5IVxuICAgIGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QpIHJldHVybjtcbiAgICB2YXIgYnV0dG9uID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpO1xuXG4gICAgaWYgKCFidXR0b24pIHJldHVybjtcblxuICAgIHRoaXMuZW1pdCgnZGVsZXRlJywge2lkOiBidXR0b24udmFsdWV9KTtcbiAgfVxuXG4gIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gdGVtcGxhdGUoZGF0YSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYWNoZWRBcnRpY2xlczsiXX0=","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar template = require('./templates/search-results.hbs');\nvar utils = require('../utils');\n\nvar SearchResults = (function () {\n  function SearchResults() {\n    var _this = this;\n\n    _classCallCheck(this, SearchResults);\n\n    this.container = document.querySelector('.search-results');\n    this._items = [];\n    this._activeIndex = -1;\n\n    document.querySelector('.search').addEventListener('keydown', function (e) {\n      return _this.onSearchKeyDown(e);\n    });\n  }\n\n  _createClass(SearchResults, [{\n    key: 'onSearchKeyDown',\n    value: function onSearchKeyDown(event) {\n      switch (event.keyCode) {\n        case 13:\n          // enter\n          this._activate();\n          event.preventDefault();\n          break;\n        case 38:\n          // up\n          this._previous();\n          event.preventDefault();\n          break;\n        case 40:\n          // down\n          this._next();\n          event.preventDefault();\n          break;\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update(results) {\n      this._activeIndex = -1;\n      this.container.classList.add('active');\n      this.container.innerHTML = template(results);\n      this._items = utils.toArray(this.container.querySelectorAll('.search-result'));\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      this.container.classList.remove('active');\n    }\n  }, {\n    key: '_previous',\n    value: function _previous() {\n      if (this._items[this._activeIndex]) {\n        this._items[this._activeIndex].classList.remove('active');\n      }\n\n      this._activeIndex--;\n\n      if (!this._items[this._activeIndex]) {\n        this._activeIndex = this._items.length - 1;\n      }\n\n      this._items[this._activeIndex].classList.add('active');\n    }\n  }, {\n    key: '_next',\n    value: function _next() {\n      if (this._items[this._activeIndex]) {\n        this._items[this._activeIndex].classList.remove('active');\n      }\n\n      this._activeIndex++;\n\n      if (!this._items[this._activeIndex]) {\n        this._activeIndex = 0;\n      }\n\n      this._items[this._activeIndex].classList.add('active');\n    }\n  }, {\n    key: '_activate',\n    value: function _activate() {\n      var itemToActivate = this._items[this._activeIndex] || this._items[0];\n\n      if (itemToActivate) {\n        itemToActivate.querySelector('a').click();\n      }\n    }\n  }]);\n\n  return SearchResults;\n})();\n\nmodule.exports = SearchResults;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS92aWV3cy9zZWFyY2gtcmVzdWx0cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztBQUN6RCxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7O0lBRTFCLGFBQWE7QUFDTixXQURQLGFBQWEsR0FDSDs7OzBCQURWLGFBQWE7O0FBRWYsUUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDM0QsUUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDakIsUUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQzs7QUFFdkIsWUFBUSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsVUFBQSxDQUFDO2FBQUksTUFBSyxlQUFlLENBQUMsQ0FBQyxDQUFDO0tBQUEsQ0FBQyxDQUFDO0dBQzdGOztlQVBHLGFBQWE7O1dBU0YseUJBQUMsS0FBSyxFQUFFO0FBQ3JCLGNBQVEsS0FBSyxDQUFDLE9BQU87QUFDbkIsYUFBSyxFQUFFOztBQUNMLGNBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUNqQixlQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDdkIsZ0JBQU07QUFBQSxBQUNSLGFBQUssRUFBRTs7QUFDTCxjQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDakIsZUFBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3ZCLGdCQUFNO0FBQUEsQUFDUixhQUFLLEVBQUU7O0FBQ0wsY0FBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2IsZUFBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3ZCLGdCQUFNO0FBQUEsT0FDVDtLQUNGOzs7V0FFSyxnQkFBQyxPQUFPLEVBQUU7QUFDZCxVQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN2QyxVQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDN0MsVUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO0tBQ2hGOzs7V0FFRyxnQkFBRztBQUNMLFVBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUMzQzs7O1dBRVEscUJBQUc7QUFDVixVQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFO0FBQ2xDLFlBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7T0FDM0Q7O0FBRUQsVUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDOztBQUVwQixVQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7QUFDbkMsWUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7T0FDNUM7O0FBRUQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUN4RDs7O1dBRUksaUJBQUc7QUFDTixVQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFO0FBQ2xDLFlBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7T0FDM0Q7O0FBRUQsVUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDOztBQUVwQixVQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7QUFDbkMsWUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7T0FDdkI7O0FBRUQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUN4RDs7O1dBRVEscUJBQUc7QUFDVixVQUFJLGNBQWMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUV0RSxVQUFJLGNBQWMsRUFBRTtBQUNsQixzQkFBYyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztPQUMzQztLQUNGOzs7U0F2RUcsYUFBYTs7O0FBMEVuQixNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyIsImZpbGUiOiIvVXNlcnMvaGVybWFudy9Eb2N1bWVudHMvaGVybXdvbmcvb2ZmbGluZS13aWtpcGVkaWEvcHVibGljL2pzL3BhZ2Uvdmlld3Mvc2VhcmNoLXJlc3VsdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9zZWFyY2gtcmVzdWx0cy5oYnMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIFNlYXJjaFJlc3VsdHMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtcmVzdWx0cycpO1xuICAgIHRoaXMuX2l0ZW1zID0gW107XG4gICAgdGhpcy5fYWN0aXZlSW5kZXggPSAtMTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB0aGlzLm9uU2VhcmNoS2V5RG93bihlKSk7XG4gIH1cblxuICBvblNlYXJjaEtleURvd24oZXZlbnQpIHtcbiAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgIGNhc2UgMTM6IC8vIGVudGVyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzODogLy8gdXBcbiAgICAgICAgdGhpcy5fcHJldmlvdXMoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQwOiAvLyBkb3duXG4gICAgICAgIHRoaXMuX25leHQoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKHJlc3VsdHMpIHtcbiAgICB0aGlzLl9hY3RpdmVJbmRleCA9IC0xO1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IHRlbXBsYXRlKHJlc3VsdHMpO1xuICAgIHRoaXMuX2l0ZW1zID0gdXRpbHMudG9BcnJheSh0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoLXJlc3VsdCcpKTtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIH1cblxuICBfcHJldmlvdXMoKSB7XG4gICAgaWYgKHRoaXMuX2l0ZW1zW3RoaXMuX2FjdGl2ZUluZGV4XSkge1xuICAgICAgdGhpcy5faXRlbXNbdGhpcy5fYWN0aXZlSW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIHRoaXMuX2FjdGl2ZUluZGV4LS07XG5cbiAgICBpZiAoIXRoaXMuX2l0ZW1zW3RoaXMuX2FjdGl2ZUluZGV4XSkge1xuICAgICAgdGhpcy5fYWN0aXZlSW5kZXggPSB0aGlzLl9pdGVtcy5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIHRoaXMuX2l0ZW1zW3RoaXMuX2FjdGl2ZUluZGV4XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfVxuXG4gIF9uZXh0KCkge1xuICAgIGlmICh0aGlzLl9pdGVtc1t0aGlzLl9hY3RpdmVJbmRleF0pIHtcbiAgICAgIHRoaXMuX2l0ZW1zW3RoaXMuX2FjdGl2ZUluZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9hY3RpdmVJbmRleCsrO1xuXG4gICAgaWYgKCF0aGlzLl9pdGVtc1t0aGlzLl9hY3RpdmVJbmRleF0pIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUluZGV4ID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLl9pdGVtc1t0aGlzLl9hY3RpdmVJbmRleF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cblxuICBfYWN0aXZhdGUoKSB7XG4gICAgdmFyIGl0ZW1Ub0FjdGl2YXRlID0gdGhpcy5faXRlbXNbdGhpcy5fYWN0aXZlSW5kZXhdIHx8IHRoaXMuX2l0ZW1zWzBdO1xuICAgIFxuICAgIGlmIChpdGVtVG9BY3RpdmF0ZSkge1xuICAgICAgaXRlbVRvQWN0aXZhdGUucXVlcnlTZWxlY3RvcignYScpLmNsaWNrKCk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VhcmNoUmVzdWx0cztcbiJdfQ==","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar utils = require('../utils');\n\nvar Spinner = (function () {\n  function Spinner() {\n    var _this = this;\n\n    _classCallCheck(this, Spinner);\n\n    this.container = utils.strToEl('<div class=\"spinner\">' + '<div class=\"spinner-container\">' + '<div class=\"spinner-layer\">' + '<div class=\"circle-clipper left\">' + '<div class=\"circle\"></div>' + '</div>' + '<div class=\"gap-patch\">' + '<div class=\"circle\"></div>' + '</div>' + '<div class=\"circle-clipper right\">' + '<div class=\"circle\"></div>' + '</div>' + '</div>' + '</div>' + '</div>' + '');\n\n    this._showTimeout = null;\n    this.container.style.display = 'none';\n\n    var animEndListener = function animEndListener(event) {\n      if (event.target == _this.container) {\n        _this.container.style.display = 'none';\n      }\n    };\n\n    this.container.addEventListener('webkitAnimationEnd', animEndListener);\n    this.container.addEventListener('animationend', animEndListener);\n  }\n\n  _createClass(Spinner, [{\n    key: 'show',\n    value: function show() {\n      var _this2 = this;\n\n      var delay = arguments.length <= 0 || arguments[0] === undefined ? 300 : arguments[0];\n\n      clearTimeout(this._showTimeout);\n      this.container.style.display = 'none';\n      this.container.classList.remove('cooldown');\n      this._showTimeout = setTimeout(function (_) {\n        _this2.container.style.display = '';\n      }, delay);\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      clearTimeout(this._showTimeout);\n      this.container.classList.add('cooldown');\n    }\n  }]);\n\n  return Spinner;\n})();\n\nmodule.exports = Spinner;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS92aWV3cy9zcGlubmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQzs7SUFFMUIsT0FBTztBQUNBLFdBRFAsT0FBTyxHQUNHOzs7MEJBRFYsT0FBTzs7QUFFVCxRQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQzVCLHVCQUF1QixHQUNyQixpQ0FBaUMsR0FDL0IsNkJBQTZCLEdBQzNCLG1DQUFtQyxHQUNqQyw0QkFBNEIsR0FDOUIsUUFBUSxHQUNSLHlCQUF5QixHQUN2Qiw0QkFBNEIsR0FDOUIsUUFBUSxHQUNSLG9DQUFvQyxHQUNsQyw0QkFBNEIsR0FDOUIsUUFBUSxHQUNWLFFBQVEsR0FDVixRQUFRLEdBQ1YsUUFBUSxHQUNWLEVBQUUsQ0FBQyxDQUFDOztBQUVKLFFBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQ3pCLFFBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7O0FBRXRDLFFBQUksZUFBZSxHQUFHLFNBQWxCLGVBQWUsQ0FBRyxLQUFLLEVBQUk7QUFDN0IsVUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLE1BQUssU0FBUyxFQUFFO0FBQ2xDLGNBQUssU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO09BQ3ZDO0tBQ0YsQ0FBQzs7QUFFRixRQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixFQUFFLGVBQWUsQ0FBQyxDQUFDO0FBQ3ZFLFFBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLGVBQWUsQ0FBQyxDQUFDO0dBQ2xFOztlQS9CRyxPQUFPOztXQWlDUCxnQkFBYzs7O1VBQWIsS0FBSyx5REFBRyxHQUFHOztBQUNkLGtCQUFZLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ2hDLFVBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDdEMsVUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzVDLFVBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLFVBQUEsQ0FBQyxFQUFJO0FBQ2xDLGVBQUssU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO09BQ25DLEVBQUUsS0FBSyxDQUFDLENBQUM7S0FDWDs7O1dBRUcsZ0JBQUc7QUFDTCxrQkFBWSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNoQyxVQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDMUM7OztTQTdDRyxPQUFPOzs7QUFnRGIsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL3ZpZXdzL3NwaW5uZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5jbGFzcyBTcGlubmVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxkaXYgY2xhc3M9XCJzcGlubmVyXCI+JyArXG4gICAgICAgICc8ZGl2IGNsYXNzPVwic3Bpbm5lci1jb250YWluZXJcIj4nICtcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cInNwaW5uZXItbGF5ZXJcIj4nICtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY2lyY2xlLWNsaXBwZXIgbGVmdFwiPicgK1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNpcmNsZVwiPjwvZGl2PicgK1xuICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJnYXAtcGF0Y2hcIj4nICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjaXJjbGVcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY2lyY2xlLWNsaXBwZXIgcmlnaHRcIj4nICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjaXJjbGVcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICc8L2Rpdj4nICtcbiAgICAgICc8L2Rpdj4nICtcbiAgICAnJyk7XG5cbiAgICB0aGlzLl9zaG93VGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIHZhciBhbmltRW5kTGlzdGVuZXIgPSBldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdEFuaW1hdGlvbkVuZCcsIGFuaW1FbmRMaXN0ZW5lcik7XG4gICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgYW5pbUVuZExpc3RlbmVyKTtcbiAgfVxuXG4gIHNob3coZGVsYXkgPSAzMDApIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fc2hvd1RpbWVvdXQpO1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnY29vbGRvd24nKTtcbiAgICB0aGlzLl9zaG93VGltZW91dCA9IHNldFRpbWVvdXQoXyA9PiB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgfSwgZGVsYXkpO1xuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fc2hvd1RpbWVvdXQpO1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Nvb2xkb3duJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTcGlubmVyOyJdfQ==","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div id=\\\"content_wrapper\\\" class=\\\"content card-content\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.content || (depth0 != null ? depth0.content : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"content\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\";\n},\"useData\":true});\n","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"    <p>Cool, you'll get a notification when it's ready!</p>\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"    <p>\\n      <strong>\\n        Uh oh,\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.loadFailed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.program(6, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"      </strong>\\n      But it's ok, we can load it in the background\\n      \"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.loadFailed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(8, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\n      and let you know when it's ready.\\n    </p>\\n    <div class=\\\"button-row\\\">\\n      <button>Load in background</button>\\n    </div>\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    return \"          couldn't fetch that article!\\n\";\n},\"6\":function(depth0,helpers,partials,data) {\n    return \"          a slow-loading article!\\n\";\n},\"8\":function(depth0,helpers,partials,data) {\n    return \"when connectivity is better\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div id=\\\"content_wrapper\\\" class=\\\"content card-content\\\">\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.confirmed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"</div>\";\n},\"useData\":true});\n","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,((stack1 = (depth0 != null ? depth0.items : depth0)) != null ? stack1.length : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(2, data, 0),\"inverse\":this.program(5, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"2\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"        <ul> \\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"        </ul>\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var helper, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression;\n\n  return \"            <li class=\\\"item-list-item\\\">\\n              <a href=\\\"/wiki/\"\n    + alias3(((helper = (helper = helpers.urlId || (depth0 != null ? depth0.urlId : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"urlId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n                <div class=\\\"title\\\">\"\n    + alias3(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n                <div class=\\\"description\\\">\"\n    + alias3(((helper = (helper = helpers.extract || (depth0 != null ? depth0.extract : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"extract\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n              </a>\\n              <button class=\\\"delete-btn\\\" value=\\\"\"\n    + alias3(((helper = (helper = helpers.urlId || (depth0 != null ? depth0.urlId : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"urlId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n                <svg viewBox=\\\"0 0 24 24\\\"><title>Delete</title><path d=\\\"M6 19c0 1 1 2 2 2h8c1 0 2-1 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\\\"/></svg>\\n              </button>\\n            </li>\\n\";\n},\"5\":function(depth0,helpers,partials,data) {\n    return \"        <p>You don't have anything cached yet. Maybe read about <a href=\\\"/wiki/The_Raccoons\\\">The Raccoons</a> or something? That was ace.</p>\\n\";\n},\"7\":function(depth0,helpers,partials,data) {\n    return \"      <p>\\n        Unfortunately your browser doesn't support in-page caching. Try\\n        <a href=\\\"https://www.google.co.uk/chrome/browser/canary.html\\\">Chrome Canary</a>.\\n        Everything else works fine though! Although you may want to read about\\n        <a href=\\\"/wiki/Disappointment\\\">disappointment</a>.\\n      </p>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"subheading\\\">\\n  <div class=\\\"heading-text\\\">\\n    <h1>Cached articles</h1>\\n  </div>\\n</div>\\n\\n<div class=\\\"card\\\">\\n  <div class=\\\"card-content cached-articles\\\">\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.cacheCapable : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(7, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"  </div>\\n</div>\";\n},\"useData\":true});\n","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"  <ol>\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.results : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(2, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"  </ol>\\n\";\n},\"2\":function(depth0,helpers,partials,data) {\n    var helper, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression;\n\n  return \"      <li class=\\\"item-list-item search-result\\\">\\n        <a href=\\\"/wiki/\"\n    + alias3(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n          <div class=\\\"title\\\">\"\n    + alias3(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n          <div class=\\\"description\\\">\"\n    + alias3(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"description\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n        </a>\\n      </li>\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"search-error\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.err || (depth0 != null ? depth0.err : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"err\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.results : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.err : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});\n","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar utils = require('../utils');\n\nvar Toast = (function () {\n  function Toast(message, duration, buttons) {\n    var _this = this;\n\n    _classCallCheck(this, Toast);\n\n    this.container = utils.strToEl('<div class=\"toast\"><div class=\"toast-content\"></div></div>' + '');\n\n    this._content = this.container.querySelector('.toast-content');\n    this._content.textContent = message;\n    this._answerResolve;\n    this._hideTimeout;\n\n    this.answer = new Promise(function (r) {\n      return _this._answerResolve = r;\n    });\n\n    buttons.forEach(function (button) {\n      var buttonEl = document.createElement('button');\n      buttonEl.className = 'unbutton';\n      buttonEl.textContent = button;\n      buttonEl.addEventListener('click', function (event) {\n        _this._answerResolve(button);\n      });\n      _this.container.appendChild(buttonEl);\n    });\n\n    if (duration) {\n      this._hideTimeout = setTimeout(function (_) {\n        return _this.hide();\n      }, duration);\n    }\n  }\n\n  _createClass(Toast, [{\n    key: 'hide',\n    value: function hide() {\n      clearTimeout(this._hideTimeout);\n      this._answerResolve();\n      return utils.transitionToClass(this.container, 'hide');\n    }\n  }]);\n\n  return Toast;\n})();\n\nvar Toasts = (function () {\n  function Toasts() {\n    _classCallCheck(this, Toasts);\n\n    this.container = utils.strToEl(\"<div class='toasts'></div>\");\n    document.body.appendChild(this.container);\n  }\n\n  _createClass(Toasts, [{\n    key: 'show',\n    value: function show(message) {\n      var _this2 = this;\n\n      var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var _ref$duration = _ref.duration;\n      var duration = _ref$duration === undefined ? 0 : _ref$duration;\n      var _ref$buttons = _ref.buttons;\n      var buttons = _ref$buttons === undefined ? ['dismiss'] : _ref$buttons;\n\n      var toast = new Toast(message, duration, buttons);\n      this.container.appendChild(toast.container);\n\n      toast.answer.then(function (_) {\n        return toast.hide();\n      }).then(function (_) {\n        _this2.container.removeChild(toast.container);\n      });\n\n      return toast;\n    }\n  }]);\n\n  return Toasts;\n})();\n\nmodule.exports = new Toasts();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS92aWV3cy90b2FzdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDOztJQUUxQixLQUFLO0FBQ0UsV0FEUCxLQUFLLENBQ0csT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUU7OzswQkFEcEMsS0FBSzs7QUFFUCxRQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQzVCLDREQUE0RCxHQUM5RCxFQUFFLENBQUMsQ0FBQzs7QUFFSixRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDL0QsUUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDO0FBQ3BDLFFBQUksQ0FBQyxjQUFjLENBQUM7QUFDcEIsUUFBSSxDQUFDLFlBQVksQ0FBQzs7QUFFbEIsUUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE9BQU8sQ0FBQyxVQUFBLENBQUM7YUFBSSxNQUFLLGNBQWMsR0FBRyxDQUFDO0tBQUEsQ0FBQyxDQUFDOztBQUV4RCxXQUFPLENBQUMsT0FBTyxDQUFDLFVBQUEsTUFBTSxFQUFJO0FBQ3hCLFVBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDaEQsY0FBUSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUM7QUFDaEMsY0FBUSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7QUFDOUIsY0FBUSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFBLEtBQUssRUFBSTtBQUMxQyxjQUFLLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztPQUM3QixDQUFDLENBQUM7QUFDSCxZQUFLLFNBQVMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDdEMsQ0FBQyxDQUFDOztBQUVILFFBQUksUUFBUSxFQUFFO0FBQ1osVUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUMsVUFBQSxDQUFDO2VBQUksTUFBSyxJQUFJLEVBQUU7T0FBQSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0tBQzVEO0dBQ0Y7O2VBMUJHLEtBQUs7O1dBNEJMLGdCQUFHO0FBQ0wsa0JBQVksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDaEMsVUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3RCLGFBQU8sS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDeEQ7OztTQWhDRyxLQUFLOzs7SUFtQ0wsTUFBTTtBQUNDLFdBRFAsTUFBTSxHQUNJOzBCQURWLE1BQU07O0FBRVIsUUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDN0QsWUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0dBQzNDOztlQUpHLE1BQU07O1dBTU4sY0FBQyxPQUFPLEVBR047Ozt1RUFBSixFQUFFOzsrQkFGRixRQUFRO1VBQVIsUUFBUSxpQ0FBRyxDQUFDOzhCQUNaLE9BQU87VUFBUCxPQUFPLGdDQUFHLENBQUMsU0FBUyxDQUFDOztBQUVyQixVQUFJLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2xELFVBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFNUMsV0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBQSxDQUFDO2VBQUksS0FBSyxDQUFDLElBQUksRUFBRTtPQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxDQUFDLEVBQUk7QUFDN0MsZUFBSyxTQUFTLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztPQUM3QyxDQUFDLENBQUM7O0FBRUgsYUFBTyxLQUFLLENBQUM7S0FDZDs7O1NBbEJHLE1BQU07OztBQXFCWixNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksTUFBTSxFQUFFLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL3ZpZXdzL3RvYXN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIFRvYXN0IHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgZHVyYXRpb24sIGJ1dHRvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IHV0aWxzLnN0clRvRWwoXG4gICAgICAnPGRpdiBjbGFzcz1cInRvYXN0XCI+PGRpdiBjbGFzcz1cInRvYXN0LWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nICtcbiAgICAnJyk7XG5cbiAgICB0aGlzLl9jb250ZW50ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnRvYXN0LWNvbnRlbnQnKTtcbiAgICB0aGlzLl9jb250ZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICB0aGlzLl9hbnN3ZXJSZXNvbHZlO1xuICAgIHRoaXMuX2hpZGVUaW1lb3V0O1xuXG4gICAgdGhpcy5hbnN3ZXIgPSBuZXcgUHJvbWlzZShyID0+IHRoaXMuX2Fuc3dlclJlc29sdmUgPSByKTtcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgdmFyIGJ1dHRvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBidXR0b25FbC5jbGFzc05hbWUgPSAndW5idXR0b24nO1xuICAgICAgYnV0dG9uRWwudGV4dENvbnRlbnQgPSBidXR0b247XG4gICAgICBidXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy5fYW5zd2VyUmVzb2x2ZShidXR0b24pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25FbCk7XG4gICAgfSk7XG5cbiAgICBpZiAoZHVyYXRpb24pIHtcbiAgICAgIHRoaXMuX2hpZGVUaW1lb3V0ID0gc2V0VGltZW91dChfID0+IHRoaXMuaGlkZSgpLCBkdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5faGlkZVRpbWVvdXQpO1xuICAgIHRoaXMuX2Fuc3dlclJlc29sdmUoKTtcbiAgICByZXR1cm4gdXRpbHMudHJhbnNpdGlvblRvQ2xhc3ModGhpcy5jb250YWluZXIsICdoaWRlJyk7XG4gIH1cbn1cblxuY2xhc3MgVG9hc3RzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFwiPGRpdiBjbGFzcz0ndG9hc3RzJz48L2Rpdj5cIik7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gIH1cblxuICBzaG93KG1lc3NhZ2UsIHtcbiAgICBkdXJhdGlvbiA9IDAsXG4gICAgYnV0dG9ucyA9IFsnZGlzbWlzcyddXG4gIH09e30pIHtcbiAgICB2YXIgdG9hc3QgPSBuZXcgVG9hc3QobWVzc2FnZSwgZHVyYXRpb24sIGJ1dHRvbnMpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRvYXN0LmNvbnRhaW5lcik7XG5cbiAgICB0b2FzdC5hbnN3ZXIudGhlbihfID0+IHRvYXN0LmhpZGUoKSkudGhlbihfID0+IHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRvYXN0LmNvbnRhaW5lcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdG9hc3Q7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgVG9hc3RzKCk7Il19","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Toolbar = (function (_require$EventEmitter) {\n  _inherits(Toolbar, _require$EventEmitter);\n\n  function Toolbar() {\n    var _this = this;\n\n    _classCallCheck(this, Toolbar);\n\n    _get(Object.getPrototypeOf(Toolbar.prototype), 'constructor', this).call(this);\n\n    this.container = document.querySelector('.toolbar');\n    this.searchBar = this.container.querySelector('.search-bar');\n    this.searchInput = this.container.querySelector('.search');\n    this.lastSearchTerm = '';\n\n    this.container.querySelector('.search-btn').addEventListener('click', function (e) {\n      return _this.onSearchBtnClick(e);\n    });\n    this.container.querySelector('.back-btn').addEventListener('click', function (e) {\n      return _this.onBackBtnClick(e);\n    });\n    this.searchInput.addEventListener('input', function (e) {\n      return _this.onSearchInput(e);\n    });\n\n    // was this activated before JS loaded?\n    if (this.searchBar.classList.contains('active')) {\n      // wait for a microtask (so event handlers are ready)\n      Promise.resolve().then(function (_) {\n        return _this.onSearchInput();\n      });\n    }\n  }\n\n  _createClass(Toolbar, [{\n    key: 'onSearchBtnClick',\n    value: function onSearchBtnClick(event) {\n      // most of this is handled inline in base.dust\n      this.lastSearchTerm = '';\n    }\n  }, {\n    key: 'onBackBtnClick',\n    value: function onBackBtnClick(event) {\n      // most of this is handled inline in base.dust\n      this.emit('searchInput', { value: '' });\n    }\n  }, {\n    key: 'onSearchInput',\n    value: function onSearchInput() {\n      var value = this.searchInput.value.trim();\n\n      if (value != this.lastSearchTerm) {\n        this.lastSearchTerm = value;\n        this.emit('searchInput', { value: value });\n      }\n    }\n  }]);\n\n  return Toolbar;\n})(require('events').EventEmitter);\n\nmodule.exports = Toolbar;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS92aWV3cy90b29sYmFyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7SUFBTSxPQUFPO1lBQVAsT0FBTzs7QUFDQSxXQURQLE9BQU8sR0FDRzs7OzBCQURWLE9BQU87O0FBRVQsK0JBRkUsT0FBTyw2Q0FFRDs7QUFFUixRQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEQsUUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUM3RCxRQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzNELFFBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDOztBQUV6QixRQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQSxDQUFDO2FBQUksTUFBSyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7S0FBQSxDQUFDLENBQUM7QUFDckcsUUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQUEsQ0FBQzthQUFJLE1BQUssY0FBYyxDQUFDLENBQUMsQ0FBQztLQUFBLENBQUMsQ0FBQztBQUNqRyxRQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFBLENBQUM7YUFBSSxNQUFLLGFBQWEsQ0FBQyxDQUFDLENBQUM7S0FBQSxDQUFDLENBQUM7OztBQUd2RSxRQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRTs7QUFFL0MsYUFBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFBLENBQUM7ZUFBSSxNQUFLLGFBQWEsRUFBRTtPQUFBLENBQUMsQ0FBQztLQUNuRDtHQUNGOztlQWxCRyxPQUFPOztXQW9CSywwQkFBQyxLQUFLLEVBQUU7O0FBRXRCLFVBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO0tBQzFCOzs7V0FFYSx3QkFBQyxLQUFLLEVBQUU7O0FBRXBCLFVBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUMsS0FBSyxFQUFFLEVBQUUsRUFBQyxDQUFDLENBQUM7S0FDdkM7OztXQUVZLHlCQUFHO0FBQ2QsVUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRTFDLFVBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDaEMsWUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7QUFDNUIsWUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBQyxLQUFLLEVBQUwsS0FBSyxFQUFDLENBQUMsQ0FBQztPQUNuQztLQUNGOzs7U0FyQ0csT0FBTztHQUFVLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZOztBQXdDckQsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL3ZpZXdzL3Rvb2xiYXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUb29sYmFyIGV4dGVuZHMgKHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcikge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9vbGJhcicpO1xuICAgIHRoaXMuc2VhcmNoQmFyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlYXJjaC1iYXInKTtcbiAgICB0aGlzLnNlYXJjaElucHV0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlYXJjaCcpO1xuICAgIHRoaXMubGFzdFNlYXJjaFRlcm0gPSAnJztcblxuICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHRoaXMub25TZWFyY2hCdG5DbGljayhlKSk7XG4gICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmJhY2stYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHRoaXMub25CYWNrQnRuQ2xpY2soZSkpO1xuICAgIHRoaXMuc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHRoaXMub25TZWFyY2hJbnB1dChlKSk7XG5cbiAgICAvLyB3YXMgdGhpcyBhY3RpdmF0ZWQgYmVmb3JlIEpTIGxvYWRlZD9cbiAgICBpZiAodGhpcy5zZWFyY2hCYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgLy8gd2FpdCBmb3IgYSBtaWNyb3Rhc2sgKHNvIGV2ZW50IGhhbmRsZXJzIGFyZSByZWFkeSlcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oXyA9PiB0aGlzLm9uU2VhcmNoSW5wdXQoKSk7XG4gICAgfVxuICB9XG5cbiAgb25TZWFyY2hCdG5DbGljayhldmVudCkge1xuICAgIC8vIG1vc3Qgb2YgdGhpcyBpcyBoYW5kbGVkIGlubGluZSBpbiBiYXNlLmR1c3RcbiAgICB0aGlzLmxhc3RTZWFyY2hUZXJtID0gJyc7XG4gIH1cblxuICBvbkJhY2tCdG5DbGljayhldmVudCkge1xuICAgIC8vIG1vc3Qgb2YgdGhpcyBpcyBoYW5kbGVkIGlubGluZSBpbiBiYXNlLmR1c3RcbiAgICB0aGlzLmVtaXQoJ3NlYXJjaElucHV0Jywge3ZhbHVlOiAnJ30pO1xuICB9XG5cbiAgb25TZWFyY2hJbnB1dCgpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnNlYXJjaElucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgIGlmICh2YWx1ZSAhPSB0aGlzLmxhc3RTZWFyY2hUZXJtKSB7XG4gICAgICB0aGlzLmxhc3RTZWFyY2hUZXJtID0gdmFsdWU7XG4gICAgICB0aGlzLmVtaXQoJ3NlYXJjaElucHV0Jywge3ZhbHVlfSk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVG9vbGJhcjsiXX0=","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction promisifyRequest(obj) {\n  return new Promise(function (resolve, reject) {\n    function onsuccess(event) {\n      resolve(obj.result);\n      unlisten();\n    }\n    function onerror(event) {\n      reject(obj.error);\n      unlisten();\n    }\n    function unlisten() {\n      obj.removeEventListener('complete', onsuccess);\n      obj.removeEventListener('success', onsuccess);\n      obj.removeEventListener('error', onerror);\n      obj.removeEventListener('abort', onerror);\n    }\n    obj.addEventListener('complete', onsuccess);\n    obj.addEventListener('success', onsuccess);\n    obj.addEventListener('error', onerror);\n    obj.addEventListener('abort', onerror);\n  });\n}\n\nvar IndexedDouchebag = (function () {\n  function IndexedDouchebag(name, version, upgradeCallback) {\n    _classCallCheck(this, IndexedDouchebag);\n\n    var request = indexedDB.open(name, version);\n    this.ready = promisifyRequest(request);\n    request.onupgradeneeded = function (event) {\n      upgradeCallback(request.result, event.oldVersion);\n    };\n  }\n\n  _createClass(IndexedDouchebag, [{\n    key: 'transaction',\n    value: function transaction(stores, modeOrCallback, callback) {\n      return this.ready.then(function (db) {\n        var mode = 'readonly';\n\n        if (modeOrCallback.apply) {\n          callback = modeOrCallback;\n        } else if (modeOrCallback) {\n          mode = modeOrCallback;\n        }\n\n        var tx = db.transaction(stores, mode);\n        var val = callback(tx, db);\n        var promise = promisifyRequest(tx);\n        var readPromise;\n\n        if (!val) {\n          return promise;\n        }\n\n        if (val[0] && 'result' in val[0]) {\n          readPromise = Promise.all(val.map(promisifyRequest));\n        } else {\n          readPromise = promisifyRequest(val);\n        }\n\n        return promise.then(function () {\n          return readPromise;\n        });\n      });\n    }\n  }, {\n    key: 'get',\n    value: function get(store, key) {\n      return this.transaction(store, function (tx) {\n        return tx.objectStore(store).get(key);\n      });\n    }\n  }, {\n    key: 'put',\n    value: function put(store, key, value) {\n      return this.transaction(store, 'readwrite', function (tx) {\n        tx.objectStore(store).put(value, key);\n      });\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(store, key) {\n      return this.transaction(store, 'readwrite', function (tx) {\n        tx.objectStore(store)['delete'](key);\n      });\n    }\n  }]);\n\n  return IndexedDouchebag;\n})();\n\nmodule.exports = IndexedDouchebag;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvc2hhcmVkL2luZGV4ZWRkb3VjaGJhZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUViLFNBQVMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFO0FBQzdCLFNBQU8sSUFBSSxPQUFPLENBQUMsVUFBUyxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQzNDLGFBQVMsU0FBUyxDQUFDLEtBQUssRUFBRTtBQUN4QixhQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3BCLGNBQVEsRUFBRSxDQUFDO0tBQ1o7QUFDRCxhQUFTLE9BQU8sQ0FBQyxLQUFLLEVBQUU7QUFDdEIsWUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsQixjQUFRLEVBQUUsQ0FBQztLQUNaO0FBQ0QsYUFBUyxRQUFRLEdBQUc7QUFDbEIsU0FBRyxDQUFDLG1CQUFtQixDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUMvQyxTQUFHLENBQUMsbUJBQW1CLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQzlDLFNBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDMUMsU0FBRyxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztLQUMzQztBQUNELE9BQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDNUMsT0FBRyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUMzQyxPQUFHLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZDLE9BQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDeEMsQ0FBQyxDQUFD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aW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvc2hhcmVkL2luZGV4ZWRkb3VjaGJhZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChvYmopIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZ1bmN0aW9uIG9uc3VjY2VzcyhldmVudCkge1xuICAgICAgcmVzb2x2ZShvYmoucmVzdWx0KTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uZXJyb3IoZXZlbnQpIHtcbiAgICAgIHJlamVjdChvYmouZXJyb3IpO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdW5saXN0ZW4oKSB7XG4gICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBvbnN1Y2Nlc3MpO1xuICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBvbnN1Y2Nlc3MpO1xuICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbmVycm9yKTtcbiAgICB9XG4gICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgb25zdWNjZXNzKTtcbiAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIG9uc3VjY2Vzcyk7XG4gICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25lcnJvcik7XG4gIH0pO1xufVxuXG5jbGFzcyBJbmRleGVkRG91Y2hlYmFnIHtcbiAgY29uc3RydWN0b3IobmFtZSwgdmVyc2lvbiwgdXBncmFkZUNhbGxiYWNrKSB7XG4gICAgdmFyIHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICB0aGlzLnJlYWR5ID0gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KTtcbiAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB1cGdyYWRlQ2FsbGJhY2socmVxdWVzdC5yZXN1bHQsIGV2ZW50Lm9sZFZlcnNpb24pO1xuICAgIH07XG4gIH1cblxuICB0cmFuc2FjdGlvbihzdG9yZXMsIG1vZGVPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnJlYWR5LnRoZW4oZnVuY3Rpb24oZGIpIHtcbiAgICAgIHZhciBtb2RlID0gJ3JlYWRvbmx5JztcblxuICAgICAgaWYgKG1vZGVPckNhbGxiYWNrLmFwcGx5KSB7XG4gICAgICAgIGNhbGxiYWNrID0gbW9kZU9yQ2FsbGJhY2s7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChtb2RlT3JDYWxsYmFjaykge1xuICAgICAgICBtb2RlID0gbW9kZU9yQ2FsbGJhY2s7XG4gICAgICB9XG5cbiAgICAgIHZhciB0eCA9IGRiLnRyYW5zYWN0aW9uKHN0b3JlcywgbW9kZSk7XG4gICAgICB2YXIgdmFsID0gY2FsbGJhY2sodHgsIGRiKTtcbiAgICAgIHZhciBwcm9taXNlID0gcHJvbWlzaWZ5UmVxdWVzdCh0eCk7XG4gICAgICB2YXIgcmVhZFByb21pc2U7XG5cbiAgICAgIGlmICghdmFsKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsWzBdICYmICdyZXN1bHQnIGluIHZhbFswXSkge1xuICAgICAgICByZWFkUHJvbWlzZSA9IFByb21pc2UuYWxsKHZhbC5tYXAocHJvbWlzaWZ5UmVxdWVzdCkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJlYWRQcm9taXNlID0gcHJvbWlzaWZ5UmVxdWVzdCh2YWwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcmVhZFByb21pc2U7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBnZXQoc3RvcmUsIGtleSkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlLCBmdW5jdGlvbih0eCkge1xuICAgICAgcmV0dXJuIHR4Lm9iamVjdFN0b3JlKHN0b3JlKS5nZXQoa2V5KTtcbiAgICB9KTtcbiAgfTtcblxuICBwdXQoc3RvcmUsIGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbihzdG9yZSwgJ3JlYWR3cml0ZScsIGZ1bmN0aW9uKHR4KSB7XG4gICAgICB0eC5vYmplY3RTdG9yZShzdG9yZSkucHV0KHZhbHVlLCBrZXkpO1xuICAgIH0pO1xuICB9O1xuXG4gIGRlbGV0ZShzdG9yZSwga2V5KSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24oc3RvcmUsICdyZWFkd3JpdGUnLCBmdW5jdGlvbih0eCkge1xuICAgICAgdHgub2JqZWN0U3RvcmUoc3RvcmUpLmRlbGV0ZShrZXkpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEluZGV4ZWREb3VjaGViYWc7Il19","'use strict';\n\nvar Idb = require('./indexeddouchbag');\nvar idb;\n\n// avoid opening idb until first call\nfunction getIdb() {\n  if (!idb) {\n    idb = new Idb('wiki-offline-keyval', 1, function (db) {\n      db.createObjectStore('keyval');\n    });\n  }\n  return idb;\n}\n\nif (self.indexedDB) {\n  module.exports = {\n    get: function get(key) {\n      return getIdb().get('keyval', key);\n    },\n    set: function set(key, val) {\n      return getIdb().put('keyval', key, val);\n    },\n    'delete': function _delete(key) {\n      return getIdb()['delete']('keyval', key);\n    }\n  };\n} else {\n  module.exports = {\n    get: function get(key) {\n      return Promise.resolve(localStorage.getItem(key));\n    },\n    set: function set(key, val) {\n      return Promise.resolve(localStorage.setItem(key, val));\n    },\n    'delete': function _delete(key) {\n      return Promise.resolve(localStorage.removeItem(key));\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvc2hhcmVkL3N0b3JhZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUN2QyxJQUFJLEdBQUcsQ0FBQzs7O0FBR1IsU0FBUyxNQUFNLEdBQUc7QUFDaEIsTUFBSSxDQUFDLEdBQUcsRUFBRTtBQUNSLE9BQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLEVBQUUsVUFBUyxFQUFFLEVBQUU7QUFDbkQsUUFBRSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQ2hDLENBQUMsQ0FBQztHQUNKO0FBQ0QsU0FBTyxHQUFHLENBQUM7Q0FDWjs7QUFFRCxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDbEIsUUFBTSxDQUFDLE9BQU8sR0FBRztBQUNmLE9BQUcsRUFBRSxhQUFBLEdBQUc7YUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQztLQUFBO0FBQ3ZDLE9BQUcsRUFBRSxhQUFDLEdBQUcsRUFBRSxHQUFHO2FBQUssTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO0tBQUE7QUFDbkQsY0FBUSxpQkFBQSxHQUFHO2FBQUksTUFBTSxFQUFFLFVBQU8sQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDO0tBQUE7R0FDOUMsQ0FBQztDQUNILE1BQ0k7QUFDSCxRQUFNLENBQUMsT0FBTyxHQUFHO0FBQ2YsT0FBRyxFQUFFLGFBQUEsR0FBRzthQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUFBO0FBQ3RELE9BQUcsRUFBRSxhQUFDLEdBQUcsRUFBRSxHQUFHO2FBQUssT0FBTyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUFBO0FBQ2xFLGNBQVEsaUJBQUEsR0FBRzthQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUFBO0dBQzdELENBQUM7Q0FDSCIsImZpbGUiOiIvVXNlcnMvaGVybWFudy9Eb2N1bWVudHMvaGVybXdvbmcvb2ZmbGluZS13aWtpcGVkaWEvcHVibGljL2pzL3NoYXJlZC9zdG9yYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIElkYiA9IHJlcXVpcmUoJy4vaW5kZXhlZGRvdWNoYmFnJyk7XG52YXIgaWRiO1xuXG4vLyBhdm9pZCBvcGVuaW5nIGlkYiB1bnRpbCBmaXJzdCBjYWxsXG5mdW5jdGlvbiBnZXRJZGIoKSB7XG4gIGlmICghaWRiKSB7XG4gICAgaWRiID0gbmV3IElkYignd2lraS1vZmZsaW5lLWtleXZhbCcsIDEsIGZ1bmN0aW9uKGRiKSB7XG4gICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZSgna2V5dmFsJyk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGlkYjtcbn1cblxuaWYgKHNlbGYuaW5kZXhlZERCKSB7XG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIGdldDoga2V5ID0+IGdldElkYigpLmdldCgna2V5dmFsJywga2V5KSxcbiAgICBzZXQ6IChrZXksIHZhbCkgPT4gZ2V0SWRiKCkucHV0KCdrZXl2YWwnLCBrZXksIHZhbCksXG4gICAgZGVsZXRlOiBrZXkgPT4gZ2V0SWRiKCkuZGVsZXRlKCdrZXl2YWwnLCBrZXkpXG4gIH07XG59XG5lbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZ2V0OiBrZXkgPT4gUHJvbWlzZS5yZXNvbHZlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpLFxuICAgIHNldDogKGtleSwgdmFsKSA9PiBQcm9taXNlLnJlc29sdmUobG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWwpKSxcbiAgICBkZWxldGU6IGtleSA9PiBQcm9taXNlLnJlc29sdmUobG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KSlcbiAgfTtcbn0iXX0=","'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar srcset = require('srcset');\nvar storage = require('./storage');\n\nvar cachePrefix = \"wikioffline-article-\";\n\nfunction getMetaRequest(name) {\n  return new Request('/wiki/' + name + '.json', {\n    credentials: 'include' // needed for flag cookies\n  });\n}\n\nfunction getArticleRequest(name) {\n  return new Request('/wiki/' + name + '.inc', {\n    credentials: 'include' // needed for flag cookies\n  });\n}\n\nvar Article = (function () {\n  function Article(name) {\n    var _this = this;\n\n    var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    var _ref$fromCache = _ref.fromCache;\n    var fromCache = _ref$fromCache === undefined ? false : _ref$fromCache;\n\n    _classCallCheck(this, Article);\n\n    var fetcher = fromCache ? caches.match.bind(caches) : fetch;\n    this._metaPromise = fetcher(getMetaRequest(name));\n    this._articlePromise = fetcher(getArticleRequest(name));\n\n    this.ready = this._metaPromise.then(function (r) {\n      if (!r) throw Error('No response');\n    });\n\n    var data = this.ready.then(function (_) {\n      return _this._metaPromise;\n    }).then(function (r) {\n      return r.clone().json();\n    });\n\n    this._html = undefined;\n\n    this.meta = data.then(function (meta) {\n      meta.updated = new Date(meta.updated);\n      return meta;\n    });\n\n    this._cacheName = this.meta.then(function (data) {\n      return cachePrefix + data.urlId;\n    });\n  }\n\n  _createClass(Article, [{\n    key: 'getHtml',\n    value: function getHtml() {\n      return regeneratorRuntime.async(function getHtml$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            if (!(this._html === undefined)) {\n              context$2$0.next = 4;\n              break;\n            }\n\n            context$2$0.next = 3;\n            return regeneratorRuntime.awrap(this._articlePromise.then(function (r) {\n              return r.clone().text();\n            }));\n\n          case 3:\n            this._html = context$2$0.sent;\n\n          case 4:\n            return context$2$0.abrupt('return', this._html);\n\n          case 5:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'getHtmlResponse',\n    value: function getHtmlResponse() {\n      return this._articlePromise.then(function (r) {\n        return r.clone();\n      });\n    }\n  }, {\n    key: '_createCacheArticleResponse',\n    value: function _createCacheArticleResponse() {\n      var text, devicePixelRatio;\n      return regeneratorRuntime.async(function _createCacheArticleResponse$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.next = 2;\n            return regeneratorRuntime.awrap(this.getHtml());\n\n          case 2:\n            text = context$2$0.sent;\n            context$2$0.t1 = self.devicePixelRatio;\n\n            if (context$2$0.t1) {\n              context$2$0.next = 8;\n              break;\n            }\n\n            context$2$0.next = 7;\n            return regeneratorRuntime.awrap(storage.get('devicePixelRatio'));\n\n          case 7:\n            context$2$0.t1 = context$2$0.sent;\n\n          case 8:\n            context$2$0.t0 = context$2$0.t1;\n\n            if (context$2$0.t0) {\n              context$2$0.next = 11;\n              break;\n            }\n\n            context$2$0.t0 = 2;\n\n          case 11:\n            devicePixelRatio = context$2$0.t0;\n\n            // yes I'm parsing HTML with regex muahahaha\n            // I'm flattening srcset to make it deterministic\n            text = text.replace(/<img[^>]*>/ig, function (match) {\n              // start with the image src as density 1\n              var newSrc = (/src=(['\"])(.*?)\\1/i.exec(match) || [])[2];\n\n              match = match.replace(/srcset=(['\"])(.*?)\\1/ig, function (srcsetAll, _, srcsetInner) {\n                try {\n                  var parsedSrcset = srcset.parse(srcsetInner).sort(function (a, b) {\n                    return a.density < b.density ? -1 : 1;\n                  });\n                  var lastDensity = 1;\n\n                  var _iteratorNormalCompletion = true;\n                  var _didIteratorError = false;\n                  var _iteratorError = undefined;\n\n                  try {\n                    for (var _iterator = parsedSrcset[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                      var srcSetItem = _step.value;\n\n                      if (devicePixelRatio > lastDensity) {\n                        newSrc = srcSetItem.url;\n                      }\n                      if (devicePixelRatio <= srcSetItem.density) {\n                        break;\n                      }\n                      lastDensity = srcSetItem.density;\n                    }\n                  } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion && _iterator['return']) {\n                        _iterator['return']();\n                      }\n                    } finally {\n                      if (_didIteratorError) {\n                        throw _iteratorError;\n                      }\n                    }\n                  }\n                } catch (e) {}\n\n                return '';\n              });\n\n              if (newSrc) {\n                match = match.replace(/src=(['\"]).*?\\1/ig, 'src=\"' + newSrc + '\"');\n              }\n\n              return match;\n            });\n\n            context$2$0.t2 = Response;\n            context$2$0.t3 = text;\n            context$2$0.next = 17;\n            return regeneratorRuntime.awrap(this._articlePromise);\n\n          case 17:\n            context$2$0.t4 = context$2$0.sent.headers;\n            context$2$0.t5 = {\n              headers: context$2$0.t4\n            };\n            return context$2$0.abrupt('return', new context$2$0.t2(context$2$0.t3, context$2$0.t5));\n\n          case 20:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'cache',\n    value: function cache() {\n      var previouslyCached, cache, imgRe, regexResult, articleResponse, htmlText, imgSrcs, urlId, cacheOpeations;\n      return regeneratorRuntime.async(function cache$(context$2$0) {\n        var _this2 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.next = 2;\n            return regeneratorRuntime.awrap(this.isCached());\n\n          case 2:\n            previouslyCached = context$2$0.sent;\n            context$2$0.t0 = regeneratorRuntime;\n            context$2$0.t1 = caches;\n            context$2$0.next = 7;\n            return regeneratorRuntime.awrap(this._cacheName);\n\n          case 7:\n            context$2$0.t2 = context$2$0.sent;\n            context$2$0.t3 = context$2$0.t1.open.call(context$2$0.t1, context$2$0.t2);\n            context$2$0.next = 11;\n            return context$2$0.t0.awrap.call(context$2$0.t0, context$2$0.t3);\n\n          case 11:\n            cache = context$2$0.sent;\n            imgRe = /<img[^>]*src=(['\"])(.*?)\\1[^>]*>/ig;\n            context$2$0.next = 15;\n            return regeneratorRuntime.awrap(this._createCacheArticleResponse());\n\n          case 15:\n            articleResponse = context$2$0.sent;\n            context$2$0.next = 18;\n            return regeneratorRuntime.awrap(articleResponse.clone().text());\n\n          case 18:\n            htmlText = context$2$0.sent;\n            imgSrcs = new Set();\n            context$2$0.next = 22;\n            return regeneratorRuntime.awrap(this.meta);\n\n          case 22:\n            urlId = context$2$0.sent.urlId;\n\n            while (regexResult = imgRe.exec(htmlText)) {\n              imgSrcs.add(regexResult[2]);\n            }\n\n            context$2$0.t4 = cache;\n            context$2$0.t5 = getMetaRequest(urlId);\n            context$2$0.next = 28;\n            return regeneratorRuntime.awrap(this._metaPromise);\n\n          case 28:\n            context$2$0.t6 = context$2$0.sent.clone();\n            context$2$0.t7 = context$2$0.t4.put.call(context$2$0.t4, context$2$0.t5, context$2$0.t6);\n            context$2$0.t8 = cache.put(getArticleRequest(urlId), articleResponse);\n            cacheOpeations = [context$2$0.t7, context$2$0.t8];\n\n            imgSrcs.forEach(function (url) {\n              var request = new Request(url, { mode: 'no-cors' });\n              cacheOpeations.push(\n              // This is a workaround to https://code.google.com/p/chromium/issues/detail?id=477658\n              // Once the bug is fixed, we can just do this:\n              // fetch(request).then(response => cache.put(request, response))\n              caches.match(request).then(function (response) {\n                return response || fetch(request);\n              }).then(function (response) {\n                return cache.put(request, response);\n              }));\n            });\n\n            return context$2$0.abrupt('return', Promise.all(cacheOpeations)['catch'](function (err) {\n              if (!previouslyCached) {\n                _this2.uncache();\n              }\n              throw err;\n            }).then(function (_) {\n              return undefined;\n            }));\n\n          case 34:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'uncache',\n    value: function uncache() {\n      return regeneratorRuntime.async(function uncache$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.t0 = caches;\n            context$2$0.next = 3;\n            return regeneratorRuntime.awrap(this._cacheName);\n\n          case 3:\n            context$2$0.t1 = context$2$0.sent;\n            return context$2$0.abrupt('return', context$2$0.t0['delete'].call(context$2$0.t0, context$2$0.t1));\n\n          case 5:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'isCached',\n    value: function isCached() {\n      return regeneratorRuntime.async(function isCached$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.t0 = caches;\n            context$2$0.next = 3;\n            return regeneratorRuntime.awrap(this._cacheName);\n\n          case 3:\n            context$2$0.t1 = context$2$0.sent;\n            return context$2$0.abrupt('return', context$2$0.t0.has.call(context$2$0.t0, context$2$0.t1));\n\n          case 5:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }]);\n\n  return Article;\n})();\n\nvar wikipedia = {\n  search: function search(term) {\n    return fetch('/search.json?s=' + term, {\n      credentials: 'include' // needed for flag cookies\n    }).then(function (r) {\n      return r.json();\n    });\n  },\n\n  article: function article(name) {\n    var _ref2,\n        _ref2$fromCache,\n        fromCache,\n        article,\n        args$1$0 = arguments;\n\n    return regeneratorRuntime.async(function article$(context$1$0) {\n      while (1) switch (context$1$0.prev = context$1$0.next) {\n        case 0:\n          _ref2 = args$1$0.length <= 1 || args$1$0[1] === undefined ? {} : args$1$0[1];\n          _ref2$fromCache = _ref2.fromCache;\n          fromCache = _ref2$fromCache === undefined ? false : _ref2$fromCache;\n\n          if (!(fromCache && !('caches' in self))) {\n            context$1$0.next = 5;\n            break;\n          }\n\n          return context$1$0.abrupt('return', Promise.reject(Error(\"Caching not supported\")));\n\n        case 5:\n          article = new Article(name, { fromCache: fromCache });\n          context$1$0.next = 8;\n          return regeneratorRuntime.awrap(article.ready);\n\n        case 8:\n          return context$1$0.abrupt('return', article);\n\n        case 9:\n        case 'end':\n          return context$1$0.stop();\n      }\n    }, null, this);\n  },\n\n  getCachedArticleData: function getCachedArticleData() {\n    var articleNames;\n    return regeneratorRuntime.async(function getCachedArticleData$(context$1$0) {\n      var _this3 = this;\n\n      while (1) switch (context$1$0.prev = context$1$0.next) {\n        case 0:\n          if ('caches' in self) {\n            context$1$0.next = 2;\n            break;\n          }\n\n          return context$1$0.abrupt('return', []);\n\n        case 2:\n          context$1$0.next = 4;\n          return regeneratorRuntime.awrap(caches.keys());\n\n        case 4:\n          context$1$0.t0 = function (cacheName) {\n            return cacheName.startsWith(cachePrefix);\n          };\n\n          context$1$0.t1 = function (cacheName) {\n            return cacheName.slice(cachePrefix.length);\n          };\n\n          articleNames = context$1$0.sent.filter(context$1$0.t0).map(context$1$0.t1);\n          return context$1$0.abrupt('return', Promise.all(articleNames.map(function callee$1$0(name) {\n            var response;\n            return regeneratorRuntime.async(function callee$1$0$(context$2$0) {\n              while (1) switch (context$2$0.prev = context$2$0.next) {\n                case 0:\n                  context$2$0.next = 2;\n                  return regeneratorRuntime.awrap(caches.match(getMetaRequest(name)));\n\n                case 2:\n                  response = context$2$0.sent;\n\n                  if (response) {\n                    context$2$0.next = 6;\n                    break;\n                  }\n\n                  wikipedia.uncache(name);\n                  return context$2$0.abrupt('return', false);\n\n                case 6:\n                  ;\n\n                  return context$2$0.abrupt('return', response.json());\n\n                case 8:\n                case 'end':\n                  return context$2$0.stop();\n              }\n            }, null, _this3);\n          })).then(function (vals) {\n            return vals.filter(function (val) {\n              return val;\n            });\n          }));\n\n        case 8:\n        case 'end':\n          return context$1$0.stop();\n      }\n    }, null, this);\n  },\n\n  uncache: function uncache(name) {\n    return caches['delete'](cachePrefix + name);\n  }\n};\n\nmodule.exports = wikipedia;\n\n// workers don't have access to DPR\n\n// get a fresh request, as it may have originally been redirected\n\n// seeing a bug where the response here is gone - not sure why\n// but I'll guard against it\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvc2hhcmVkL3dpa2lwZWRpYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDOztBQUVuQyxJQUFJLFdBQVcsR0FBRyxzQkFBc0IsQ0FBQzs7QUFFekMsU0FBUyxjQUFjLENBQUMsSUFBSSxFQUFFO0FBQzVCLFNBQU8sSUFBSSxPQUFPLENBQUMsUUFBUSxHQUFHLElBQUksR0FBRyxPQUFPLEVBQUU7QUFDNUMsZUFBVyxFQUFFLFNBQVM7R0FDdkIsQ0FBQyxDQUFDO0NBQ0o7O0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUU7QUFDL0IsU0FBTyxJQUFJLE9BQU8sQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLE1BQU0sRUFBRTtBQUMzQyxlQUFXLEVBQUUsU0FBUztHQUN2QixDQUFDLENBQUM7Q0FDSjs7SUFFSyxPQUFPO0FBQ0EsV0FEUCxPQUFPLENBQ0MsSUFBSSxFQUVWOzs7cUVBQUosRUFBRTs7OEJBREYsU0FBUztRQUFULFNBQVMsa0NBQUcsS0FBSzs7MEJBRmYsT0FBTzs7QUFJVCxRQUFJLE9BQU8sR0FBRyxTQUFTLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDO0FBQzVELFFBQUksQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2xELFFBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7O0FBRXhELFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMs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QUNiLG1CQUFDOztzREFFSyxRQUFRLENBQUMsSUFBSSxFQUFFOzs7Ozs7O1dBQ3ZCLENBQUMsQ0FDSCxDQUFDLElBQUksQ0FBQyxVQUFBLElBQUk7bUJBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFBLEdBQUc7cUJBQUksR0FBRzthQUFBLENBQUM7V0FBQSxDQUFDOzs7Ozs7O0dBQ3hDOztBQUVELFNBQU8sRUFBQSxpQkFBQyxJQUFJLEVBQUU7QUFDWixXQUFPLE1BQU0sVUFBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsQ0FBQztHQUMxQztDQUNGLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9zaGFyZWQvd2lraXBlZGlhLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHNyY3NldCA9IHJlcXVpcmUoJ3NyY3NldCcpO1xudmFyIHN0b3JhZ2UgPSByZXF1aXJlKCcuL3N0b3JhZ2UnKTtcblxudmFyIGNhY2hlUHJlZml4ID0gXCJ3aWtpb2ZmbGluZS1hcnRpY2xlLVwiO1xuXG5mdW5jdGlvbiBnZXRNZXRhUmVxdWVzdChuYW1lKSB7XG4gIHJldHVybiBuZXcgUmVxdWVzdCgnL3dpa2kvJyArIG5hbWUgKyAnLmpzb24nLCB7XG4gICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyAvLyBuZWVkZWQgZm9yIGZsYWcgY29va2llc1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0QXJ0aWNsZVJlcXVlc3QobmFtZSkge1xuICByZXR1cm4gbmV3IFJlcXVlc3QoJy93aWtpLycgKyBuYW1lICsgJy5pbmMnLCB7XG4gICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyAvLyBuZWVkZWQgZm9yIGZsYWcgY29va2llc1xuICB9KTtcbn1cblxuY2xhc3MgQXJ0aWNsZSB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIHtcbiAgICBmcm9tQ2FjaGUgPSBmYWxzZVxuICB9PXt9KSB7XG4gICAgdmFyIGZldGNoZXIgPSBmcm9tQ2FjaGUgPyBjYWNoZXMubWF0Y2guYmluZChjYWNoZXMpIDogZmV0Y2g7XG4gICAgdGhpcy5fbWV0YVByb21pc2UgPSBmZXRjaGVyKGdldE1ldGFSZXF1ZXN0KG5hbWUpKTtcbiAgICB0aGlzLl9hcnRpY2xlUHJvbWlzZSA9IGZldGNoZXIoZ2V0QXJ0aWNsZVJlcXVlc3QobmFtZSkpO1xuXG4gICAgdGhpcy5yZWFkeSA9IHRoaXMuX21ldGFQcm9taXNlLnRoZW4ociA9PiB7XG4gICAgICBpZiAoIXIpIHRocm93IEVycm9yKCdObyByZXNwb25zZScpO1xuICAgIH0pO1xuXG4gICAgdmFyIGRhdGEgPSB0aGlzLnJlYWR5LnRoZW4oXyA9PiB0aGlzLl9tZXRhUHJvbWlzZSkudGhlbihyID0+IHIuY2xvbmUoKS5qc29uKCkpO1xuXG4gICAgdGhpcy5faHRtbCA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMubWV0YSA9IGRhdGEudGhlbihtZXRhID0+IHtcbiAgICAgIG1ldGEudXBkYXRlZCA9IG5ldyBEYXRlKG1ldGEudXBkYXRlZCk7XG4gICAgICByZXR1cm4gbWV0YTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhY2hlTmFtZSA9IHRoaXMubWV0YS50aGVuKGRhdGEgPT4gY2FjaGVQcmVmaXggKyBkYXRhLnVybElkKTtcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWwoKSB7XG4gICAgaWYgKHRoaXMuX2h0bWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5faHRtbCA9IGF3YWl0IHRoaXMuX2FydGljbGVQcm9taXNlLnRoZW4ociA9PiByLmNsb25lKCkudGV4dCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5faHRtbDtcbiAgfVxuXG4gIGdldEh0bWxSZXNwb25zZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fYXJ0aWNsZVByb21pc2UudGhlbihyID0+IHIuY2xvbmUoKSk7XG4gIH1cblxuICBhc3luYyBfY3JlYXRlQ2FjaGVBcnRpY2xlUmVzcG9uc2UoKSB7XG4gICAgdmFyIHRleHQgPSBhd2FpdCB0aGlzLmdldEh0bWwoKTtcbiAgICAvLyB3b3JrZXJzIGRvbid0IGhhdmUgYWNjZXNzIHRvIERQUlxuICAgIHZhciBkZXZpY2VQaXhlbFJhdGlvID0gc2VsZi5kZXZpY2VQaXhlbFJhdGlvIHx8IChhd2FpdCBzdG9yYWdlLmdldCgnZGV2aWNlUGl4ZWxSYXRpbycpKSB8fCAyO1xuXG4gICAgLy8geWVzIEknbSBwYXJzaW5nIEhUTUwgd2l0aCByZWdleCBtdWFoYWhhaGFcbiAgICAvLyBJJ20gZmxhdHRlbmluZyBzcmNzZXQgdG8gbWFrZSBpdCBkZXRlcm1pbmlzdGljXG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvPGltZ1tePl0qPi9pZywgbWF0Y2ggPT4ge1xuICAgICAgLy8gc3RhcnQgd2l0aCB0aGUgaW1hZ2Ugc3JjIGFzIGRlbnNpdHkgMVxuICAgICAgdmFyIG5ld1NyYyA9ICgvc3JjPShbJ1wiXSkoLio/KVxcMS9pLmV4ZWMobWF0Y2gpIHx8IFtdKVsyXTtcblxuICAgICAgbWF0Y2ggPSBtYXRjaC5yZXBsYWNlKC9zcmNzZXQ9KFsnXCJdKSguKj8pXFwxL2lnLCAoc3Jjc2V0QWxsLCBfLCBzcmNzZXRJbm5lcikgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBwYXJzZWRTcmNzZXQgPSBzcmNzZXQucGFyc2Uoc3Jjc2V0SW5uZXIpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhLmRlbnNpdHkgPCBiLmRlbnNpdHkgPyAtMSA6IDE7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGxhc3REZW5zaXR5ID0gMTtcblxuICAgICAgICAgIGZvciAodmFyIHNyY1NldEl0ZW0gb2YgcGFyc2VkU3Jjc2V0KSB7XG4gICAgICAgICAgICBpZiAoZGV2aWNlUGl4ZWxSYXRpbyA+IGxhc3REZW5zaXR5KSB7XG4gICAgICAgICAgICAgIG5ld1NyYyA9IHNyY1NldEl0ZW0udXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRldmljZVBpeGVsUmF0aW8gPD0gc3JjU2V0SXRlbS5kZW5zaXR5KSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdERlbnNpdHkgPSBzcmNTZXRJdGVtLmRlbnNpdHk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7fVxuXG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobmV3U3JjKSB7XG4gICAgICAgIG1hdGNoID0gbWF0Y2gucmVwbGFjZSgvc3JjPShbJ1wiXSkuKj9cXDEvaWcsIGBzcmM9XCIke25ld1NyY31cImApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRleHQsIHtcbiAgICAgIGhlYWRlcnM6IChhd2FpdCB0aGlzLl9hcnRpY2xlUHJvbWlzZSkuaGVhZGVyc1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgY2FjaGUoKSB7XG4gICAgdmFyIHByZXZpb3VzbHlDYWNoZWQgPSBhd2FpdCB0aGlzLmlzQ2FjaGVkKCk7XG4gICAgdmFyIGNhY2hlID0gYXdhaXQgY2FjaGVzLm9wZW4oYXdhaXQgdGhpcy5fY2FjaGVOYW1lKTtcbiAgICB2YXIgaW1nUmUgPSAvPGltZ1tePl0qc3JjPShbJ1wiXSkoLio/KVxcMVtePl0qPi9pZztcbiAgICB2YXIgcmVnZXhSZXN1bHQ7XG4gICAgdmFyIGFydGljbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMuX2NyZWF0ZUNhY2hlQXJ0aWNsZVJlc3BvbnNlKCk7XG4gICAgdmFyIGh0bWxUZXh0ID0gYXdhaXQgYXJ0aWNsZVJlc3BvbnNlLmNsb25lKCkudGV4dCgpO1xuICAgIHZhciBpbWdTcmNzID0gbmV3IFNldCgpO1xuICAgIHZhciB1cmxJZCA9IChhd2FpdCB0aGlzLm1ldGEpLnVybElkO1xuXG4gICAgd2hpbGUgKHJlZ2V4UmVzdWx0ID0gaW1nUmUuZXhlYyhodG1sVGV4dCkpIHtcbiAgICAgIGltZ1NyY3MuYWRkKHJlZ2V4UmVzdWx0WzJdKTtcbiAgICB9XG5cbiAgICB2YXIgY2FjaGVPcGVhdGlvbnMgPSBbXG4gICAgICAvLyBnZXQgYSBmcmVzaCByZXF1ZXN0LCBhcyBpdCBtYXkgaGF2ZSBvcmlnaW5hbGx5IGJlZW4gcmVkaXJlY3RlZFxuICAgICAgY2FjaGUucHV0KGdldE1ldGFSZXF1ZXN0KHVybElkKSwgKGF3YWl0IHRoaXMuX21ldGFQcm9taXNlKS5jbG9uZSgpKSxcbiAgICAgIGNhY2hlLnB1dChnZXRBcnRpY2xlUmVxdWVzdCh1cmxJZCksIGFydGljbGVSZXNwb25zZSlcbiAgICBdO1xuXG4gICAgaW1nU3Jjcy5mb3JFYWNoKHVybCA9PiB7XG4gICAgICB2YXIgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCwge21vZGU6ICduby1jb3JzJ30pO1xuICAgICAgY2FjaGVPcGVhdGlvbnMucHVzaChcbiAgICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgdG8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ3NzY1OFxuICAgICAgICAvLyBPbmNlIHRoZSBidWcgaXMgZml4ZWQsIHdlIGNhbiBqdXN0IGRvIHRoaXM6XG4gICAgICAgIC8vIGZldGNoKHJlcXVlc3QpLnRoZW4ocmVzcG9uc2UgPT4gY2FjaGUucHV0KHJlcXVlc3QsIHJlc3BvbnNlKSlcbiAgICAgICAgY2FjaGVzLm1hdGNoKHJlcXVlc3QpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UgfHwgZmV0Y2gocmVxdWVzdCkpLnRoZW4ocmVzcG9uc2UgPT4gY2FjaGUucHV0KHJlcXVlc3QsIHJlc3BvbnNlKSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoY2FjaGVPcGVhdGlvbnMpLmNhdGNoKGVyciA9PiB7XG4gICAgICBpZiAoIXByZXZpb3VzbHlDYWNoZWQpIHtcbiAgICAgICAgdGhpcy51bmNhY2hlKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSkudGhlbihfID0+IHVuZGVmaW5lZCk7XG4gIH1cblxuICBhc3luYyB1bmNhY2hlKCkge1xuICAgIHJldHVybiBjYWNoZXMuZGVsZXRlKGF3YWl0IHRoaXMuX2NhY2hlTmFtZSk7XG4gIH1cblxuICBhc3luYyBpc0NhY2hlZCgpIHtcbiAgICByZXR1cm4gY2FjaGVzLmhhcyhhd2FpdCB0aGlzLl9jYWNoZU5hbWUpO1xuICB9XG59XG5cbnZhciB3aWtpcGVkaWEgPSB7XG4gIHNlYXJjaCh0ZXJtKSB7XG4gICAgcmV0dXJuIGZldGNoKCcvc2VhcmNoLmpzb24/cz0nICsgdGVybSwge1xuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyAvLyBuZWVkZWQgZm9yIGZsYWcgY29va2llc1xuICAgIH0pLnRoZW4ociA9PiByLmpzb24oKSk7XG4gIH0sXG5cbiAgYXN5bmMgYXJ0aWNsZShuYW1lLCB7XG4gICAgZnJvbUNhY2hlID0gZmFsc2VcbiAgfT17fSkge1xuICAgIGlmIChmcm9tQ2FjaGUgJiYgISgnY2FjaGVzJyBpbiBzZWxmKSkgcmV0dXJuIFByb21pc2UucmVqZWN0KEVycm9yKFwiQ2FjaGluZyBub3Qgc3VwcG9ydGVkXCIpKTtcblxuICAgIHZhciBhcnRpY2xlID0gbmV3IEFydGljbGUobmFtZSwge2Zyb21DYWNoZX0pO1xuICAgIGF3YWl0IGFydGljbGUucmVhZHk7XG4gICAgcmV0dXJuIGFydGljbGU7XG4gIH0sXG5cbiAgYXN5bmMgZ2V0Q2FjaGVkQXJ0aWNsZURhdGEoKSB7XG4gICAgaWYgKCEoJ2NhY2hlcycgaW4gc2VsZikpIHJldHVybiBbXTtcblxuICAgIHZhciBhcnRpY2xlTmFtZXMgPSAoYXdhaXQgY2FjaGVzLmtleXMoKSlcbiAgICAgIC5maWx0ZXIoY2FjaGVOYW1lID0+IGNhY2hlTmFtZS5zdGFydHNXaXRoKGNhY2hlUHJlZml4KSlcbiAgICAgIC5tYXAoY2FjaGVOYW1lID0+IGNhY2hlTmFtZS5zbGljZShjYWNoZVByZWZpeC5sZW5ndGgpKTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIGFydGljbGVOYW1lcy5tYXAoYXN5bmMgbmFtZSA9PiB7XG4gICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGNhY2hlcy5tYXRjaChnZXRNZXRhUmVxdWVzdChuYW1lKSk7XG5cbiAgICAgICAgLy8gc2VlaW5nIGEgYnVnIHdoZXJlIHRoZSByZXNwb25zZSBoZXJlIGlzIGdvbmUgLSBub3Qgc3VyZSB3aHlcbiAgICAgICAgLy8gYnV0IEknbGwgZ3VhcmQgYWdhaW5zdCBpdFxuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgd2lraXBlZGlhLnVuY2FjaGUobmFtZSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9KVxuICAgICkudGhlbih2YWxzID0+IHZhbHMuZmlsdGVyKHZhbCA9PiB2YWwpKTtcbiAgfSxcblxuICB1bmNhY2hlKG5hbWUpIHtcbiAgICByZXR1cm4gY2FjaGVzLmRlbGV0ZShjYWNoZVByZWZpeCArIG5hbWUpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHdpa2lwZWRpYTsiXX0=","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1, helper, alias1=helpers.helperMissing, alias2=\"function\";\n\n  return \"  <script>\\n    document.title = \"\n    + ((stack1 = ((helper = (helper = helpers.safeTitle || (depth0 != null ? depth0.safeTitle : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"safeTitle\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \" + ' - Offline Wikipedia';\\n    history.replaceState({}, document.title, '/wiki/' + \"\n    + ((stack1 = ((helper = (helper = helpers.safeUrlId || (depth0 != null ? depth0.safeUrlId : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"safeUrlId\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \" + location.search);\\n  </script>\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \" style=\\\"visibility: hidden\\\"\";\n},\"5\":function(depth0,helpers,partials,data) {\n    return \" checked\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression;\n\n  return \"<div class=\\\"heading-text\\\">\\n  <h1>\"\n    + alias3(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h1>\\n  <div class=\\\"updated-meta\\\">- updated \"\n    + alias3(((helper = (helper = helpers.updated || (depth0 != null ? depth0.updated : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"updated\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n</div>\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.server : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\n<label class=\\\"cache-toggle\\\"\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.cacheCapable : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \">\\n  <input type=\\\"checkbox\\\" name=\\\"cache\\\"\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.cached : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(5, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \">\\n  <span class=\\\"material-switch\\\">\\n    <span class=\\\"track\\\"></span>\\n    <span class=\\\"handle\\\"></span>\\n  </span>\\n  <span class=\\\"read-offline-txt\\\">Read offline</span>\\n</label>\";\n},\"useData\":true});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZXJtYW53L0RvY3VtZW50cy9oZXJtd29uZy9vZmZsaW5lLXdpa2lwZWRpYS9wdWJsaWMvanMvcGFnZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVDLElBQUksZUFBZSxHQUFHLEVBQUUsQ0FBQzs7QUFFekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUU7O0FBQ25CLGlCQUFlLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUM7Q0FDakQ7O0FBRUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7QUFDakIsaUJBQWUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7Q0FDdEM7OztBQUdELElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRTtBQUM5QyxpQkFBZSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0NBQzFDOztBQUVELFdBQVcsQ0FBQyxlQUFlLEVBQUUsVUFBQSxDQUFDLEVBQUk7OztBQUdoQyxTQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFBLENBQUMsRUFBSTtBQUNwQyxRQUFJLENBQUMsR0FBRyxLQUFLLE9BQU8sQ0FBQyxxQkFBcUIsRUFBQyxFQUFDLENBQUM7R0FDOUMsQ0FBQyxDQUFDO0NBQ0osRUFBRSxVQUFBLENBQUMsRUFBSTtBQUNOLFNBQU8sQ0FBQyxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztDQUMzQyxDQUFDLENBQUMiLCJmaWxlIjoiL1VzZXJzL2hlcm1hbncvRG9jdW1lbnRzL2hlcm13b25nL29mZmxpbmUtd2lraXBlZGlhL3B1YmxpYy9qcy9wYWdlL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGxvYWRTY3JpcHRzID0gcmVxdWlyZShcIi4vbG9hZC1zY3JpcHRzXCIpO1xudmFyIHBvbHlmaWxsc05lZWRlZCA9IFtdO1xuXG5pZiAoIXdpbmRvdy5Qcm9taXNlKSB7IC8vIElFIDooXG4gIHBvbHlmaWxsc05lZWRlZC5wdXNoKCcvanMvcHJvbWlzZS1wb2x5ZmlsbC5qcycpO1xufVxuXG5pZiAoIXdpbmRvdy5mZXRjaCkge1xuICBwb2x5ZmlsbHNOZWVkZWQucHVzaCgnL2pzL2ZldGNoLmpzJyk7XG59XG5cbi8vIEknbSBzdXJlIHVzZXItYWdlbnQgc25pZmZpbmcgd2lsbCBiZSBmaWlpaWluZVxuaWYgKC8oaVBob25lfGlQYWQpOy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICBwb2x5ZmlsbHNOZWVkZWQucHVzaCgnL2pzL2Zhc3RjbGljay5qcycpO1xufVxuXG5sb2FkU2NyaXB0cyhwb2x5ZmlsbHNOZWVkZWQsIF8gPT4ge1xuICAvLyBVc3VhbGx5IGRlZmVyLCBidXQgdGhlIGJsb2NraW5nIGZsYWcgbWVhbnNcbiAgLy8gdGhpcyBoYXBwZW5zIGVhcmx5XG4gIHJlcXVpcmUoJy4vdXRpbHMnKS5kb21SZWFkeS50aGVuKF8gPT4ge1xuICAgIHZhciBjID0gbmV3IChyZXF1aXJlKCcuL2dsb2JhbC1jb250cm9sbGVyJykpO1xuICB9KTtcbn0sIF8gPT4ge1xuICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcG9seWZpbGxzXCIpO1xufSk7XG4iXX0="}